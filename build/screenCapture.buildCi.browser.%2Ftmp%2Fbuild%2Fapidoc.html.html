<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="http://www.totaljs.com">total.js (v2.5.0)</a>
</h1>
<h4>Web framework for Node.js</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.total.js">module total.js</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>_request_check_POST</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>_request_check_redirect</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>_request_check_referer</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>_request_check_robot</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isCluster</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isDebug</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isHTTPS</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isLE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isLoaded</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isTest</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isTheme</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isVirtualDirectory</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isWindows</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.</span>isWorker</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js._upgrade">
            function <span class="apidocSignatureSpan">total.js.</span>_upgrade
            <span class="apidocSignatureSpan">(req, socket, head)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.accept">
            function <span class="apidocSignatureSpan">total.js.</span>accept
            <span class="apidocSignatureSpan">(extension, contentType)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.assert">
            function <span class="apidocSignatureSpan">total.js.</span>assert
            <span class="apidocSignatureSpan">(name, url, flags, callback, data, cookies, headers)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.backup">
            function <span class="apidocSignatureSpan">total.js.</span>backup
            <span class="apidocSignatureSpan">(filename, path, callback, filter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.change">
            function <span class="apidocSignatureSpan">total.js.</span>change
            <span class="apidocSignatureSpan">(message, name, uri, ip)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.clear">
            function <span class="apidocSignatureSpan">total.js.</span>clear
            <span class="apidocSignatureSpan">(callback, isInit)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.clearSchedule">
            function <span class="apidocSignatureSpan">total.js.</span>clearSchedule
            <span class="apidocSignatureSpan">(id)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.compile_check">
            function <span class="apidocSignatureSpan">total.js.</span>compile_check
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.compile_content">
            function <span class="apidocSignatureSpan">total.js.</span>compile_content
            <span class="apidocSignatureSpan">(extension, content, filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.compile_file">
            function <span class="apidocSignatureSpan">total.js.</span>compile_file
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.compile_merge">
            function <span class="apidocSignatureSpan">total.js.</span>compile_merge
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.compile_virtual">
            function <span class="apidocSignatureSpan">total.js.</span>compile_virtual
            <span class="apidocSignatureSpan">(res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.console">
            function <span class="apidocSignatureSpan">total.js.</span>console
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.consoledebug">
            function <span class="apidocSignatureSpan">total.js.</span>consoledebug
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.controller">
            function <span class="apidocSignatureSpan">total.js.</span>controller
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.convert">
            function <span class="apidocSignatureSpan">total.js.</span>convert
            <span class="apidocSignatureSpan">(value, convertor)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.cors">
            function <span class="apidocSignatureSpan">total.js.</span>cors
            <span class="apidocSignatureSpan">(url, flags, credentials)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.database">
            function <span class="apidocSignatureSpan">total.js.</span>database
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.decrypt">
            function <span class="apidocSignatureSpan">total.js.</span>decrypt
            <span class="apidocSignatureSpan">(value, key, jsonConvert)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.download">
            function <span class="apidocSignatureSpan">total.js.</span>download
            <span class="apidocSignatureSpan">(url, filename, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.emit">
            function <span class="apidocSignatureSpan">total.js.</span>emit
            <span class="apidocSignatureSpan">(name, a, b, c, d, e, f, g)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.encrypt">
            function <span class="apidocSignatureSpan">total.js.</span>encrypt
            <span class="apidocSignatureSpan">(value, key, isUnique)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.error">
            function <span class="apidocSignatureSpan">total.js.</span>error
            <span class="apidocSignatureSpan">(err, name, uri)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.eval">
            function <span class="apidocSignatureSpan">total.js.</span>eval
            <span class="apidocSignatureSpan">(script)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.exists">
            function <span class="apidocSignatureSpan">total.js.</span>exists
            <span class="apidocSignatureSpan">(req, res, max, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.file">
            function <span class="apidocSignatureSpan">total.js.</span>file
            <span class="apidocSignatureSpan">(fnValidation, fnExecute, flags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.findConnection">
            function <span class="apidocSignatureSpan">total.js.</span>findConnection
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.findConnections">
            function <span class="apidocSignatureSpan">total.js.</span>findConnections
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.group">
            function <span class="apidocSignatureSpan">total.js.</span>group
            <span class="apidocSignatureSpan">(flags, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.hash">
            function <span class="apidocSignatureSpan">total.js.</span>hash
            <span class="apidocSignatureSpan">(type, value, salt)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.http">
            function <span class="apidocSignatureSpan">total.js.</span>http
            <span class="apidocSignatureSpan">(mode, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.https">
            function <span class="apidocSignatureSpan">total.js.</span>https
            <span class="apidocSignatureSpan">(mode, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.include">
            function <span class="apidocSignatureSpan">total.js.</span>include
            <span class="apidocSignatureSpan">(name, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.initialize">
            function <span class="apidocSignatureSpan">total.js.</span>initialize
            <span class="apidocSignatureSpan">(http, debug, options, restart)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.install">
            function <span class="apidocSignatureSpan">total.js.</span>install
            <span class="apidocSignatureSpan">(type, name, declaration, options, callback, internal, useRequired, skipEmit, uptodateName, next, packageName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.install_make">
            function <span class="apidocSignatureSpan">total.js.</span>install_make
            <span class="apidocSignatureSpan">(key, name, obj, options, callback, skipEmit, type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.install_prepare">
            function <span class="apidocSignatureSpan">total.js.</span>install_prepare
            <span class="apidocSignatureSpan">(noRecursive)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.isProcessed">
            function <span class="apidocSignatureSpan">total.js.</span>isProcessed
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.isProcessing">
            function <span class="apidocSignatureSpan">total.js.</span>isProcessing
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.isSuccess">
            function <span class="apidocSignatureSpan">total.js.</span>isSuccess
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.kill">
            function <span class="apidocSignatureSpan">total.js.</span>kill
            <span class="apidocSignatureSpan">(signal)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.listener">
            function <span class="apidocSignatureSpan">total.js.</span>listener
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.load">
            function <span class="apidocSignatureSpan">total.js.</span>load
            <span class="apidocSignatureSpan">(debug, types, pwd)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.localize">
            function <span class="apidocSignatureSpan">total.js.</span>localize
            <span class="apidocSignatureSpan">(url, flags, minify)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.log">
            function <span class="apidocSignatureSpan">total.js.</span>log
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.logger">
            function <span class="apidocSignatureSpan">total.js.</span>logger
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.logmail">
            function <span class="apidocSignatureSpan">total.js.</span>logmail
            <span class="apidocSignatureSpan">(address, subject, body, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.lookup">
            function <span class="apidocSignatureSpan">total.js.</span>lookup
            <span class="apidocSignatureSpan">(req, url, flags, membertype)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.lookup_websocket">
            function <span class="apidocSignatureSpan">total.js.</span>lookup_websocket
            <span class="apidocSignatureSpan">(req, url, membertype)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.mail">
            function <span class="apidocSignatureSpan">total.js.</span>mail
            <span class="apidocSignatureSpan">(address, subject, view, model, callback, language)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.map">
            function <span class="apidocSignatureSpan">total.js.</span>map
            <span class="apidocSignatureSpan">(url, filename, filter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.mapping">
            function <span class="apidocSignatureSpan">total.js.</span>mapping
            <span class="apidocSignatureSpan">(url, path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.merge">
            function <span class="apidocSignatureSpan">total.js.</span>merge
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.middleware">
            function <span class="apidocSignatureSpan">total.js.</span>middleware
            <span class="apidocSignatureSpan">(name, funcExecute)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.mmr">
            function <span class="apidocSignatureSpan">total.js.</span>mmr
            <span class="apidocSignatureSpan">(url, process)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.mode">
            function <span class="apidocSignatureSpan">total.js.</span>mode
            <span class="apidocSignatureSpan">(http, name, options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.model">
            function <span class="apidocSignatureSpan">total.js.</span>model
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.modify">
            function <span class="apidocSignatureSpan">total.js.</span>modify
            <span class="apidocSignatureSpan">(fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.module">
            function <span class="apidocSignatureSpan">total.js.</span>module
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.noCache">
            function <span class="apidocSignatureSpan">total.js.</span>noCache
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.nosql">
            function <span class="apidocSignatureSpan">total.js.</span>nosql
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.notModified">
            function <span class="apidocSignatureSpan">total.js.</span>notModified
            <span class="apidocSignatureSpan">(req, res, compare, strict)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.on">
            function <span class="apidocSignatureSpan">total.js.</span>on
            <span class="apidocSignatureSpan">(name, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onCompileView">
            function <span class="apidocSignatureSpan">total.js.</span>onCompileView
            <span class="apidocSignatureSpan">(name, html, model)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onError">
            function <span class="apidocSignatureSpan">total.js.</span>onError
            <span class="apidocSignatureSpan">(err, name, uri)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onMail">
            function <span class="apidocSignatureSpan">total.js.</span>onMail
            <span class="apidocSignatureSpan">(address, subject, body, callback, replyTo)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onMapping">
            function <span class="apidocSignatureSpan">total.js.</span>onMapping
            <span class="apidocSignatureSpan">(url, def, ispublic, encode)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onMeta">
            function <span class="apidocSignatureSpan">total.js.</span>onMeta
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onParseJSON">
            function <span class="apidocSignatureSpan">total.js.</span>onParseJSON
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onParseQuery">
            function <span class="apidocSignatureSpan">total.js.</span>onParseQuery
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onParseXML">
            function <span class="apidocSignatureSpan">total.js.</span>onParseXML
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.onSchema">
            function <span class="apidocSignatureSpan">total.js.</span>onSchema
            <span class="apidocSignatureSpan">(req, group, name, callback, filter, novalidate)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.once">
            function <span class="apidocSignatureSpan">total.js.</span>once
            <span class="apidocSignatureSpan">(name, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.parseComponent">
            function <span class="apidocSignatureSpan">total.js.</span>parseComponent
            <span class="apidocSignatureSpan">(body, filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.problem">
            function <span class="apidocSignatureSpan">total.js.</span>problem
            <span class="apidocSignatureSpan">(message, name, uri, ip)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.reconnect">
            function <span class="apidocSignatureSpan">total.js.</span>reconnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.redirect">
            function <span class="apidocSignatureSpan">total.js.</span>redirect
            <span class="apidocSignatureSpan">(host, newHost, withPath, permanent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.register">
            function <span class="apidocSignatureSpan">total.js.</span>register
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.removeAllListeners">
            function <span class="apidocSignatureSpan">total.js.</span>removeAllListeners
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.removeListener">
            function <span class="apidocSignatureSpan">total.js.</span>removeListener
            <span class="apidocSignatureSpan">(name, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.reqstats">
            function <span class="apidocSignatureSpan">total.js.</span>reqstats
            <span class="apidocSignatureSpan">(beg)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.resize">
            function <span class="apidocSignatureSpan">total.js.</span>resize
            <span class="apidocSignatureSpan">(url, fn, flags)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.resource">
            function <span class="apidocSignatureSpan">total.js.</span>resource
            <span class="apidocSignatureSpan">(name, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response400">
            function <span class="apidocSignatureSpan">total.js.</span>response400
            <span class="apidocSignatureSpan">(req, res, problem)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response401">
            function <span class="apidocSignatureSpan">total.js.</span>response401
            <span class="apidocSignatureSpan">(req, res, problem)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response403">
            function <span class="apidocSignatureSpan">total.js.</span>response403
            <span class="apidocSignatureSpan">(req, res, problem)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response404">
            function <span class="apidocSignatureSpan">total.js.</span>response404
            <span class="apidocSignatureSpan">(req, res, problem)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response408">
            function <span class="apidocSignatureSpan">total.js.</span>response408
            <span class="apidocSignatureSpan">(req, res, problem)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response431">
            function <span class="apidocSignatureSpan">total.js.</span>response431
            <span class="apidocSignatureSpan">(req, res, problem)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response500">
            function <span class="apidocSignatureSpan">total.js.</span>response500
            <span class="apidocSignatureSpan">(req, res, error)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response501">
            function <span class="apidocSignatureSpan">total.js.</span>response501
            <span class="apidocSignatureSpan">(req, res, problem)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.response503">
            function <span class="apidocSignatureSpan">total.js.</span>response503
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseBinary">
            function <span class="apidocSignatureSpan">total.js.</span>responseBinary
            <span class="apidocSignatureSpan">(req, res, type, buffer, encoding, download, headers, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseCode">
            function <span class="apidocSignatureSpan">total.js.</span>responseCode
            <span class="apidocSignatureSpan">(req, res, code, problem)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseContent">
            function <span class="apidocSignatureSpan">total.js.</span>responseContent
            <span class="apidocSignatureSpan">(req, res, code, body, type, compress, headers)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseCustom">
            function <span class="apidocSignatureSpan">total.js.</span>responseCustom
            <span class="apidocSignatureSpan">(req, res)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseFile">
            function <span class="apidocSignatureSpan">total.js.</span>responseFile
            <span class="apidocSignatureSpan">(req, res, filename, downloadName, headers, done, key)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseImage">
            function <span class="apidocSignatureSpan">total.js.</span>responseImage
            <span class="apidocSignatureSpan">(req, res, filename, make, headers, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseImageWithoutCache">
            function <span class="apidocSignatureSpan">total.js.</span>responseImageWithoutCache
            <span class="apidocSignatureSpan">(req, res, filename, make, headers, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responsePipe">
            function <span class="apidocSignatureSpan">total.js.</span>responsePipe
            <span class="apidocSignatureSpan">(req, res, url, headers, timeout, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseRedirect">
            function <span class="apidocSignatureSpan">total.js.</span>responseRedirect
            <span class="apidocSignatureSpan">(req, res, url, permanent)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseStatic">
            function <span class="apidocSignatureSpan">total.js.</span>responseStatic
            <span class="apidocSignatureSpan">(req, res, done)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.responseStream">
            function <span class="apidocSignatureSpan">total.js.</span>responseStream
            <span class="apidocSignatureSpan">(req, res, type, stream, download, headers, done, nocompress)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.restart">
            function <span class="apidocSignatureSpan">total.js.</span>restart
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.restful">
            function <span class="apidocSignatureSpan">total.js.</span>restful
            <span class="apidocSignatureSpan">(url, flags, onQuery, onGet, onSave, onDelete)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.restful2">
            function <span class="apidocSignatureSpan">total.js.</span>restful2
            <span class="apidocSignatureSpan">(url, flags, onQuery, onGet, onSave, onDelete)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.restore">
            function <span class="apidocSignatureSpan">total.js.</span>restore
            <span class="apidocSignatureSpan">(filename, target, callback, filter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.rmdir">
            function <span class="apidocSignatureSpan">total.js.</span>rmdir
            <span class="apidocSignatureSpan">(arr, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.route">
            function <span class="apidocSignatureSpan">total.js.</span>route
            <span class="apidocSignatureSpan">(url, funcExecute, flags, length, language)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.routeDownload">
            function <span class="apidocSignatureSpan">total.js.</span>routeDownload
            <span class="apidocSignatureSpan">(name, theme)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.routeFont">
            function <span class="apidocSignatureSpan">total.js.</span>routeFont
            <span class="apidocSignatureSpan">(name, theme)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.routeImage">
            function <span class="apidocSignatureSpan">total.js.</span>routeImage
            <span class="apidocSignatureSpan">(name, theme)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.routeScript">
            function <span class="apidocSignatureSpan">total.js.</span>routeScript
            <span class="apidocSignatureSpan">(name, theme)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.routeStatic">
            function <span class="apidocSignatureSpan">total.js.</span>routeStatic
            <span class="apidocSignatureSpan">(name, theme)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.routeStyle">
            function <span class="apidocSignatureSpan">total.js.</span>routeStyle
            <span class="apidocSignatureSpan">(name, theme)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.routeVideo">
            function <span class="apidocSignatureSpan">total.js.</span>routeVideo
            <span class="apidocSignatureSpan">(name, theme)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.routing">
            function <span class="apidocSignatureSpan">total.js.</span>routing
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.schedule">
            function <span class="apidocSignatureSpan">total.js.</span>schedule
            <span class="apidocSignatureSpan">(date, repeat, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.script">
            function <span class="apidocSignatureSpan">total.js.</span>script
            <span class="apidocSignatureSpan">(body, value, callback, param)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.send">
            function <span class="apidocSignatureSpan">total.js.</span>send
            <span class="apidocSignatureSpan">(message, handle)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.service">
            function <span class="apidocSignatureSpan">total.js.</span>service
            <span class="apidocSignatureSpan">(count)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.setModified">
            function <span class="apidocSignatureSpan">total.js.</span>setModified
            <span class="apidocSignatureSpan">(req, res, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.sitemap">
            function <span class="apidocSignatureSpan">total.js.</span>sitemap
            <span class="apidocSignatureSpan">(name, me, language)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.sitemap_add">
            function <span class="apidocSignatureSpan">total.js.</span>sitemap_add
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.sitemap_navigation">
            function <span class="apidocSignatureSpan">total.js.</span>sitemap_navigation
            <span class="apidocSignatureSpan">(parent, language)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.snapshot">
            function <span class="apidocSignatureSpan">total.js.</span>snapshot
            <span class="apidocSignatureSpan">(url, filename, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.source">
            function <span class="apidocSignatureSpan">total.js.</span>source
            <span class="apidocSignatureSpan">(name, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.stop">
            function <span class="apidocSignatureSpan">total.js.</span>stop
            <span class="apidocSignatureSpan">(signal)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.test">
            function <span class="apidocSignatureSpan">total.js.</span>test
            <span class="apidocSignatureSpan">(stop, names, cb)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.testing">
            function <span class="apidocSignatureSpan">total.js.</span>testing
            <span class="apidocSignatureSpan">(stop, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.touch">
            function <span class="apidocSignatureSpan">total.js.</span>touch
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.trace">
            function <span class="apidocSignatureSpan">total.js.</span>trace
            <span class="apidocSignatureSpan">(message, name, uri, ip)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.translate">
            function <span class="apidocSignatureSpan">total.js.</span>translate
            <span class="apidocSignatureSpan">(language, text)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.translator">
            function <span class="apidocSignatureSpan">total.js.</span>translator
            <span class="apidocSignatureSpan">(language, text)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.uninstall">
            function <span class="apidocSignatureSpan">total.js.</span>uninstall
            <span class="apidocSignatureSpan">(type, name, options, skipEmit, packageName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.unlink">
            function <span class="apidocSignatureSpan">total.js.</span>unlink
            <span class="apidocSignatureSpan">(arr, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.uptodate">
            function <span class="apidocSignatureSpan">total.js.</span>uptodate
            <span class="apidocSignatureSpan">(type, url, options, interval, callback, next)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.usage">
            function <span class="apidocSignatureSpan">total.js.</span>usage
            <span class="apidocSignatureSpan">(detailed)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.usagesnapshot">
            function <span class="apidocSignatureSpan">total.js.</span>usagesnapshot
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.use">
            function <span class="apidocSignatureSpan">total.js.</span>use
            <span class="apidocSignatureSpan">(name, url, types, first)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.useConfig">
            function <span class="apidocSignatureSpan">total.js.</span>useConfig
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.useSMTP">
            function <span class="apidocSignatureSpan">total.js.</span>useSMTP
            <span class="apidocSignatureSpan">(smtp, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.view">
            function <span class="apidocSignatureSpan">total.js.</span>view
            <span class="apidocSignatureSpan">(name, model, layout, repository, language)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.viewCompile">
            function <span class="apidocSignatureSpan">total.js.</span>viewCompile
            <span class="apidocSignatureSpan">(body, model, layout, repository, language)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.wait">
            function <span class="apidocSignatureSpan">total.js.</span>wait
            <span class="apidocSignatureSpan">(name, enable)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.web">
            function <span class="apidocSignatureSpan">total.js.</span>web
            <span class="apidocSignatureSpan">(url, funcExecute, flags, length, language)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.websocket">
            function <span class="apidocSignatureSpan">total.js.</span>websocket
            <span class="apidocSignatureSpan">(url, funcInitialize, flags, length)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.worker">
            function <span class="apidocSignatureSpan">total.js.</span>worker
            <span class="apidocSignatureSpan">(name, id, timeout, args)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.worker2">
            function <span class="apidocSignatureSpan">total.js.</span>worker2
            <span class="apidocSignatureSpan">(name, args, callback, timeout)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.wtf">
            function <span class="apidocSignatureSpan">total.js.</span>wtf
            <span class="apidocSignatureSpan">(message, name, uri, ip)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_convertors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_cors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_files</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_middleware</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_request_middleware</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_subdomain_web</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_subdomain_websocket</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_themes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>_length_wait</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>port</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>version</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.</span>version_node</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>cache</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>changes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>components</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>config</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>connections</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>controllers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>convertors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>databases</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>datetime</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>dependencies</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>errors</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>functions</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>global</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>helpers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>id</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>isomorphic</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>js.builders</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>js.image</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>js.internal</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>js.mail</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>js.nosql</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>js.utils</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>models</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>modificators</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>modules</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>onAuthorize</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>onCompileScript</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>onCompileStyle</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>onLocale</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>onTheme</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>onValidate</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>onVersion</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>owners</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>path</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>problems</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>resources</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>routes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>schedules</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>server</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>sources</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>stats</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>temporary</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>tests</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>themes</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>uptodates</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>validators</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>versions</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>workers</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.</span>workflows</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">total.js.</span>directory</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">total.js.</span>ip</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">total.js.</span>version_header</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.total.js.builders">module total.js.builders</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.ErrorBuilder">
            function <span class="apidocSignatureSpan">total.js.builders.</span>ErrorBuilder
            <span class="apidocSignatureSpan">(onResource)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.Page">
            function <span class="apidocSignatureSpan">total.js.builders.</span>Page
            <span class="apidocSignatureSpan">(url, page, selected, enabled)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.Pagination">
            function <span class="apidocSignatureSpan">total.js.builders.</span>Pagination
            <span class="apidocSignatureSpan">(items, page, max, format)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.RESTBuilder">
            function <span class="apidocSignatureSpan">total.js.builders.</span>RESTBuilder
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.SchemaBuilder">
            function <span class="apidocSignatureSpan">total.js.builders.</span>SchemaBuilder
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.TransformBuilder">
            function <span class="apidocSignatureSpan">total.js.builders.</span>TransformBuilder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.UrlBuilder">
            function <span class="apidocSignatureSpan">total.js.builders.</span>UrlBuilder
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.create">
            function <span class="apidocSignatureSpan">total.js.builders.</span>create
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.defaults">
            function <span class="apidocSignatureSpan">total.js.builders.</span>defaults
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.eachschema">
            function <span class="apidocSignatureSpan">total.js.builders.</span>eachschema
            <span class="apidocSignatureSpan">(group, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.getschema">
            function <span class="apidocSignatureSpan">total.js.builders.</span>getschema
            <span class="apidocSignatureSpan">(group, name, fn, timeout)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.isJoin">
            function <span class="apidocSignatureSpan">total.js.builders.</span>isJoin
            <span class="apidocSignatureSpan">(collection, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.isSchema">
            function <span class="apidocSignatureSpan">total.js.builders.</span>isSchema
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.newschema">
            function <span class="apidocSignatureSpan">total.js.builders.</span>newschema
            <span class="apidocSignatureSpan">(group, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.prepare">
            function <span class="apidocSignatureSpan">total.js.builders.</span>prepare
            <span class="apidocSignatureSpan">(name, model)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.remove">
            function <span class="apidocSignatureSpan">total.js.builders.</span>remove
            <span class="apidocSignatureSpan">(group, name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.restart">
            function <span class="apidocSignatureSpan">total.js.builders.</span>restart
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.uninstall">
            function <span class="apidocSignatureSpan">total.js.builders.</span>uninstall
            <span class="apidocSignatureSpan">(owner)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.validate">
            function <span class="apidocSignatureSpan">total.js.builders.</span>validate
            <span class="apidocSignatureSpan">(name, model, resourcePrefix, resourceName)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.builders.validation">
            function <span class="apidocSignatureSpan">total.js.builders.</span>validation
            <span class="apidocSignatureSpan">(name, properties, fn)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.total.js.image">module total.js.image</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.Image">
            function <span class="apidocSignatureSpan">total.js.image.</span>Image
            <span class="apidocSignatureSpan">(filename, useImageMagick, width, height)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.Picture">
            function <span class="apidocSignatureSpan">total.js.image.</span>Picture
            <span class="apidocSignatureSpan">(filename, useImageMagick, width, height)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.clear">
            function <span class="apidocSignatureSpan">total.js.image.</span>clear
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.init">
            function <span class="apidocSignatureSpan">total.js.image.</span>init
            <span class="apidocSignatureSpan">(filename, imageMagick, width, height)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.load">
            function <span class="apidocSignatureSpan">total.js.image.</span>load
            <span class="apidocSignatureSpan">(filename, imageMagick, width, height)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.measureGIF">
            function <span class="apidocSignatureSpan">total.js.image.</span>measureGIF
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.measureJPG">
            function <span class="apidocSignatureSpan">total.js.image.</span>measureJPG
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.measurePNG">
            function <span class="apidocSignatureSpan">total.js.image.</span>measurePNG
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.measureSVG">
            function <span class="apidocSignatureSpan">total.js.image.</span>measureSVG
            <span class="apidocSignatureSpan">(buffer)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.middleware">
            function <span class="apidocSignatureSpan">total.js.image.</span>middleware
            <span class="apidocSignatureSpan">(type, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.image.restart">
            function <span class="apidocSignatureSpan">total.js.image.</span>restart
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.total.js.internal">module total.js.internal</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.MultipartParser">
            function <span class="apidocSignatureSpan">total.js.internal.</span>MultipartParser
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.appendModel">
            function <span class="apidocSignatureSpan">total.js.internal.</span>appendModel
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.compile_css">
            function <span class="apidocSignatureSpan">total.js.internal.</span>compile_css
            <span class="apidocSignatureSpan">(value, filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.compile_html">
            function <span class="apidocSignatureSpan">total.js.internal.</span>compile_html
            <span class="apidocSignatureSpan">(source, filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.compile_javascript">
            function <span class="apidocSignatureSpan">total.js.internal.</span>compile_javascript
            <span class="apidocSignatureSpan">(source, filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.destroyStream">
            function <span class="apidocSignatureSpan">total.js.internal.</span>destroyStream
            <span class="apidocSignatureSpan">(stream)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.encodeUnicodeURL">
            function <span class="apidocSignatureSpan">total.js.internal.</span>encodeUnicodeURL
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.findLocalization">
            function <span class="apidocSignatureSpan">total.js.internal.</span>findLocalization
            <span class="apidocSignatureSpan">(content, index)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.modificators">
            function <span class="apidocSignatureSpan">total.js.internal.</span>modificators
            <span class="apidocSignatureSpan">(value, filename, type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.onFinished">
            function <span class="apidocSignatureSpan">total.js.internal.</span>onFinished
            <span class="apidocSignatureSpan">(msg, listener)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.parseBlock">
            function <span class="apidocSignatureSpan">total.js.internal.</span>parseBlock
            <span class="apidocSignatureSpan">(name, content)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.parseLocalization">
            function <span class="apidocSignatureSpan">total.js.internal.</span>parseLocalization
            <span class="apidocSignatureSpan">(content, language)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.parseMULTIPART">
            function <span class="apidocSignatureSpan">total.js.internal.</span>parseMULTIPART
            <span class="apidocSignatureSpan">(req, contentType, route, tmpDirectory, subscribe)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.parseMULTIPART_MIXED">
            function <span class="apidocSignatureSpan">total.js.internal.</span>parseMULTIPART_MIXED
            <span class="apidocSignatureSpan">(req, contentType, tmpDirectory, onFile)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.parseURI">
            function <span class="apidocSignatureSpan">total.js.internal.</span>parseURI
            <span class="apidocSignatureSpan">(req)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.preparePath">
            function <span class="apidocSignatureSpan">total.js.internal.</span>preparePath
            <span class="apidocSignatureSpan">(path, remove)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.restart">
            function <span class="apidocSignatureSpan">total.js.internal.</span>restart
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.routeCompare">
            function <span class="apidocSignatureSpan">total.js.internal.</span>routeCompare
            <span class="apidocSignatureSpan">(url, route, isSystem, isAsterix)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.routeCompareFlags">
            function <span class="apidocSignatureSpan">total.js.internal.</span>routeCompareFlags
            <span class="apidocSignatureSpan">(arr1, arr2, membertype)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.routeCompareFlags2">
            function <span class="apidocSignatureSpan">total.js.internal.</span>routeCompareFlags2
            <span class="apidocSignatureSpan">(req, route, membertype)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.routeCompareSubdomain">
            function <span class="apidocSignatureSpan">total.js.internal.</span>routeCompareSubdomain
            <span class="apidocSignatureSpan">(subdomain, arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.routeParam">
            function <span class="apidocSignatureSpan">total.js.internal.</span>routeParam
            <span class="apidocSignatureSpan">(routeUrl, route)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.routeSplit">
            function <span class="apidocSignatureSpan">total.js.internal.</span>routeSplit
            <span class="apidocSignatureSpan">(url, noLower)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.routeSplitCreate">
            function <span class="apidocSignatureSpan">total.js.internal.</span>routeSplitCreate
            <span class="apidocSignatureSpan">(url, noLower)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.viewEngine">
            function <span class="apidocSignatureSpan">total.js.internal.</span>viewEngine
            <span class="apidocSignatureSpan">(name, filename, controller)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.internal.viewEngineCompile">
            function <span class="apidocSignatureSpan">total.js.internal.</span>viewEngineCompile
            <span class="apidocSignatureSpan">(content, language, controller, cachekey)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>END</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>HEADERS_ALMOST_DONE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>HEADER_FIELD</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>HEADER_FIELD_START</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>HEADER_VALUE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>HEADER_VALUE_ALMOST_DONE</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>HEADER_VALUE_START</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>PARSER_UNINITIALIZED</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>PART_DATA</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>PART_DATA_START</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>PART_END</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>START</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">number <span class="apidocSignatureSpan">total.js.internal.</span>START_BOUNDARY</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.total.js.mail">module total.js.mail</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">total.js.mail.</span>debug</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.mail.Mail">
            function <span class="apidocSignatureSpan">total.js.mail.</span>Mail
            <span class="apidocSignatureSpan">(subject, body)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.mail.Message">
            function <span class="apidocSignatureSpan">total.js.mail.</span>Message
            <span class="apidocSignatureSpan">(subject, body)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.mail.</span>connections</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.total.js.nosql">module total.js.nosql</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.nosql.inmemory">
            function <span class="apidocSignatureSpan">total.js.nosql.</span>inmemory
            <span class="apidocSignatureSpan">(name, view)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.nosql.load">
            function <span class="apidocSignatureSpan">total.js.nosql.</span>load
            <span class="apidocSignatureSpan">(name, filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.nosql.memory">
            function <span class="apidocSignatureSpan">total.js.nosql.</span>memory
            <span class="apidocSignatureSpan">(name, view)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.total.js.utils">module total.js.utils</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.Async">
            function <span class="apidocSignatureSpan">total.js.utils.</span>Async
            <span class="apidocSignatureSpan">(owner)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.EventEmitter2">
            function <span class="apidocSignatureSpan">total.js.utils.</span>EventEmitter2
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.GUID">
            function <span class="apidocSignatureSpan">total.js.utils.</span>GUID
            <span class="apidocSignatureSpan">(max)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.ObjectToArray">
            function <span class="apidocSignatureSpan">total.js.utils.</span>ObjectToArray
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.assign">
            function <span class="apidocSignatureSpan">total.js.utils.</span>assign
            <span class="apidocSignatureSpan">(obj, path, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.async">
            function <span class="apidocSignatureSpan">total.js.utils.</span>async
            <span class="apidocSignatureSpan">(fn, isApply)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.atob">
            function <span class="apidocSignatureSpan">total.js.utils.</span>atob
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.btoa">
            function <span class="apidocSignatureSpan">total.js.utils.</span>btoa
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.chunker">
            function <span class="apidocSignatureSpan">total.js.utils.</span>chunker
            <span class="apidocSignatureSpan">(name, max)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.clearDNS">
            function <span class="apidocSignatureSpan">total.js.utils.</span>clearDNS
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.clone">
            function <span class="apidocSignatureSpan">total.js.utils.</span>clone
            <span class="apidocSignatureSpan">(obj, skip, skipFunctions)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.combine">
            function <span class="apidocSignatureSpan">total.js.utils.</span>combine
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.copy">
            function <span class="apidocSignatureSpan">total.js.utils.</span>copy
            <span class="apidocSignatureSpan">(source, target)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.createBuffer">
            function <span class="apidocSignatureSpan">total.js.utils.</span>createBuffer
            <span class="apidocSignatureSpan">(val, type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.createBufferSize">
            function <span class="apidocSignatureSpan">total.js.utils.</span>createBufferSize
            <span class="apidocSignatureSpan">(size)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.decode">
            function <span class="apidocSignatureSpan">total.js.utils.</span>decode
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.distance">
            function <span class="apidocSignatureSpan">total.js.utils.</span>distance
            <span class="apidocSignatureSpan">(lat1, lon1, lat2, lon2)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.download">
            function <span class="apidocSignatureSpan">total.js.utils.</span>download
            <span class="apidocSignatureSpan">(url, flags, data, callback, cookies, headers, encoding, timeout)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.encode">
            function <span class="apidocSignatureSpan">total.js.utils.</span>encode
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.extend">
            function <span class="apidocSignatureSpan">total.js.utils.</span>extend
            <span class="apidocSignatureSpan">(target, source, rewrite)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.extend_headers">
            function <span class="apidocSignatureSpan">total.js.utils.</span>extend_headers
            <span class="apidocSignatureSpan">(first, second)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.extend_headers2">
            function <span class="apidocSignatureSpan">total.js.utils.</span>extend_headers2
            <span class="apidocSignatureSpan">(first, second)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.get">
            function <span class="apidocSignatureSpan">total.js.utils.</span>get
            <span class="apidocSignatureSpan">(obj, path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.getContentType">
            function <span class="apidocSignatureSpan">total.js.utils.</span>getContentType
            <span class="apidocSignatureSpan">(ext)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.getExtension">
            function <span class="apidocSignatureSpan">total.js.utils.</span>getExtension
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.getMessageLength">
            function <span class="apidocSignatureSpan">total.js.utils.</span>getMessageLength
            <span class="apidocSignatureSpan">(data, isLE)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.getName">
            function <span class="apidocSignatureSpan">total.js.utils.</span>getName
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.getWebSocketFrame">
            function <span class="apidocSignatureSpan">total.js.utils.</span>getWebSocketFrame
            <span class="apidocSignatureSpan">(code, message, type, compress)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.httpStatus">
            function <span class="apidocSignatureSpan">total.js.utils.</span>httpStatus
            <span class="apidocSignatureSpan">(code, addCode)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isArray">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isArray
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isDate">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isDate
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isEmpty">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isEmpty
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isEqual">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isEqual
            <span class="apidocSignatureSpan">(obj1, obj2, properties)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isError">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isError
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isObject">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isObject
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isRegExp">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isRegExp
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isRelative">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isRelative
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.isStaticFile">
            function <span class="apidocSignatureSpan">total.js.utils.</span>isStaticFile
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.join">
            function <span class="apidocSignatureSpan">total.js.utils.</span>join
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.keywords">
            function <span class="apidocSignatureSpan">total.js.utils.</span>keywords
            <span class="apidocSignatureSpan">(content, forSearch, alternative, max_count, max_length, min_length)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.ls">
            function <span class="apidocSignatureSpan">total.js.utils.</span>ls
            <span class="apidocSignatureSpan">(path, callback, filter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.ls2">
            function <span class="apidocSignatureSpan">total.js.utils.</span>ls2
            <span class="apidocSignatureSpan">(path, callback, filter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.minifyHTML">
            function <span class="apidocSignatureSpan">total.js.utils.</span>minifyHTML
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.minifyScript">
            function <span class="apidocSignatureSpan">total.js.utils.</span>minifyScript
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.minifyStyle">
            function <span class="apidocSignatureSpan">total.js.utils.</span>minifyStyle
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.noop">
            function <span class="apidocSignatureSpan">total.js.utils.</span>noop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.parseBool">
            function <span class="apidocSignatureSpan">total.js.utils.</span>parseBool
            <span class="apidocSignatureSpan">(obj, def)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.parseBoolean">
            function <span class="apidocSignatureSpan">total.js.utils.</span>parseBoolean
            <span class="apidocSignatureSpan">(obj, def)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.parseFloat">
            function <span class="apidocSignatureSpan">total.js.utils.</span>parseFloat
            <span class="apidocSignatureSpan">(obj, def)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.parseInt">
            function <span class="apidocSignatureSpan">total.js.utils.</span>parseInt
            <span class="apidocSignatureSpan">(obj, def)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.parseJSON">
            function <span class="apidocSignatureSpan">total.js.utils.</span>parseJSON
            <span class="apidocSignatureSpan">(value, date)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.parseQuery">
            function <span class="apidocSignatureSpan">total.js.utils.</span>parseQuery
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.parseTheme">
            function <span class="apidocSignatureSpan">total.js.utils.</span>parseTheme
            <span class="apidocSignatureSpan">(value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.parseXML">
            function <span class="apidocSignatureSpan">total.js.utils.</span>parseXML
            <span class="apidocSignatureSpan">(xml)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.path">
            function <span class="apidocSignatureSpan">total.js.utils.</span>path
            <span class="apidocSignatureSpan">(path, delimiter)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.queue">
            function <span class="apidocSignatureSpan">total.js.utils.</span>queue
            <span class="apidocSignatureSpan">(name, max, fn)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.random">
            function <span class="apidocSignatureSpan">total.js.utils.</span>random
            <span class="apidocSignatureSpan">(max, min)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.reduce">
            function <span class="apidocSignatureSpan">total.js.utils.</span>reduce
            <span class="apidocSignatureSpan">(source, prop, reverse)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.removeDiacritics">
            function <span class="apidocSignatureSpan">total.js.utils.</span>removeDiacritics
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.request">
            function <span class="apidocSignatureSpan">total.js.utils.</span>request
            <span class="apidocSignatureSpan">(url, flags, data, callback, cookies, headers, encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.resolve">
            function <span class="apidocSignatureSpan">total.js.utils.</span>resolve
            <span class="apidocSignatureSpan">(url, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.restart">
            function <span class="apidocSignatureSpan">total.js.utils.</span>restart
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.send">
            function <span class="apidocSignatureSpan">total.js.utils.</span>send
            <span class="apidocSignatureSpan">(name, stream, url, callback, cookies, headers, method, timeout)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.set">
            function <span class="apidocSignatureSpan">total.js.utils.</span>set
            <span class="apidocSignatureSpan">(obj, path, value)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.setContentType">
            function <span class="apidocSignatureSpan">total.js.utils.</span>setContentType
            <span class="apidocSignatureSpan">(ext, type)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.streamer">
            function <span class="apidocSignatureSpan">total.js.utils.</span>streamer
            <span class="apidocSignatureSpan">(beg, end, callback, skip)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.sync">
            function <span class="apidocSignatureSpan">total.js.utils.</span>sync
            <span class="apidocSignatureSpan">(fn, owner)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.sync2">
            function <span class="apidocSignatureSpan">total.js.utils.</span>sync2
            <span class="apidocSignatureSpan">(fn, owner)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.trim">
            function <span class="apidocSignatureSpan">total.js.utils.</span>trim
            <span class="apidocSignatureSpan">(obj, clean)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.upload">
            function <span class="apidocSignatureSpan">total.js.utils.</span>upload
            <span class="apidocSignatureSpan">(files, url, callback, cookies, headers, method, timeout)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.validate_builder">
            function <span class="apidocSignatureSpan">total.js.utils.</span>validate_builder
            <span class="apidocSignatureSpan">(model, error, schema, collection, path, index, fields, pluspath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.total.js.utils.wait">
            function <span class="apidocSignatureSpan">total.js.utils.</span>wait
            <span class="apidocSignatureSpan">(fnValid, fnCallback, timeout, interval)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">total.js.utils.</span>queuecache</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.total.js" id="apidoc.module.total.js">module total.js</a></h1>






























    <h2>
        <a href="#apidoc.element.total.js._upgrade" id="apidoc.element.total.js._upgrade">
        function <span class="apidocSignatureSpan">total.js.</span>_upgrade
        <span class="apidocSignatureSpan">(req, socket, head)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_upgrade = function (req, socket, head) {

	if ((req.headers.upgrade || '').toLowerCase() !== 'websocket')
		return;

	// disables timeout
	socket.setTimeout(0);
	socket.on('error', NOOP);

	var headers = req.headers;
	req.$protocol = req.connection.encrypted || headers['x-forwarded-protocol'] === 'https' ? 'https' : 'http';

	req.uri = framework_internal.parseURI(req);

	F.$events.websocket &amp;&amp; F.emit('websocket', req, socket, head);
	F.stats.request.websocket++;

	req.session = null;
	req.user = null;
	req.flags = [req.secured ? 'https' : 'http', 'get'];

	req.$wspath = U.path(req.uri.pathname);
	var websocket = new WebSocketClient(req, socket, head);

	req.path = framework_internal.routeSplit(req.uri.pathname);
	req.websocket = websocket;

	if (F.onLocale)
		req.$language = F.onLocale(req, socket);

	if (F._length_request_middleware)
		async_middleware(0, req, req.websocket, F.routes.request, websocketcontinue_middleware);
	else
		F.$websocketcontinue(req, req.$wspath, headers);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.accept" id="apidoc.element.total.js.accept">
        function <span class="apidocSignatureSpan">total.js.</span>accept
        <span class="apidocSignatureSpan">(extension, contentType)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">accept = function (extension, contentType) {
	if (extension[0] === '.')
		extension = extension.substring(1);
	F.config['static-accepts'][extension] = true;
	contentType &amp;&amp; U.setContentType(extension, contentType);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: $view(name, model, [expire]), $viewToggle(name, model, [expire]) - added expiration {String}
- updated: controller.validate('schema_name', model);
- updated: Angular.js version
- updated: @{css()} and @{js()} supports multiple values
- updated: @{place()} doesn't add `&lt;script&gt;` tag automatically

- renamed: framework.on('expire') -&gt; framework.on('cache-expire')
- renamed: framework.accepts(extension, [contentType]) -&gt; framework.<span class="apidocCodeKeywordSpan">accept</span>(extension
, [contentType])

- fixed: controller.custom()
- fixed: utils.validate()
- fixed: long messages in WebSocket by Andrea Sessa &lt;https://plus.google.com/u/0/104713619368072403016&gt;
- fixed: view engine parser (reported by @tohachan)
- fixed: Builders.prepare()
- fixed: Builders.validate()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.assert" id="apidoc.element.total.js.assert">
        function <span class="apidocSignatureSpan">total.js.</span>assert
        <span class="apidocSignatureSpan">(name, url, flags, callback, data, cookies, headers)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">assert = function (name, url, flags, callback, data, cookies, headers) {

	// !IMPORTANT! F.testsPriority is created dynamically in F.test()
	if (typeof(url) === 'function') {
		F.tests.push({ name: _test + ': ' + name, priority: F.testsPriority, index: F.tests.length, run: url });
		return F;
	}

	var method = 'GET';
	var length = 0;

	if (headers)
		headers = U.extend({}, headers);
	else
		headers = {};

	if (flags instanceof Array) {
		length = flags.length;
		for (var i = 0; i &lt; length; i++) {

			switch (flags[i].toLowerCase()) {

				case 'xhr':
					headers['X-Requested-With'] = 'XMLHttpRequest';
					break;

				case 'referer':
				case 'referrer':
					headers['Referer'] = url;
					break;

				case 'json':
					headers['Content-Type'] = CT_JSON;
					break;

				case 'xml':
					headers['Content-Type'] = 'text/xml';
					break;

				case 'get':
				case 'head':
				case 'options':
					method = flags[i].toUpperCase();

					if (data) {
						if (typeof(data) === 'object')
							url += '?' + Qs.stringify(data);
						else
							url += data[0] === '?' ? data : '?' + data;
						data = '';
					}

					break;

				case 'upload':
					headers['Content-Type'] = 'multipart/form-data';
					break;

				case 'robot':
					if (headers['User-Agent'])
						headers['User-Agent'] += ' Bot';
					else
						headers['User-Agent'] = 'Bot';
					break;

				case 'mobile':
					if (headers['User-Agent'])
						headers['User-Agent'] += ' iPhone';
					else
						headers['User-Agent'] = 'iPhone';
					break;

				case 'post':
				case 'put':
				case 'delete':

					method = flags[i].toUpperCase();

					if (!headers['Content-Type'])
						headers['Content-Type'] = 'application/x-www-form-urlencoded';

					break;

				case 'raw':
					headers['Content-Type'] = 'application/octet-stream';
					break;

			}
		}
	}

	headers['X-Assertion-Testing'] = '1';

	if (cookies) {
		var builder = [];
		var keys = Object.keys(cookies);

		length = keys.length;

		for (var i = 0; i &lt; length; i++)
			builder.push(keys[i] + '=' + encodeURIComponent(cookies[keys[i]]));

		if (builder.length)
			headers['Cookie'] = builder.join('; ');
	}

	var obj = { name: _test + ': ' + name, priority: F.testsPriority, index: F.tests.length, url: url, callback: callback, method:
method, data: data, headers: headers };
	F.tests.push(obj);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- fixed: WebSocket initialization (critical)
- fixed: Mail sender (problem with ZOHO SMTP)
- fixed: `Number.add()` problem with percentage
- fixed: `U.isDate()` by Guy Fraser
- fixed: `U.parseXML` problem with `CDATA`
- fixed: `U.join()` problem with Windows path by Martin Smola
- fixed: uploading files (problem with unexpected closed requests)
- fixed: `F.<span class="apidocCodeKeywordSpan">assert</span>()` a problem with external URL address

- renamed: event `route-add` to `route`
- renamed: `F.versionNode` to `F.version_node`

- removed: (IMPORTANT) `X-Powered-By` header
- removed: `SCHEMA()`
- removed: composer from `SchemaBuilderEntity`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.backup" id="apidoc.element.total.js.backup">
        function <span class="apidocSignatureSpan">total.js.</span>backup
        <span class="apidocSignatureSpan">(filename, path, callback, filter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">backup = function (filename, path, callback, filter) {

	var length = path.length;
	var padding = 120;

	U.ls(path, function(files, directories) {
		directories.wait(function(item, next) {
			var dir = item.substring(length).replace(/\\/g, '/') + '/';
			if (filter &amp;&amp; !filter(dir))
				return next();
			Fs.appendFile(filename, dir.padRight(padding) + ':#\n', next);
		}, function() {
			files.wait(function(item, next) {
				var fil = item.substring(length).replace(/\\/g, '/');
				if (filter &amp;&amp; !filter(fil))
					return next();
				Fs.readFile(item, function(err, data) {
					Zlib.gzip(data, function(err, data) {
						if (err) {
							F.error(err, 'F.backup()', filename);
							return next();
						}
						Fs.appendFile(filename, fil.padRight(padding) + ':' + data.toString('base64') + '\n', next);
					});
				});
			}, callback);
		});
	});

	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
======= 1.9.1 (HOTFIX)

- added: new sitemap system
- added: a default schema validator is F.onValidation()
- added: ErrorBuilder.setContentType() --&gt; default application/json
- added: View engine supports `else if`
- added: U.parseBoolean(val, [def])
- added: F.<span class="apidocCodeKeywordSpan">backup</span>(filename, path, [callback], [filter]) --&gt; backup some path to
one file
- added: F.restore(filename, target, [callback], [filter]) --&gt; restore backup file (but not evaluating)
- added: MailMessage supports custom headers `message.headers = { key: 'value' }`
- added: @{notranslate} --&gt; disables view translation
- added: F.mode('debug') or F.mode('release') --&gt; changes a mode of the framework
- added: EACHSCHEMA([group], prepare(group, name, schema))

- updated: MailMessage.bcc(email, [clear]) --&gt; added clear
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.change" id="apidoc.element.total.js.change">
        function <span class="apidocSignatureSpan">total.js.</span>change
        <span class="apidocSignatureSpan">(message, name, uri, ip)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">change = function (message, name, uri, ip) {
	F.$events.change &amp;&amp; F.emit('change', message, name, uri, ip);

	if (message instanceof framework_builders.ErrorBuilder)
		message = message.plain();
	else if (typeof(message) === 'object')
		message = JSON.stringify(message);

	var obj = { message: message, name: name, url: uri ? typeof(uri) === 'string' ? uri : Parser.format(uri) : undefined, ip: ip };
	F.logger('changes', obj.message, 'url: ' + obj.url, 'source: ' + obj.name, 'ip: ' + obj.ip);

	if (F.changes) {
		F.changes.push(obj);
		F.changes.length &gt; 50 &amp;&amp; F.changes.shift();
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: view engine supports looping with objects&nbsp;`@{foreach m in model} key: @{m.key} and value: @{m.value} @{end}`

- updated: subdomain routing supports wildcard routing `F.route('[*]/', 'homepage')` (`F.websocket()` is supported
 too)
- updated: `F.route(url, ...)` - `url`can be String Array with multiple relative paths by @Harry-Stot
- updated: `F.file()` supports flags instead of middleware and the flags supports extensions `['.jpg', '.png'
;]`. The `name` argument has been removed.
- updated: `F.localize()` supports flags and the `name` argument has been removed
- updated: `F.sitemap()` returns object with a new field: `wildcard: {Boolean}`
- updated: `F.problem()`, `F.<span class="apidocCodeKeywordSpan">change</span>()`, `controller.problem()` and `controller.change
()` write logs to the file
- updated: `F.mail()` and `controller.mail()` subject is translated according to the language
- updated: `F.file(fnValidation/relative_path, fnExecute, [flags])` the file routing is completely changed
- updated: `export.booting` can contain `root` attribute for `package` applications
- updated: `Array.orderBy()` added quicksort algorithm
- updated: `Date.format()` supports day names `ddd` (short) and `dddd` (full)
- updated: `String.removeDiacritics()` supports multiple languages (by @Harry-Slot)
- updated: (IMPORTANT) `U.getExtension(filename)` --&gt; returns extension without `.` dot
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.clear" id="apidoc.element.total.js.clear">
        function <span class="apidocSignatureSpan">total.js.</span>clear
        <span class="apidocSignatureSpan">(callback, isInit)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clear = function (callback, isInit) {

	var dir = F.path.temp();
	var plus = F.id ? 'i-' + F.id + '_' : '';

	if (isInit) {
		if (F.config['disable-clear-temporary-directory']) {
			// clears only JS and CSS files
			U.ls(dir, function(files) {
				F.unlink(files, function() {
					callback &amp;&amp; callback();
				});
			}, function(filename, folder) {
				if (folder || (plus &amp;&amp; !filename.substring(dir.length).startsWith(plus)))
					return false;
				if (filename.indexOf('.package') !== -1)
					return true;
				var ext = U.getExtension(filename);
				return ext === 'js' || ext === 'css' || ext === 'tmp' || ext === 'upload' || ext === 'html' || ext === 'htm';
			});

			return F;
		}
	}

	if (!existsSync(dir)) {
		callback &amp;&amp; callback();
		return F;
	}

	U.ls(dir, function(files, directories) {

		if (isInit) {
			var arr = [];
			for (var i = 0, length = files.length; i &lt; length; i++) {
				var filename = files[i].substring(dir.length);
				if (plus &amp;&amp; !filename.startsWith(plus))
					continue;
				(filename.indexOf('/') === -1 || filename.indexOf('.package/') !== -1) &amp;&amp; !filename.endsWith('.jsoncache') &amp;&amp; arr.push(files
[i]);
			}
			files = arr;
			directories = directories.remove(n =&gt; n.indexOf('.package') === -1);
		}

		F.unlink(files, () =&gt; F.rmdir(directories, callback));
	});

	if (!isInit) {
		// clear static cache
		F.temporary.path = {};
		F.temporary.range = {};
		F.temporary.notfound = {};
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: View Engine supports `@{continue}` and `@{break}` command for looping
- added: `URLBuilder.make(fn)`
- added: `NOSQLMEMORY(dbName, [viewName])` enables in-memory database collection
- added: NoSQL `nosql.upsert(doc)` inserts a new document where document doesn't exist in DB
- added: NoSQL `nosql.release()` for releasing of in-memory DB (framework clears unused in-memory databases automatically)
- added: NoSQL `nosql.scalar(type, dbName, [view])` performs scalar operation by type: `sum`, `min`, `max`, `avg`, `count` or `group
`
- added: NoSQL `nosql.binary.all(callback)` browses all stored files
- added: NoSQL `nosql.binary.<span class="apidocCodeKeywordSpan">clear</span>(callback)`removes all stored files
- added: NoSQL `DatabaseBuilder.random()`
- added: NoSQL `DatabaseBuilder.join(field, dbName, [view])` returns `DatabaseBuilder` with updated `.where(field_JoinedDB, field_currentdb
)` method (it supports `.fields()` too)
- added: NoSQL `DatabaseBuilder.join()` supports scalar operation too, e.g. `nosql.join(...).scalar('count')`
- added: NoSQL `DatabaseBuilder.scalar(type, [field])` - types: `sum`, `min`, `max`, `avg`, `count` or `group`
- added: NoSQL `DatabaseBuilder.month(field, [operator], value)` filters `Date` fields according its month number
- added: NoSQL `DatabaseBuilder.year(field, [operator], value)` filters `Date` fields according its year number
- added: NoSQL `DatabaseBuilder.day(field, [operator], value)` filters `Date` fields according its day number
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.clearSchedule" id="apidoc.element.total.js.clearSchedule">
        function <span class="apidocSignatureSpan">total.js.</span>clearSchedule
        <span class="apidocSignatureSpan">(id)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clearSchedule = function (id) {
	F.schedules.remove('id', id);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `EMIT()` alias for `F.emit()`
- added: `ON()` alias for `F.on()`
- added: `OFF()` alias for `F.removeListener(eventName, listener)` or `F.removeAllListeners([eventName])`
- added: `controller.components()` adds script/css tag into the head
- added: `@{components([group], [settings])}` renders all components together from selected group
- added: a new alias `WAIT()` alias for `U.wait()`
- added: `res.status(code)` for express middleware
- added: `F.<span class="apidocCodeKeywordSpan">clearSchedule</span>(id)` for removing existing schedules
- added: a support for WebSocket compression
- added: removing `.package` files from `tmp` directory
- added: a new schema implementation (more in docs)
- added: `F.restful2()` has simplified route mechanism (it doesn't use "{id}" param for insert(POST)/update(POST)/
delete(DELETE) method with except "GET" method)
- added: `res.binary(buffer, contentType, [type], [download], [headers])`
- added: a new route flag `novalidate` (a prevention for Schema validation)
- added: `U.upload(files, url, [callback], [cookies], [headers], [method], [timeout])` for multiple uploading files
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.compile_check" id="apidoc.element.total.js.compile_check">
        function <span class="apidocSignatureSpan">total.js.</span>compile_check
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile_check = function (res) {

	var req = res.req;
	var uri = req.uri;

	if (F.routes.merge[uri.pathname]) {
		F.compile_merge(res);
		return F;
	}

	fsFileExists(res.options.filename, function(e, size, sfile, stats) {
		if (e) {
			if (!res.noCompress &amp;&amp; (req.extension === 'js' || req.extension === 'css') &amp;&amp; !REG_NOCOMPRESS.test(res.options.filename))
				return F.compile_file(res);
			F.temporary.path[req.$key] = [res.options.filename, size, stats.mtime.toUTCString()];
			delete F.temporary.processing[req.$key];
			res.$file();
		} else if (F.isVirtualDirectory)
			F.compile_virtual(res);
		else {
			F.temporary.notfound[req.$key] = true;
			delete F.temporary.processing[req.$key];
			res.$file();
		}
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.compile_content" id="apidoc.element.total.js.compile_content">
        function <span class="apidocSignatureSpan">total.js.</span>compile_content
        <span class="apidocSignatureSpan">(extension, content, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile_content = function (extension, content, filename) {

	if (filename &amp;&amp; REG_NOCOMPRESS.test(filename))
		return content;

	switch (extension) {
		case 'js':
			return F.config['allow-compile-script'] ? framework_internal.compile_javascript(content, filename) : content;

		case 'css':
			content = F.config['allow-compile-style'] ? framework_internal.compile_css(content, filename) : content;
			var matches = content.match(REG_COMPILECSS);
			if (matches) {
				for (var i = 0, length = matches.length; i &lt; length; i++) {
					var key = matches[i];
					var url = key.substring(4, key.length - 1);
					content = content.replace(key, 'url(' + F.$version(url) + ')');
				}
			}
			return content;
	}

	return content;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			delete F.temporary.processing[req.$key];
			res.$file();
			return;
		}

		var file = F.path.temp((F.id ? 'i-' + F.id + '_' : '') + createTemporaryKey(uri.pathname));
		F.path.verify('temp');
		Fs.writeFileSync(file, F.<span class="apidocCodeKeywordSpan">compile_content</span>(req.extension, framework_internal.parseBlock
(F.routes.blocks[uri.pathname], buffer.toString(ENCODING)), res.options.filename), ENCODING);
		var stats = Fs.statSync(file);
		F.temporary.path[req.$key] = [file, stats.size, stats.mtime.toUTCString()];
		delete F.temporary.processing[req.$key];
		res.$file();
	});
	return F;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.compile_file" id="apidoc.element.total.js.compile_file">
        function <span class="apidocSignatureSpan">total.js.</span>compile_file
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile_file = function (res) {
	fsFileRead(res.options.filename, function(err, buffer) {

		var req = res.req;
		var uri = req.uri;

		if (err) {
			F.error(err, res.options.filename, uri);
			F.temporary.notfound[req.$key] = true;
			delete F.temporary.processing[req.$key];
			res.$file();
			return;
		}

		var file = F.path.temp((F.id ? 'i-' + F.id + '_' : '') + createTemporaryKey(uri.pathname));
		F.path.verify('temp');
		Fs.writeFileSync(file, F.compile_content(req.extension, framework_internal.parseBlock(F.routes.blocks[uri.pathname], buffer.toString
(ENCODING)), res.options.filename), ENCODING);
		var stats = Fs.statSync(file);
		F.temporary.path[req.$key] = [file, stats.size, stats.mtime.toUTCString()];
		delete F.temporary.processing[req.$key];
		res.$file();
	});
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			delete F.temporary.processing[req.$key];
			res.$file();
			return;
		}

		if (!res.noCompress &amp;&amp; (req.extension === 'js' || req.extension === 'css') &amp;&amp; !REG_NOCOMPRESS
.test(res.options.filename)) {
			res.options.filename = tmpname;
			F.<span class="apidocCodeKeywordSpan">compile_file</span>(res);
		} else {
			F.temporary.path[req.$key] = [tmpname, size, stats.mtime.toUTCString()];
			delete F.temporary.processing[req.$key];
			res.$file();
		}
	});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.compile_merge" id="apidoc.element.total.js.compile_merge">
        function <span class="apidocSignatureSpan">total.js.</span>compile_merge
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile_merge = function (res) {

	var req = res.req;
	var uri = req.uri;

	var merge = F.routes.merge[uri.pathname];
	var filename = merge.filename;

	if (!F.config.debug &amp;&amp; existsSync(filename)) {
		var stats = Fs.statSync(filename);
		F.temporary.path[req.$key] = [filename, stats.size, stats.mtime.toUTCString()];
		delete F.temporary.processing[req.$key];
		res.$file();
		return;
	}

	var writer = Fs.createWriteStream(filename);

	writer.on('finish', function() {
		var stats = Fs.statSync(filename);
		F.temporary.path[req.$key] = [filename, stats.size, stats.mtime.toUTCString()];
		delete F.temporary.processing[req.$key];
		res.$file();
	});

	var index = 0;
	var remove = null;

	merge.files.wait(function(filename, next) {

		var block;

		// Skip isomorphic
		if (filename[0] !== '#') {
			var blocks = filename.split('#');
			block = blocks[1];
			block &amp;&amp; (filename = blocks[0]);
		}

		if (filename.startsWith('http://') || filename.startsWith('https://')) {
			U.request(filename, FLAGS_DOWNLOAD, function(err, data) {

				var output = F.compile_content(req.extension, framework_internal.parseBlock(block, data), filename);

				if (req.extension === 'js') {
					if (output[output.length - 1] !== ';')
						output += ';';
				} else if (req.extension === 'html') {
					if (output[output.length - 1] !== NEWLINE)
						output += NEWLINE;
				}

				DEBUG &amp;&amp; merge_debug_writer(writer, filename, req.extension, index++, block);
				writer.write(output);
				next();
			});
			return;
		}

		if (filename[0] !== '~') {
			var tmp = F.path.public(filename);
			if (F.isVirtualDirectory &amp;&amp; !existsSync(tmp))
				tmp = F.path.virtual(filename);
			filename = tmp;
		} else
			filename = filename.substring(1);

		var indexer = filename.indexOf('*');
		if (indexer !== -1) {

			var tmp = filename.substring(indexer + 1).toLowerCase();
			var len = tmp.length;
			!remove &amp;&amp; (remove = []);

			// Remove directory for all future requests
			remove.push(arguments[0]);

			U.ls(filename.substring(0, indexer), function(files) {
				for (var j = 0, l = files.length; j &lt; l; j++)
					merge.files.push('~' + files[j]);
				next();
			}, (path, isDirectory) =&gt; isDirectory ? true : path.substring(path.length - len).toLowerCase() === tmp);
			return;
		}

		fsFileRead(filename, function(err, buffer) {

			if (err) {
				F.error(err, merge.filename, uri);
				next();
				return;
			}

			var output = F.compile_content(req.extension, framework_internal.parseBlock(block, buffer.toString(ENCODING)), filename);
			if (req.extension === 'js') {
				if (output[output.length - 1] !== ';')
					output += ';';
			} else if (req.extension === 'html') {
				if (output[output.length - 1] !== NEWLINE)
					output += NEWLINE;
			}

			DEBUG &amp;&amp; merge_debug_writer(writer, filename, req.extension, index++, block);
			writer.write(output);
			next();
		});

	}, function() {

		writer.end();

		// Removes all directories from merge list (because the files are added into the queue)
		if (remove) {
			for (var i = 0, length = remove.length; i &lt; length; i++)
				merge.files.splice(merge.files.indexOf(remove[i]), 1);
		}
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

F.compile_check = function(res) {

	var req = res.req;
	var uri = req.uri;

	if (F.routes.merge[uri.pathname]) {
		F.<span class="apidocCodeKeywordSpan">compile_merge</span>(res);
		return F;
	}

	fsFileExists(res.options.filename, function(e, size, sfile, stats) {
		if (e) {
			if (!res.noCompress &amp;&amp; (req.extension === 'js' || req.extension === 'css') &amp;&amp; !REG_NOCOMPRESS
.test(res.options.filename))
				return F.compile_file(res);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.compile_virtual" id="apidoc.element.total.js.compile_virtual">
        function <span class="apidocSignatureSpan">total.js.</span>compile_virtual
        <span class="apidocSignatureSpan">(res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile_virtual = function (res) {

	var req = res.req;
	var tmpname = res.options.filename.replace(F.config['directory-public'], F.config['directory-public-virtual']);

	if (tmpname === res.options.filename) {
		F.temporary.notfound[req.$key] = true;
		delete F.temporary.processing[req.$key];
		res.$file();
		return;
	}

	fsFileExists(tmpname, function(e, size, sfile, stats) {

		if (!e) {
			F.temporary.notfound[req.$key] = true;
			delete F.temporary.processing[req.$key];
			res.$file();
			return;
		}

		if (!res.noCompress &amp;&amp; (req.extension === 'js' || req.extension === 'css') &amp;&amp; !REG_NOCOMPRESS.test(res.options.filename)) {
			res.options.filename = tmpname;
			F.compile_file(res);
		} else {
			F.temporary.path[req.$key] = [tmpname, size, stats.mtime.toUTCString()];
			delete F.temporary.processing[req.$key];
			res.$file();
		}
	});

	return;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (e) {
			if (!res.noCompress &amp;&amp; (req.extension === 'js' || req.extension === 'css') &amp;&amp; !REG_NOCOMPRESS
.test(res.options.filename))
				return F.compile_file(res);
			F.temporary.path[req.$key] = [res.options.filename, size, stats.mtime.toUTCString()];
			delete F.temporary.processing[req.$key];
			res.$file();
		} else if (F.isVirtualDirectory)
			F.<span class="apidocCodeKeywordSpan">compile_virtual</span>(res);
		else {
			F.temporary.notfound[req.$key] = true;
			delete F.temporary.processing[req.$key];
			res.$file();
		}
	});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.console" id="apidoc.element.total.js.console">
        function <span class="apidocSignatureSpan">total.js.</span>console
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">console = function () {
	console.log('====================================================');
	console.log('PID         : ' + process.pid);
	console.log('Node.js     : ' + process.version);
	console.log('Total.js    : v' + F.version_header);
	console.log('OS          : ' + Os.platform() + ' ' + Os.release());
	console.log('====================================================');
	console.log('Name        : ' + F.config.name);
	console.log('Version     : ' + F.config.version);
	console.log('Author      : ' + F.config.author);
	console.log('Date        : ' + F.datetime.format('yyyy-MM-dd HH:mm:ss'));
	console.log('Mode        : ' + (F.config.debug ? 'debug' : 'release'));
	console.log('====================================================\n');
	console.log('{2}://{0}:{1}/'.format(F.ip, F.port, F.isHTTPS ? 'https' : 'http'));
	console.log('');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

			if (F.config['allow-debug']) {
				F.consoledebug('done');
				F.usagesnapshot();
			}

			if (!process.connected || restart)
				F.<span class="apidocCodeKeywordSpan">console</span>();

			setTimeout(function() {
				try {
					F.emit('load', F);
					F.emit('ready', F);
				} catch (err) {
					F.error(err, 'F.on("load/ready")');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.consoledebug" id="apidoc.element.total.js.consoledebug">
        function <span class="apidocSignatureSpan">total.js.</span>consoledebug
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">consoledebug = function () {

	if (!F.config['allow-debug'])
		return F;

	var arr = [new Date().format('yyyy-MM-dd HH:mm:ss'), '---------&gt;'];
	for (var i = 0; i &lt; arguments.length; i++)
		arr.push(arguments[i]);
	console.log.apply(console, arr);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			arr.forEach((item) =&gt; dependencies.push(next =&gt; F.install('component', item.name, item.filename, undefined
, undefined, undefined, undefined, undefined, undefined, next, packageName)));
			resume();
		});
	}

	operations.async(function() {
		var count = dependencies.length;
		F.<span class="apidocCodeKeywordSpan">consoledebug</span>('load dependencies ' + count + 'x');
		dependencies.async(function() {
			types &amp;&amp; types.indexOf('service') === -1 &amp;&amp; F.cache.stop();
			F.$routesSort();
			(!types || types.indexOf('dependencies') !== -1) &amp;&amp; F.$configure_dependencies();
			F.consoledebug('load dependencies {0}x (done)'.format(count));
			callback &amp;&amp; callback();
		});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.controller" id="apidoc.element.total.js.controller">
        function <span class="apidocSignatureSpan">total.js.</span>controller
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">controller = function (name) {
	return F.controllers[name] || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: controller.section(name, [value]);

- updated: NoSQL v2.0.8
- updated: String.parseDate('yyyy-MM-dd HH:mm:ss') - time is optional
- updated: module: exports.install = function(framework, options) {};
- updated: (IMPORTANT) INCLUDE(name, [options]), SOURCE(name, [options]) &gt; object
- updated: (IMPORTANT) SOURCE(name, [options]), framework.source(name, [options]) &gt; object
- updated: framework.<span class="apidocCodeKeywordSpan">controller</span>(name) - definition was removed (use: framework.install
())
- updated: framework.run([http], config, [port], [ip], [options])
- updated: utils.validate(), Builders.validate() &gt; prepare function (added: schemaName): function(name, value, path, schemaName
)
- updated: framework.assert() supports "data" as function (for future data)
- updated: empty-project
- updated: request.signature([key]) - added key param
- updated: middleware function to: function(req, res, next) {}
- update: expiration supports string (framework.cache, response.cookie), example: '1 minute'
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.convert" id="apidoc.element.total.js.convert">
        function <span class="apidocSignatureSpan">total.js.</span>convert
        <span class="apidocSignatureSpan">(value, convertor)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">convert = function (value, convertor) {

	if (convertor) {
		if (F.convertors.findIndex('name', value) !== -1)
			return false;

		if (convertor === Number)
			convertor = U.parseFloat;
		else if (convertor === Boolean)
			convertor = U.parseBoolean;
		else if (typeof(convertor) === 'string') {
			switch (convertor.toLowerCase()) {
				case 'json':
					convertor = U.parseJSON;
					break;
				case 'float':
				case 'number':
				case 'double':
					convertor = U.parseFloat;
					break;
				case 'int':
				case 'integer':
					convertor = U.parseInt2;
					break;
				default:
					return console.log('F.convert unknown convertor type:', convertor);
			}
		}

		F.convertors.push({ name: value, convertor: convertor });
		F._length_convertors = F.convertors.length;
		return true;
	}

	for (var i = 0, length = F.convertors.length; i &lt; length; i++) {
		if (value[F.convertors[i].name])
			value[F.convertors[i].name] = F.convertors[i].convertor(value[F.convertors[i].name]);
	}

	return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.stats.other.mail` with a count of sent emails
- added: `F.stats.response.errorBuilder` with count of sent ErrorBuilders
- added: `F.stats.response.image` with count of processed images via GM or IM
- added: `F.stats.request.schema` with count of request to SchemaBuilder
- added: `String.prototype.parseTerminal([fields], fn(values, index, count, realIndex), [skipLines], [takeLines])`
- added: `TRACE(message, [name], [url], [ip])` is an alias for `F.trace()`
- added: `F.config['trace-console']` (default: `true`) shows tracing on the console
- added: `F.<span class="apidocCodeKeywordSpan">convert</span>(name, type/function(val))` registers a new convertor (convertors
uses QueryParser (GET/POST))
- added: `F.convert(obj)` performs convertor for an object
- added: `F.download(url, filename, [callback])` a new alias for `F.snapshot()`
- added: `$$$([group], name)` for `GETSCHEMA([group], name)`
- added: configuration files supports options for all dependencies `module#mymodulename    (Object)   : { name: 'A custom options
 for dependency' }`
- added: `U.chunker()` added a new property `chunker.pages` with count of all stored pages
- added: `U.chunker()` added a new property `chunker.count` with count of all stored items
- added: `NEWOPERATION(name, fn(error, callback(response), value))` - registers a new operation (same as schemas)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.cors" id="apidoc.element.total.js.cors">
        function <span class="apidocSignatureSpan">total.js.</span>cors
        <span class="apidocSignatureSpan">(url, flags, credentials)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cors = function (url, flags, credentials) {

	var route = {};
	var origins = [];
	var methods = [];
	var headers = [];
	var age;

	if (flags instanceof Array) {
		for (var i = 0, length = flags.length; i &lt; length; i++) {
			var flag = flags[i];
			var type = typeof(flag);

			if (type === 'string')
				flag = flag.toLowerCase();
			else if (type === 'number') {
				age = flag;
				continue;
			}

			if (type === 'boolean' || flag.startsWith('credential')) {
				credentials = true;
				continue;
			}

			if (flag.startsWith('http://') || flag.startsWith('https://')) {
				origins.push(flag);
				continue;
			}

			switch (flag) {
				case 'post':
				case 'put':
				case 'delete':
				case 'options':
				case 'patch':
				case 'head':
				case 'get':
					methods.push(flag.toUpperCase());
					break;
				default:
					headers.push(flags[i]);
					break;
			}
		}
	}

	route.isASTERIX = url.lastIndexOf('*') !== -1;

	if (route.isASTERIX)
		url = url.replace('*', '');

	url = framework_internal.preparePath(framework_internal.encodeUnicodeURL(url.trim()));

	route.hash = url.hash();
	route.owner = _owner;
	route.url = framework_internal.routeSplitCreate(url);
	route.origins = origins.length ? origins : null;
	route.methods = methods.length ? methods : null;
	route.headers = headers.length ? headers : null;
	route.credentials = credentials;
	route.age = age || F.config['default-cors-maxage'];

	F.routes.cors.push(route);
	F._length_cors = F.routes.cors.length;

	F.routes.cors.sort(function(a, b) {
		var al = a.url.length;
		var bl = b.url.length;
		return al &gt; bl ? - 1 : al &lt; bl ? 1 : a.isASTERIX &amp;&amp; b.isASTERIX ? 1 : 0;
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- fixed: `controller.memorize()` problem with `controller.content()`
- fixed: `multipart/form-data` parser
- fixed: `Array.async()` without arguments
- fixed: view inline helpers
- fixed: `FrameworkImage.save()` doens't work when it doesn't contain any operation
- fixed: Windows paths
- fixed: problem with `websocket.destroy()`
- fixed: `F.<span class="apidocCodeKeywordSpan">cors</span>()`
- fixed: WebSocket initialization (critical)
- fixed: Mail sender (problem with ZOHO SMTP)
- fixed: `Number.add()` problem with percentage
- fixed: `U.isDate()` by Guy Fraser
- fixed: `U.parseXML` problem with `CDATA`
- fixed: `U.join()` problem with Windows path by Martin Smola
- fixed: uploading files (problem with unexpected closed requests)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.database" id="apidoc.element.total.js.database">
        function <span class="apidocSignatureSpan">total.js.</span>database
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">database = function (name) {
	return F.nosql(name);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- removed: `framework.async()`
- removed: `Utils.validate()`
- removed: `Utils.isEmail()`
- removed: `Utils.isURL()`
- removed: `Utils.isValid()`
- removed: `Utils.isNullOrEmpty()`
- removed: `controller.global` property by Guy Fraser (a problem with referrencing)
- removed: `controller.<span class="apidocCodeKeywordSpan">database</span>()`, use `F.database()`
- removed: `controller.functions()`
- removed: `controller.models()`

- improved: Controller initialization by Guy Fraser
- improved: SMTP sender
- improved: redirecting
- improved: Array.orderBy(), added quicksort algorithm
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.decrypt" id="apidoc.element.total.js.decrypt">
        function <span class="apidocSignatureSpan">total.js.</span>decrypt
        <span class="apidocSignatureSpan">(value, key, jsonConvert)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">decrypt = function (value, key, jsonConvert) {

	if (typeof(key) === 'boolean') {
		var tmp = jsonConvert;
		jsonConvert = key;
		key = tmp;
	}

	if (typeof(jsonConvert) !== 'boolean')
		jsonConvert = true;

	var response = (value || '').decrypt(F.config.secret + '=' + key);
	if (!response)
		return null;

	if (jsonConvert) {
		if (response.isJSON()) {
			try {
				return JSON.parse(response);
			} catch (ex) {}
		}
		return null;
	}

	return response;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- removed: framework.run()

- fixed: LOG()
- fixed: view engine rendering (fixed problem with undefined and null values)
- fixed: buffer exceeded if a framework receives a data
- fixed: if path starts '/' then is view loaded directly from /views/ directory
- fixed: xml parser
- fixed: problem with parsing a bad JSON datas - framework.<span class="apidocCodeKeywordSpan">decrypt</span>();
- fixed: String.prototype.parseDate()
- fixed: path in framework.resize()
- fixed: framework.responseImageWithoutCache()
- fixed: appending .js or .css through @{head()}
- fixed: WebSocket authorization
- fixed: WebSocketClient.req
- fixed: routing (+ asterix routing)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.download" id="apidoc.element.total.js.download">
        function <span class="apidocSignatureSpan">total.js.</span>download
        <span class="apidocSignatureSpan">(url, filename, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">download = function (url, filename, callback) {

	url = framework_internal.preparePath(url);
	if (!url.match(/^http:|https:/gi)) {
		if (url[0] !== '/')
			url = '/' + url;
		url = 'http://' + (F.ip === 'auto' ? '0.0.0.0' : F.ip) + ':' + F.port + url;
	}

	U.download(url, FLAGS_INSTALL, function(err, response) {

		if (err) {
			callback &amp;&amp; callback(err);
			callback = null;
			return;
		}

		var stream = Fs.createWriteStream(filename);
		response.pipe(stream);

		response.on('error', function(err) {
			callback &amp;&amp; callback(err);
			callback = null;
		});

		CLEANUP(stream, function() {
			DESTROY(stream);
			callback &amp;&amp; callback(null, filename);
			callback = null;
		});
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			case 3:
				flags.push('xml');
				break;
		}
		self.$flags = flags;
	}

	return U.<span class="apidocCodeKeywordSpan">download</span>(self.$url, flags, self.$data, callback, self.$cookies, self.$headers
, undefined, self.$timeout);
};

RESTBuilder.prototype.exec = function(callback) {

	if (!callback)
		callback = NOOP;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.emit" id="apidoc.element.total.js.emit">
        function <span class="apidocSignatureSpan">total.js.</span>emit
        <span class="apidocSignatureSpan">(name, a, b, c, d, e, f, g)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">emit = function (name, a, b, c, d, e, f, g) {
	var evt = F.$events[name];
	if (evt) {
		var clean = false;
		for (var i = 0, length = evt.length; i &lt; length; i++) {
			if (evt[i].$once)
				clean = true;
			evt[i].call(F, a, b, c, d, e, f, g);
		}
		if (clean) {
			evt = evt.remove(n =&gt; n.$once);
			if (evt.length)
				F.$events[name] = evt;
			else
				F.$events[name] = undefined;
		}
	}
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...




======= 2.5.0

- added: a missing property for WebSocket controller `controller.mobile`
- added: `EMIT()` alias for `F.<span class="apidocCodeKeywordSpan">emit</span>()`
- added: `ON()` alias for `F.on()`
- added: `OFF()` alias for `F.removeListener(eventName, listener)` or `F.removeAllListeners([eventName])`
- added: `controller.components()` adds script/css tag into the head
- added: `@{components([group], [settings])}` renders all components together from selected group
- added: a new alias `WAIT()` alias for `U.wait()`
- added: `res.status(code)` for express middleware
- added: `F.clearSchedule(id)` for removing existing schedules
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.encrypt" id="apidoc.element.total.js.encrypt">
        function <span class="apidocSignatureSpan">total.js.</span>encrypt
        <span class="apidocSignatureSpan">(value, key, isUnique)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">encrypt = function (value, key, isUnique) {

	if (value === undefined)
		return '';

	var type = typeof(value);

	if (typeof(key) === 'boolean') {
		var tmp = isUnique;
		isUnique = key;
		key = tmp;
	}

	if (type === 'function')
		value = value();
	else if (type === 'number')
		value = value.toString();
	else if (type === 'object')
		value = JSON.stringify(value);

	return value.encrypt(F.config.secret + '=' + key, isUnique);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if (type === 'function')
		value = value();
	else if (type === 'number')
		value = value.toString();
	else if (type === 'object')
		value = JSON.stringify(value);

	return value.<span class="apidocCodeKeywordSpan">encrypt</span>(F.config.secret + '=' + key, isUnique);
};

/**
* Cryptography (decrypt)
* @param {String} value
* @param {String} key Decrypt key.
* @param {Boolean} jsonConvert Optional, default true.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.error" id="apidoc.element.total.js.error">
        function <span class="apidocSignatureSpan">total.js.</span>error
        <span class="apidocSignatureSpan">(err, name, uri)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">error = function (err, name, uri) {

	if (!arguments.length) {
		return function(err) {
			err &amp;&amp; F.error(err, name, uri);
		};
	}

	if (!err)
		return F;

	if (F.errors) {
		F.datetime = new Date();
		F.errors.push({ error: err.stack, name: name, url: uri ? typeof(uri) === 'string' ? uri : Parser.format(uri) : undefined, date
: F.datetime });
		F.errors.length &gt; 50 &amp;&amp; F.errors.shift();
	}

	if (!name &amp;&amp; !uri &amp;&amp; err.stack) {
		var defer = err.stack.match(/\/\w+\/defer\-.*?\.js/);
		if (defer)
			err.stack = err.stack.replace(defer, defer.toString()).replace(/\/\w+\/defer\-/, '/').split('$').join('/');
	}

	F.onError(err, name, uri);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	for (var i = 0, length = self.dependencies.length; i &lt; length; i++) {
		var key = self.dependencies[i];
		var schema = self.schema[key];
		var s = self.parent.collection[schema.raw];

		if (!s) {
			F.<span class="apidocCodeKeywordSpan">error</span>(new Error('Schema "' + schema.raw + '" not found (
validation).'));
			continue;
		}

		if (!schema.isArray) {
			(model[key] != null || schema.required) &amp;&amp; s.validate(model[key], resourcePrefix, resourceName, builder, filter, path
 + key, j);
			continue;
		}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.eval" id="apidoc.element.total.js.eval">
        function <span class="apidocSignatureSpan">total.js.</span>eval
        <span class="apidocSignatureSpan">(script)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eval = function (script) {
	return F.install('eval', script);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `F.cache.fn(name, fnCache, fnCallback(value, isFromCache))` - added argument `isFromCache`
- updated: `F.use(name, url, types, [first])` - `first` (default: `false`) argument adds a new middleware to the beginning of a
route middleware
- updated: `String.toSearch()` - removes duplicates characters + better performance
- updated: `String.decode()` - improves decoding by Tom Spaccialbelli &lt;https://github.com/harry-stot&gt;

- fixed: (critical) NoSQL views
- fixed: (critical) view compilation in release mode (problem with just-in-time rendering)
- fixed: (critical) `F.<span class="apidocCodeKeywordSpan">eval</span>()`
- fixed: (critical) parsing Date instance as Date instance in SchemaBuilder
- fixed: `F.resize()` additional path `~`
- fixed: `controller.memorize()` threw a timeout when the action contains some error in the memorize scope
- fixed: `F.sitemap()` fixed problem with `me` argument
- fixed: SchemaBuilderEntity preparing and validation
- fixed: QuickSort algorithm (problem with dates)
- fixed: `TRY()` scope
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.exists" id="apidoc.element.total.js.exists">
        function <span class="apidocSignatureSpan">total.js.</span>exists
        <span class="apidocSignatureSpan">(req, res, max, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exists = function (req, res, max, callback) {

	if (typeof(max) === 'function') {
		callback = max;
		max = 10;
	}

	var name = req.$key = createTemporaryKey(req);
	var filename = F.path.temp(name);
	var httpcachevalid = false;

	RELEASE &amp;&amp; (req.headers['if-none-match'] === ETAG + F.config['etag-version']) &amp;&amp; (httpcachevalid = true);

	if (F.isProcessed(name) || httpcachevalid) {
		res.options.filename = filename;
		res.$file();
		return F;
	}

	U.queue('F.exists', max, function(next) {
		fsFileExists(filename, function(e) {
			if (e) {
				res.options.filename = filename;
				res.options.callback = next;
				res.$file();
			} else
				callback(next, filename, req, res);
		});
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `setTimeout2(name, fn(param), timeout, [limit], [param])` added a new argument `limit` and `param`
- updated: `F.script()` --&gt; `now` argument (in the script body) is function `now()` which it still returns `new Date()`
- updated: `F.script(body, value, callback(err, response, param), [param])` --&gt; `param` argument is a helper
- updated: middleware `next(false)` cancels calling of next middleware and controller
- updated: `OPERATION(name, value, [callback(err, response, param)], [param])` added a new (helper) argument `param`
- updated: Mail error handling (added Message instance)
- updated: `U.request()` add a new flag `noredirect`
- updated: `F.<span class="apidocCodeKeywordSpan">exists</span>(req, res, [max], callback(next, filename, req, res))` added a new
 arguments into the callback `req` and `res`
- updated: `F.memorize()` uses `themeName` as a part of the cache key
- updated: `debug.js` (missing `startup` directory)

- renamed: configuration `mail.address.from` for `mail-address-form`
- renamed: configuration `mail.address.reply` for `mail-address-reply`
- renamed: configuration `mail.address.copy` for `mail-address-copy`
- renamed: configuration `mail.smtp` for `mail-smtp`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.file" id="apidoc.element.total.js.file">
        function <span class="apidocSignatureSpan">total.js.</span>file
        <span class="apidocSignatureSpan">(fnValidation, fnExecute, flags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">file = function (fnValidation, fnExecute, flags) {

	var a;

	if (fnValidation instanceof Array) {
		a = fnExecute;
		var b = flags;
		flags = fnValidation;
		fnValidation = a;
		fnExecute = b;
	} else if (fnExecute instanceof Array) {
		a = fnExecute;
		fnExecute = flags;
		flags = a;
	}

	if (!fnExecute &amp;&amp; fnValidation) {
		fnExecute = fnValidation;
		fnValidation = undefined;
	}

	var extensions;
	var middleware;
	var options;
	var url;
	var wildcard = false;
	var fixedfile = false;
	var id = null;
	var urlraw = fnValidation;

	if (_flags) {
		!flags &amp;&amp; (flags = []);
		_flags.forEach(function(flag) {
			flags.indexOf(flag) === -1 &amp;&amp; flags.push(flag);
		});
	}

	if (flags) {
		for (var i = 0, length = flags.length; i &lt; length; i++) {
			var flag = flags[i];

			if (typeof(flag) === 'object') {
				options = flag;
				continue;
			}

			if (flag.substring(0, 3) === 'id:') {
				id = flag.substring(3).trim();
				continue;
			}

			if (flag[0] === '#') {
				!middleware &amp;&amp; (middleware = []);
				middleware.push(flag.substring(1));
			}

			if (flag[0] === '.') {
				flag = flag.substring(1).toLowerCase();
				!extensions &amp;&amp; (extensions = {});
				extensions[flag] = true;
			}
		}
	}

	if (typeof(fnValidation) === 'string') {

		if (fnValidation === '/')
			fnValidation = '';

		url = fnValidation ? framework_internal.routeSplitCreate(fnValidation) : EMPTYARRAY;
		fnValidation = undefined;
		a = url.last();
		if (a === '*.*') {
			wildcard = true;
			url.splice(url.length - 1, 1);
		} else if (a) {
			var index = a.indexOf('*.');
			if (index !== -1) {
				extensions = {};
				extensions[a.substring(index + 2).trim()] = true;
				wildcard = false;
				url.splice(url.length - 1, 1);
			} else if (a === '*') {
				wildcard = true;
				url.splice(url.length - 1, 1);
			} else if (U.getExtension(a)) {
				fixedfile = true;
				wildcard = false;
			}
		}
	} else if (!extensions &amp;&amp; !fnValidation)
		fnValidation = fnExecute;

	var instance = new FrameworkRoute();
	var r = instance.route;
	r.id = id;
	r.urlraw = urlraw;
	r.controller = _controller ? _controller : 'unknown';
	r.owner = _owner;
	r.url = url;
	r.fixedfile = fixedfile;
	r.wildcard = wildcard;
	r.extensions = extensions;
	r.onValidate = fnValidation;
	r.execute = fnExecute;
	r.middleware = middleware;
	r.options = options;
	r.type = 'file';

	F.routes.files.push(r);
	F.routes.files.sort((a, b) =&gt; !a.url ? -1 : !b.url ? 1 : a.url.length &gt; b.url.length ? -1 : 1);
	F.emit('route', 'file', r);
	F._length_files++;
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `res.image_nocache()` alternative to `F.responseImageWithoutCache`
- added: `req.localize()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.useSMTP(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.http('debug/release/test', { debug: true })` can start a mini debugger
- updated: `F.route()`, `F.websocket()` and `F.<span class="apidocCodeKeywordSpan">file</span>()` --&gt; now returns `FrameworkRoute
` instance instead of `Framework` instance (more in docs)
- updated: `F.load(debug, [types], [path])` supports a new type `service` which enables `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.findConnection" id="apidoc.element.total.js.findConnection">
        function <span class="apidocSignatureSpan">total.js.</span>findConnection
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findConnection = function (path) {
	var arr = Object.keys(F.connections);
	var is = U.isRegExp(path);
	for (var i = 0, length = arr.length; i &lt; length; i++) {
		var key = arr[i];
		if (is) {
			if (path.test(key))
				return F.connections[key];
		} else {
			if (key.indexOf(path) !== -1)
				return F.connections[key];
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: new `F.route()` flag `binary` (works only with `raw` flag)
- added: `U.ls2()` --&gt; returns additional information about files (stat Object);
- added: `Pagination` is a global variable
- added: `SchemaBuilder.workflow2(name, options, callback)` skips preparing and validation
- added: `SchemaBuilder.transform2(name, options, callback)` skips preparing and validation
- added: `SchemaBuilder.operation2(name, options, callback)` skips preparing and validation
- added: `ErrorBuilder.exception(message)` - adds a new exception message
- added: `F.<span class="apidocCodeKeywordSpan">findConnection</span>()` finds a websocket connection
- added: `F.findConnections()` finds websocket connections

- updated: (IMPORTANT) Array.async([NEW: threadCount (Number)], [callback]) supports `threads`
- updated: (IMPORTANT) Array.wait(onItem(item, index), [callback], [threadCount]) supports `threads`
- updated: (IMPORTANT) U.streamer(beg, [end], callback) --&gt; supports "end" delimiter
- updated: Date.format(format, [resource_name]) supports name of months via `MMM` (short) and `MMMM` (full)
- updated: Resources support months e.g. `January     : Janur`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.findConnections" id="apidoc.element.total.js.findConnections">
        function <span class="apidocSignatureSpan">total.js.</span>findConnections
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">findConnections = function (path) {
	var arr = Object.keys(F.connections);
	var is = U.isRegExp(path);
	var output = [];
	for (var i = 0, length = arr.length; i &lt; length; i++) {
		var key = arr[i];
		if (!path)
			output.push(F.connections[key]);
		else if (is)
			path.test(key) &amp;&amp; output.push(F.connections[key]);
		else
			key.indexOf(path) !== -1 &amp;&amp; output.push(F.connections[key]);
	}
	return output;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- updated: new error message `The field "@" is invalid.`
- updated: `NOSQL().insert(doc, [unique])`
- updated: `quicksort` algorithm has been replaced for `shellsort` (increased performance of sorting about 10-15%)
- updated: `NOSQL().counter.monthly(true, ...)` shows all stats by ID
- updated: `NOSQL().counter.yearly(true, ...)` shows all stats by ID
- updated: `dependencies` supports up-to-date features e.g. `module (1 day)   : https://......js`
- updated: `F.<span class="apidocCodeKeywordSpan">findConnections</span>([path])` a `path` argument is optional
- updated: `U.streamer(beg, [end], function, [skip])` add a new argument `skip`
- updated: deprecated methods in Node.js v7
- updated: `String.parseJSON([date])` added `date` argument (date fields will be converted to `datetime`)
- updated: `F.script()` can compile code to function e.g.: `F.script('next(a + b)')` returns a compiled function
- updated: `String.captialize([onlyFirst])` add a new argument `onlyFirst`
- updated: `F.onParseQuery(value, req)` add a new argument `req`
- updated: `F.onParseXML(value, req)` add a new argument `req`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.group" id="apidoc.element.total.js.group">
        function <span class="apidocSignatureSpan">total.js.</span>group
        <span class="apidocSignatureSpan">(flags, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">group = function (flags, fn) {
	_flags = flags;
	fn.call(this);
	_flags = undefined;
	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: NoSQL supports counter for e.g. views or downloads, etc., more in documentation
- added: new routing mechanism `F.mmr(url, action)` for streaming `multipart/x-mixed-replace` types (client--&gt;server)
- added: `controller.mmr(filename, [stream], callback)` for streaming `multipart/x-mixed-replace` (server--&gt;client)
- added: `setTimeout2(key, fn, timeout)` resets old and creates a new `setTimeout` according to the `key`
- added: `clearTimeou2(key)` resets existing timeout
- added: `dnscache` into the `controller.pipe()` and `F.responsePipe()`
- added: `CREATE([group], name)` the methods create an empty object according to the schema
- added: `F.<span class="apidocCodeKeywordSpan">group</span>(flags, fn)` for extending routes (web, websocket, file) flags
- added: `Number.prototype.filesize([decimals], [type])` formatting file sizes
- added: `binary` importing CSV `-csv`
- added: `controller.autodestroy([callback])` only for websocket

- updated: `framework.view()`, `controller.view()` and `@{view()}` supports `=theme/viewname`
- updated: sitemap routing supports localization
- updated: `F.cache.fn(name, fnCache, fnCallback(value, isFromCache))` - added argument `isFromCache`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.hash" id="apidoc.element.total.js.hash">
        function <span class="apidocSignatureSpan">total.js.</span>hash
        <span class="apidocSignatureSpan">(type, value, salt)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hash = function (type, value, salt) {
	var hash = Crypto.createHash(type);
	var plus = '';

	if (typeof(salt) === 'string')
		plus = salt;
	else if (salt !== false)
		plus = (F.config.secret || '');

	hash.update(value.toString() + plus, ENCODING);
	return hash.digest('hex');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				flags.push('xml');
				break;
		}
		self.$flags = flags;
	}

	if (self.$cache_expire &amp;&amp; !self.$nocache) {
		key = '$rest_' + (self.$url + flags.join(',') + (self.$data ? Qs.stringify(self.$data) : '')).<span class="apidocCodeKeywordSpan">hash</span>();
		var data = F.cache.read2(key);
		if (data) {
			var evt = new framework_utils.EventEmitter2();
			process.nextTick(exec_removelisteners, evt);
			callback(null, self.maketransform(this.$schema ? this.$schema.make(data.json) : data.json, data), data);
			return evt;
		}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.http" id="apidoc.element.total.js.http">
        function <span class="apidocSignatureSpan">total.js.</span>http
        <span class="apidocSignatureSpan">(mode, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">http = function (mode, options) {
	F.consoledebug('begin');
	options == null &amp;&amp; (options = {});
	!options.port &amp;&amp; (options.port = +process.argv[2]);
	return F.mode(require('http'), mode, options);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.config['allow-debug']` starts a mini debugger
- added: `res.image_nocache()` alternative to `F.responseImageWithoutCache`
- added: `req.localize()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.useSMTP(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.<span class="apidocCodeKeywordSpan">http</span>('debug/release/test', { debug: true })` can start a mini
 debugger
- updated: `F.route()`, `F.websocket()` and `F.file()` --&gt; now returns `FrameworkRoute` instance instead of `Framework` instance
 (more in docs)
- updated: `F.load(debug, [types], [path])` supports a new type `service` which enables `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.https" id="apidoc.element.total.js.https">
        function <span class="apidocSignatureSpan">total.js.</span>https
        <span class="apidocSignatureSpan">(mode, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">https = function (mode, options) {
	F.consoledebug('begin');
	return F.mode(require('https'), mode, options || {});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

======= 1.7.1 (HOTFIX)

This version will work on `io.js` without problems.

- added: framework.schedule(date/string/number, fn);
- added: (IMPORTANT) a prevention for the HeaderSent exception
- added: new option `sleep` for framework.http() &amp; framework.<span class="apidocCodeKeywordSpan">https</span>()
- added: request.ip caching
- added: framework.useConfig(filename-configuration)

- updated: String.toSearch() removes non-word characters
- updated: Utils.trim() supports arrays

- fixed: framework.versionNode (updated for io.js)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.include" id="apidoc.element.total.js.include">
        function <span class="apidocSignatureSpan">total.js.</span>include
        <span class="apidocSignatureSpan">(name, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">include = function (name, options, callback) {
	return F.source(name, options, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.initialize" id="apidoc.element.total.js.initialize">
        function <span class="apidocSignatureSpan">total.js.</span>initialize
        <span class="apidocSignatureSpan">(http, debug, options, restart)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">initialize = function (http, debug, options, restart) {

	if (!options)
		options = {};

	var port = options.port;
	var ip = options.ip;

	if (options.config)
		U.copy(options.config, F.config);

	if (options.debug || options['allow-debug'])
		F.config['allow-debug'] = true;

	F.isHTTPS = typeof(http.STATUS_CODES) === 'undefined';
	if (isNaN(port) &amp;&amp; typeof(port) !== 'string')
		port = null;

	F.config.debug = debug;
	F.isDebug = debug;

	global.DEBUG = debug;
	global.RELEASE = !debug;
	global.I = global.isomorphic = F.isomorphic;

	F.$configure_configs();
	F.$configure_versions();
	F.$configure_workflows();
	F.$cofnigure_sitemap();
	F.isTest &amp;&amp; F.$configure_configs('config-test', false);
	F.cache.init();
	F.consoledebug('init');
	F.emit('init');

	if (!port) {
		if (F.config['default-port'] === 'auto') {
			var envPort = +(process.env.PORT || '');
			if (!isNaN(envPort))
				port = envPort;
		} else
			port = F.config['default-port'];
	}

	F.port = port || 8000;

	if (ip !== null) {
		F.ip = ip || F.config['default-ip'] || '127.0.0.1';
		if (F.ip === 'null' || F.ip === 'undefined' || F.ip === 'auto')
			F.ip = undefined;
	} else
		F.ip = undefined;

	if (F.ip == null)
		F.ip = 'auto';

	if (F.server) {
		F.server.removeAllListeners();

		Object.keys(F.connections).forEach(function(key) {
			var item = F.connections[key];
			if (item) {
				item.removeAllListeners();
				item.close();
			}
		});

		F.server.close();
	}

	if (options.https)
		F.server = http.createServer(options.https, F.listener);
	else
		F.server = http.createServer(F.listener);

	F.config['allow-performance'] &amp;&amp; F.server.on('connection', connection_tunning);
	F.config['allow-websocket'] &amp;&amp; F.server.on('upgrade', F._upgrade);

	F.consoledebug('HTTP listening');
	F.server.listen(F.port, F.ip === 'auto' ? undefined : F.ip);

	// clears static files
	F.consoledebug('clear temporary');
	F.clear(function() {
		F.consoledebug('clear temporary (done)');
		F.$load(undefined, directory, function() {

			F.isLoaded = true;

			if (F.config['allow-debug']) {
				F.consoledebug('done');
				F.usagesnapshot();
			}

			if (!process.connected || restart)
				F.console();

			setTimeout(function() {
				try {
					F.emit('load', F);
					F.emit('ready', F);
				} catch (err) {
					F.error(err, 'F.on("load/ready")');
				}

				F.removeAllListeners('load');
				F.removeAllListeners('ready');
				options.package &amp;&amp; INSTALL('package', options.package);
			}, 500);

			if (F.isTest) {
				var sleep = options.sleep || options.delay || 1000;
				global.TEST = true;
				global.assert = require('assert');
				setTimeout(() =&gt; F.test(true, options.tests || options.test), sleep);
				return F;
			}

			setTimeout(function() {
				if (F.isTest)
					return;
				delete F.tests;
				delete F.test;
				delete F.testing;
				delete F.assert;
			}, 5000);
		});
	}, true);

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	else
		F.temporary.init = { name: name, isHTTPS: typeof(http.STATUS_CODES) === 'undefined', options: options };

	F.config.trace = debug;
	F.consoledebug('startup');
	F.$startup(function() {
		F.consoledebug('startup (done)');
		F.<span class="apidocCodeKeywordSpan">initialize</span>(http, debug, options, restart);
	});
	return F;
};

F.console = function() {
	console.log('====================================================');
	console.log('PID         : ' + process.pid);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.install" id="apidoc.element.total.js.install">
        function <span class="apidocSignatureSpan">total.js.</span>install
        <span class="apidocSignatureSpan">(type, name, declaration, options, callback, internal, useRequired, skipEmit, uptodateName, next, packageName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">install = function (type, name, declaration, options, callback, internal, useRequired, skipEmit, uptodateName, next, packageName) {

	var obj = null;

	if (type !== 'config' &amp;&amp; type !== 'version' &amp;&amp; typeof(name) === 'string') {
		if (name.startsWith('http://') || name.startsWith('https://')) {
			if (typeof(declaration) === 'object') {
				callback = options;
				options = declaration;
				declaration = name;
				name = '';
			}
		} else if (name[0] === '@') {
			declaration = F.path.package(name.substring(1));
			name = Path.basename(name).replace(/\.js$/i, '');
			if (useRequired === undefined)
				useRequired = true;
		}
	}

	var t = typeof(declaration);
	var key = '';
	var tmp;
	var content;
	var err;

	F.datetime = new Date();

	if (t === 'object') {
		t = typeof(options);
		if (t === 'function')
			callback = options;
		options = declaration;
		declaration = undefined;
	}

	if (declaration === undefined) {
		declaration = name;
		name = '';
	}

	if (typeof(options) === 'function') {
		callback = options;
		options = undefined;
	}

	// Check if declaration is a valid URL address
	if (type !== 'eval' &amp;&amp; typeof(declaration) === 'string') {

		if (declaration.startsWith('http://') || declaration.startsWith('https://')) {
			if (type === 'package') {
				F.consoledebug('download', type, declaration);
				U.download(declaration, FLAGS_INSTALL, function(err, response) {

					if (err) {
						F.error(err, 'F.install(\'{0}\', \'{1}\')'.format(type, declaration), null);
						next &amp;&amp; next();
						callback &amp;&amp; callback(err);
						return;
					}

					var id = Path.basename(declaration, '.package');
					var filename = F.path.temp(id + '.download');
					var stream = Fs.createWriteStream(filename);
					var md5 = Crypto.createHash('md5');

					response.on('data', (buffer) =&gt; md5.update(buffer));
					response.pipe(stream);

					stream.on('finish', function() {
						var hash = md5.digest('hex');

						if (F.temporary.versions[declaration] === hash) {
							next &amp;&amp; next();
							callback &amp;&amp; callback(null, uptodateName || name, true);
							return;
						}

						F.temporary.versions[declaration] = hash;
						F.install(type, id, filename, options, callback, undefined, undefined, true, uptodateName, next);
					});
				});
				return F;
			}

			F.consoledebug('download', type, declaration);
			U.request(declaration, FLAGS_INSTALL, function(err, data, code) {

				if (code !== 200 &amp;&amp; !err)
					err = new Error(data);

				if (err) {
					F.error(err, 'F.install(\'{0}\', \'{1}\')'.format(type, declaration), null);
					next &amp;&amp; next();
					callback &amp;&amp; callback(err);
				} else {

					var hash = data.hash('md5');

					if (F.temporary.versions[declaration] === hash) {
						next &amp;&amp; next();
						callback &amp;&amp; callback(null, uptodateName || name, true);
						return;
					}

					F.temporary.versions[declaration] = hash;
					F.install(type, name, data, options, callback, declaration, undefined, undefined, uptodateName, next);
				}

			});
			return F;
		} else {
			if (declaration[0] === '~')
				declaration = declaration.substring(1);
			if (type !== 'config' &amp;&amp; type !== 'resource' &amp;&amp; type !== 'package' &amp;&amp; type !== 'component' &amp;&amp; !REG_SCRIPTCONTENT.test(declaration
)) {
				if (!existsSync(declaration))
					throw new Error('The ' + type + ': ' + declaration + ' doesn\'t exist.');
				useRequired = true;
			}
		}
	}

	if (type === 'middleware') {

		F.routes.middleware[name] = typeof(declaration) === 'function' ? declaration : eval(parseDefer(declaration));
		F._length_middleware = Object.keys(F.routes.middleware).length;

		next &amp;&amp; next();
		callback &amp;&amp; callback(null, name);

		key = type + '.' + name;

		if (F.dependencies[key]) {
			F.dependencies[key].updated = F.datetime;
		} else {
			F.dependencies[key] = { name: name, type: type, installed: F.datetime, updated: null, count: 0 };
			if (internal)
				F.dependencies[key].url = internal;
		}

		F.dependencies[key].count++;

		setTimeout(function() {
			F.emit(type + '#' + name);
			F.emit('install', type, name);
			F.temporary.ready[type + '#' + name] = F.datetime;
		}, 500); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: (IMPORTANT) a route with schema binding can contain filter e.g. `*Schema#update` or `*Group/Schema#create` --&gt; the
 framework validates only fields by filter
- added: TRANSFORM([transform], obj)
- added: NEWTRANSFORM(name, fn, [isDefault]) --&gt; alias for TransformBuilder.addTransform()
- added: packages can be stored as directories (recommended for debug mode only)
- added: F.localize(name, url, [middleware], [options], [minify]) --&gt; minify argument
- added: email supports calendar (.ics) request sending
- added: SchemaBuilderEntity.make(function(schema))
- added: F.<span class="apidocCodeKeywordSpan">install</span>() supports packages mapping
- added: Support for unicode routing
- added: Packages can be loaded in framework structure (/controllers/, /modules/) `exports.booting = true`
- added: route flags can contains object --&gt; the object is an additional options for middleware
- added: Utils.btoa(str) --&gt; returns base64
- added: Utils.atob(str) --&gt; returns binary
- added: global.TRY(fnScope, [fnError]) --&gt; creates safe scope (more in documentation)
- added: Utils.getExtension(filename)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.install_make" id="apidoc.element.total.js.install_make">
        function <span class="apidocSignatureSpan">total.js.</span>install_make
        <span class="apidocSignatureSpan">(key, name, obj, options, callback, skipEmit, type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">install_make = function (key, name, obj, options, callback, skipEmit, type) {

	var me = F.dependencies[key];
	var routeID = me._id;
	var type = me.type;

	F.temporary.internal[me._id] = name;
	_controller = routeID;
	_owner = type + '#' + name.replace(/\.package$/gi, '');

	typeof(obj.install) === 'function' &amp;&amp; obj.install(options || F.config[_owner], name);
	me.processed = true;

	var id = (type === 'module' ? '#' : '') + name;
	var length = F.routes.web.length;
	for (var i = 0; i &lt; length; i++) {
		if (F.routes.web[i].controller === routeID)
			F.routes.web[i].controller = id;
	}

	length = F.routes.websockets.length;
	for (var i = 0; i &lt; length; i++) {
		if (F.routes.websockets[i].controller === routeID)
			F.routes.websockets[i].controller = id;
	}

	length = F.routes.files.length;
	for (var i = 0; i &lt; length; i++) {
		if (F.routes.files[i].controller === routeID)
			F.routes.files[i].controller = id;
	}

	F.$routesSort();
	_controller = '';
	name = name.replace(/\.package$/gi, '');

	if (!skipEmit) {
		setTimeout(function() {
			F.emit(type + '#' + name, obj);
			F.emit('install', type, name, obj);
			F.temporary.ready[type + '#' + name] = F.datetime;
		}, 500);
	}

	F.consoledebug('install', type + '#' + name);
	callback &amp;&amp; callback(null, name);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					F.temporary.dependencies[key] = { obj: obj, options: options, callback: callback, skipEmit: skipEmit };
					next &amp;&amp; next();
					return F;
				}
			}
		}

		F.<span class="apidocCodeKeywordSpan">install_make</span>(key, name, obj, options, callback, skipEmit, type);

		if (type === 'module')
			F.modules[name] = obj;
		else
			F.controllers[name] = obj;

		F.install_prepare();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.install_prepare" id="apidoc.element.total.js.install_prepare">
        function <span class="apidocSignatureSpan">total.js.</span>install_prepare
        <span class="apidocSignatureSpan">(noRecursive)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">install_prepare = function (noRecursive) {

	var keys = Object.keys(F.temporary.dependencies);

	if (!keys.length)
		return;

	// check dependencies
	for (var i = 0, length = keys.length; i &lt; length; i++) {

		var k = keys[i];
		var a = F.temporary.dependencies[k];
		var b = F.dependencies[k];
		var skip = false;

		if (b.processed)
			continue;

		for (var j = 0, jl = b.dependencies.length; j &lt; jl; j++) {
			var d = F.dependencies['module.' + b.dependencies[j]];
			if (!d || !d.processed) {
				skip = true;
				break;
			}
		}

		if (skip)
			continue;

		delete F.temporary.dependencies[k];

		if (b.type === 'module')
			F.modules[b.name] = a.obj;
		else
			F.controllers[b.name] = a.obj;

		F.install_make(k, b.name, a.obj, a.options, a.callback, a.skipEmit, b.type);
	}

	keys = Object.keys(F.temporary.dependencies);

	clearTimeout(F.temporary.other.dependencies);
	F.temporary.other.dependencies = setTimeout(function() {
		var keys = Object.keys(F.temporary.dependencies);
		if (keys.length)
			throw new Error('Dependency exception (module): missing dependencies for: ' + keys.join(', ').trim());
		delete F.temporary.other.dependencies;
	}, 1500);

	if (!keys.length || noRecursive)
		return F;

	F.install_prepare(true);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		F.install_make(key, name, obj, options, callback, skipEmit, type);

		if (type === 'module')
			F.modules[name] = obj;
		else
			F.controllers[name] = obj;

		F.<span class="apidocCodeKeywordSpan">install_prepare</span>();
		next &amp;&amp; next();
	}

	return F;
};

F.restart = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.isProcessed" id="apidoc.element.total.js.isProcessed">
        function <span class="apidocSignatureSpan">total.js.</span>isProcessed
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isProcessed = function (filename) {

	if (filename.url) {
		var name = filename.url;
		var index = name.indexOf('?');
		if (index !== -1)
			name = name.substring(0, index);
		filename = F.path.public($decodeURIComponent(name));
	}

	return !F.temporary.notfound[filename] &amp;&amp; F.temporary.path[filename] !== undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- updated: config['default-websocket-encodedecode'] - default: true
- updated: @{options(array/object)} - supports Object
- updated: utils.request(url, flags, [data], callback, cookies, headers, encoding, timeout)
- updated: utils.download(url, flags, [data], callback, cookies, headers, encoding, timeout)
- updated: framework.eval(string/url/function) - this function supports eval code from another URL
- updated: assertion testing (new features)
- updated: framework.<span class="apidocCodeKeywordSpan">isProcessed</span>(filename or request)
- updated: framework.isProcessing(filename or request)
- updated: binary (some changes and improvements)
- updated: template engine
- updated: ErrorBuidler.toString([delimiter])

- renamed: ErrorBuilder.length -&gt; ErrorBuilder.count
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.isProcessing" id="apidoc.element.total.js.isProcessing">
        function <span class="apidocSignatureSpan">total.js.</span>isProcessing
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isProcessing = function (filename) {

	if (!filename.url)
		return F.temporary.processing[filename] ? true : false;

	var name = filename.url;
	var index = name.indexOf('?');

	if (index !== -1)
		name = name.substring(0, index);

	filename = U.combine(F.config['directory-public'], $decodeURIComponent(name));
	return F.temporary.processing[filename] ? true : false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: config['default-websocket-encodedecode'] - default: true
- updated: @{options(array/object)} - supports Object
- updated: utils.request(url, flags, [data], callback, cookies, headers, encoding, timeout)
- updated: utils.download(url, flags, [data], callback, cookies, headers, encoding, timeout)
- updated: framework.eval(string/url/function) - this function supports eval code from another URL
- updated: assertion testing (new features)
- updated: framework.isProcessed(filename or request)
- updated: framework.<span class="apidocCodeKeywordSpan">isProcessing</span>(filename or request)
- updated: binary (some changes and improvements)
- updated: template engine
- updated: ErrorBuidler.toString([delimiter])

- renamed: ErrorBuilder.length -&gt; ErrorBuilder.count

- fixed: framework.isProcessed()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.isSuccess" id="apidoc.element.total.js.isSuccess">
        function <span class="apidocSignatureSpan">total.js.</span>isSuccess
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isSuccess = function (obj) {
	return obj === SUCCESSHELPER;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
SchemaBuilderEntity.prototype.clean = function(m) {
	return clone(m);
};

// For async operations, because SUCCESS() returns singleton instance everytime
function copy(obj) {
	return F.<span class="apidocCodeKeywordSpan">isSuccess</span>(obj) ? { success: obj.success, value: obj.value } : obj;
}

function clone(obj) {

	if (!obj)
		return obj;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.kill" id="apidoc.element.total.js.kill">
        function <span class="apidocSignatureSpan">total.js.</span>kill
        <span class="apidocSignatureSpan">(signal)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">kill = function (signal) {

	for (var m in F.workers) {
		var worker = F.workers[m];
		TRY(() =&gt; worker &amp;&amp; worker.kill &amp;&amp; worker.kill(signal || 'SIGTERM'));
	}

	F.emit('exit', signal);

	if (!F.isWorker &amp;&amp; typeof(process.send) === 'function')
		TRY(() =&gt; process.send('stop'));

	F.cache.stop();
	F.server &amp;&amp; F.server.close();

	setTimeout(() =&gt; process.exit(signal || 'SIGTERM'), TEST ? 2000 : 100);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: NoSQL `DatabaseBuilder.year(field, [operator], value)` filters `Date` fields according its year number
- added: NoSQL `DatabaseBuilder.day(field, [operator], value)` filters `Date` fields according its day number
- added: NoSQL events (documents): `insert`, `update`, `modify` and `remove`
- added: NoSQL events (binary): `insert`, `remove` and `clear`
- added: NoSQL events (counter): `hit`, `remove` and `clear`
- added: a new alias `NOBIN(dbName)` witch it returns `NOSQL(dbName).binary` (a binary instance)
- added: a new alias `NOCOUNTER(dbName)` witch it returns `NOSQL(dbName).counter` (a counter instance)
- added: `F.<span class="apidocCodeKeywordSpan">kill</span>(signal)` for killing an instance of the framework
- added: `I` alias for `isomorphic code on server-side and client-side together by hhhaker6@gmail.com &lt;https://github.com/Creeplays
&gt;
- added: `F.script(body, value, callback(err, value))` evaluates script securly in safe scope (more in documentation)
- added: new alias `SCRIPT()` for `F.script()`
- added: `HttpFile.rename(filename, [callback(err)])` moves file to another directory

- updated: `F.on('exit', function(signal) {})` added a signal code
- updated: SchemaBuilderEntity contains new argument `controller`, e.g. `.setSave(function(error, model, options, callback, controller
) { ..`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.listener" id="apidoc.element.total.js.listener">
        function <span class="apidocSignatureSpan">total.js.</span>listener
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listener = function (req, res) {

	req.options = res.options = {};
	res.req = req;
	req.res = res;

	if (F._length_wait)
		return F.response503(req, res);
	else if (!req.host) // HTTP 1.0 without host
		return res.throw400();

	var headers = req.headers;
	req.$protocol = req.connection.encrypted || headers['x-forwarded-protocol'] === 'https' ? 'https' : 'http';

	req.uri = framework_internal.parseURI(req);

	F.stats.request.request++;
	F.$events.request &amp;&amp; F.emit('request', req, res);

	if (F._request_check_redirect) {
		var redirect = F.routes.redirects[req.$protocol + '://' + req.host];
		if (redirect) {
			F.stats.response.forward++;
			res.options.url = redirect.url + (redirect.path ? req.url : '');
			res.options.permanent = redirect.permanent;
			res.$redirect();
			return;
		}
	}

	req.path = framework_internal.routeSplit(req.uri.pathname);
	req.processing = 0;
	req.isAuthorized = true;
	req.xhr = headers['x-requested-with'] === 'XMLHttpRequest';
	res.success = false;
	req.session = null;
	req.user = null;
	req.isStaticFile = F.config['allow-handle-static-files'] &amp;&amp; U.isStaticFile(req.uri.pathname);

	if (req.isStaticFile)
		req.extension = U.getExtension(req.uri.pathname);
	else if (F.onLocale)
		req.$language = F.onLocale(req, res, req.isStaticFile);

	F.reqstats(true, true);

	if (F._length_request_middleware)
		async_middleware(0, req, res, F.routes.request, requestcontinue_middleware);
	else
		F.$requestcontinue(req, res, headers);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: versions supports auto-mapping
- added: sync2(), e.g. sync2(fn), diff with v1: sync(fn)() and v2: sync2(fn)
- added: "dependencies" file for installing dependencies (modules, packages, etc.)
- added: @{nocompress html}, @{nocompress js}, @{nocompress css}, @{nocompress all}
- added: req.authorize(callback(err, userprofile, isAuthorized))
- added: res.content(code, body, type, [compress]) -&gt; alias for F.responseContent()
- added: F.localize(name, path, [middleware], [options]) - auto translating static files
- added: F.<span class="apidocCodeKeywordSpan">listener</span>(req, res) -&gt; for multiple server listeners
- added: F.restful(url, flags, onQuery, onGet, onSave, onDelete) -&gt; creates routing
- added: F.onSchema(req, group, name, callback(err, body)) -&gt; for custom schemas
- added: @{import(filename1, filename2, filenameN)}
- added: SchemaBuilderEntity.setError(function(error, model, type, name));
- added: F.snapshot(url, filename, [callback]);
- added: CLEANUP(stream, [callback]) - clean up readable streams
- added: configs directory
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.load" id="apidoc.element.total.js.load">
        function <span class="apidocSignatureSpan">total.js.</span>load
        <span class="apidocSignatureSpan">(debug, types, pwd)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">load = function (debug, types, pwd) {

	if (pwd &amp;&amp; pwd[0] === '.' &amp;&amp; pwd.length &lt; 4)
		F.directory = directory = U.$normalize(Path.normalize(directory + '/..'));
	else if (pwd)
		F.directory = directory = U.$normalize(pwd);

	F.isWorker = true;
	F.config.debug = debug;
	F.isDebug = debug;

	global.DEBUG = debug;
	global.RELEASE = !debug;
	global.I = global.isomorphic = F.isomorphic;

	F.consoledebug('startup');
	F.$startup(function() {

		F.consoledebug('startup (done)');
		F.$configure_configs();

		if (!types || types.indexOf('versions') !== -1)
			F.$configure_versions();

		if (!types || types.indexOf('workflows') !== -1)
			F.$configure_workflows();

		if (!types || types.indexOf('sitemap') !== -1)
			F.$cofnigure_sitemap();

		F.consoledebug('init');
		F.cache.init();
		F.emit('init');
		F.isLoaded = true;

		F.$load(types, directory, function() {
			setTimeout(function() {

				try {
					F.emit('load', F);
					F.emit('ready', F);
				} catch (err) {
					F.error(err, 'F.on("load/ready")');
				}

				F.removeAllListeners('load');
				F.removeAllListeners('ready');

				// clear unnecessary items
				delete F.tests;
				delete F.test;
				delete F.testing;
				delete F.assert;
			}, 500);

			if (F.config['allow-debug']) {
				F.consoledebug('done');
				F.usagesnapshot();
			}
		});
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `req.localize()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.useSMTP(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.http('debug/release/test', { debug: true })` can start a mini debugger
- updated: `F.route()`, `F.websocket()` and `F.file()` --&gt; now returns `FrameworkRoute` instance instead of `Framework` instance
 (more in docs)
- updated: `F.<span class="apidocCodeKeywordSpan">load</span>(debug, [types], [path])` supports a new type `service` which enables
 `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
- updated: `F.schedule()` returns an identificator
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.localize" id="apidoc.element.total.js.localize">
        function <span class="apidocSignatureSpan">total.js.</span>localize
        <span class="apidocSignatureSpan">(url, flags, minify)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">localize = function (url, flags, minify) {

	url = url.replace('*', '');

	if (flags === true) {
		flags = [];
		minify = true;
	} else if (!flags)
		flags = [];

	var index;

	if (!minify) {
		index = flags.indexOf('minify');
		index === -1 &amp;&amp; (index = flags.indexOf('compress'));
		minify = index !== -1;
		index !== -1 &amp;&amp; flags.splice(index, 1);
	}

	var index = url.lastIndexOf('.');

	if (index === -1)
		flags.push('.html', '.htm', '.md', '.txt');
	else {
		flags.push(url.substring(index).toLowerCase());
		url = url.substring(0, index);
	}

	url = framework_internal.preparePath(url);
	F.file(url, function(req, res) {

		F.onLocale &amp;&amp; (req.$language = F.onLocale(req, res, req.isStaticFile));

		var key = 'locate_' + (req.$language ? req.$language : 'default') + '_' + req.url;
		var output = F.temporary.other[key];

		if (output) {
			if (!F.$notModified(req, res, output.$mtime)) {
				HEADERS.responseLocalize['Last-Modified'] = output.$mtime;
				res.options.body = output;
				res.options.type = U.getContentType(req.extension);
				res.$text();
			}
			return;
		}

		var name = req.uri.pathname;
		var filename = F.onMapping(name, name, true, true);

		Fs.readFile(filename, function(err, content) {

			if (err)
				return res.throw404();

			content = F.translator(req.$language, framework_internal.modificators(content.toString(ENCODING), filename, 'static'));

			Fs.lstat(filename, function(err, stats) {

				var mtime = stats.mtime.toUTCString();

				if (minify &amp;&amp; (req.extension === 'html' || req.extension === 'htm'))
					content = framework_internal.compile_html(content, filename);

				if (RELEASE) {
					F.temporary.other[key] = U.createBuffer(content);
					F.temporary.other[key].$mtime = mtime;
					if (F.$notModified(req, res, mtime))
						return;
				}

				HEADERS.responseLocalize['Last-Modified'] = mtime;
				res.options.body = content;
				res.options.type = U.getContentType(req.extension);
				res.options.headers = HEADERS.responseLocalize;
				res.$text();
			});
		});

	}, flags);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `RESTBuilder.redirect(true/false)` enables/disables auto-redirect (default: enabled)
- added: new schema aliases (`$QUERY()`, `$GET()`, `$WORKFLOW()`, '$TRANSFORM()' and `$OPERATION()`)
- added: `allow-head` (default: false) adds `head` method into the each route automatically
- added: `F.config['allow-defer']` enables deferring functions with `DEFER` keyword (default: false)
- added: `DEFER` feature
- added: `F.config['allow-debug']` starts a mini debugger
- added: `res.image_nocache()` alternative to `F.responseImageWithoutCache`
- added: `req.<span class="apidocCodeKeywordSpan">localize</span>()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.useSMTP(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.http('debug/release/test', { debug: true })` can start a mini debugger
- updated: `F.route()`, `F.websocket()` and `F.file()` --&gt; now returns `FrameworkRoute` instance instead of `Framework` instance
 (more in docs)
- updated: `F.load(debug, [types], [path])` supports a new type `service` which enables `F.on('service')`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.log" id="apidoc.element.total.js.log">
        function <span class="apidocSignatureSpan">total.js.</span>log
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">log = function () {

	F.datetime = new Date();
	var filename = F.datetime.getFullYear() + '-' + (F.datetime.getMonth() + 1).toString().padLeft(2, '0') + '-' + F.datetime.getDate
().toString().padLeft(2, '0');
	var time = F.datetime.getHours().toString().padLeft(2, '0') + ':' + F.datetime.getMinutes().toString().padLeft(2, '0') + ':' +
F.datetime.getSeconds().toString().padLeft(2, '0');
	var str = '';
	var length = arguments.length;

	for (var i = 0; i &lt; length; i++) {
		var val = arguments[i];
		if (val === undefined)
			val = 'undefined';
		else if (val === null)
			val = 'null';
		else if (typeof(val) === 'object')
			val = Util.inspect(val);
		str += (str ? ' ' : '') + val;
	}

	F.path.verify('logs');
	U.queue('F.log', 5, (next) =&gt; Fs.appendFile(U.combine(F.config['directory-logs'], filename + '.log'), time + ' | ' + str + '\n',
next));
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `U.send(name, stream, url, callback, [cookies], [headers], [method], [timeout])` supports cookies and timeout
- updated: `U.request()` supports a new flag `&lt; 200` (kB), it means that the method stores a content with maxixmum size 200
 kB.
- updated: `ErrorBuilder` instance contains a new property `instance.unexpected` when is `instance.push()` a classic Error'
s instance.
- updated: configuration files + resources support types like String, Number, Array, Date, etc. via `key (type) : value`
- updated: `F.use(name, [url], [types])` - now supports new attributes `url`, and `types`

- fixed: `Websocket.destroy()`
- fixed: Too many open files with `F.<span class="apidocCodeKeywordSpan">log</span>()` and `F.logger()`
- fixed: `String.isJSON()` the problem with `\n` character
- fixed: `FrameworkImage.save()` problem with streams
- fixed: `CLEANUP(stream)` method
- fixed: `controller.memorize()` problem with `controller.content()`
- fixed: `multipart/form-data` parser
- fixed: `Array.async()` without arguments
- fixed: view inline helpers
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.logger" id="apidoc.element.total.js.logger">
        function <span class="apidocSignatureSpan">total.js.</span>logger
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logger = function () {
	F.datetime = new Date();
	var dt = F.datetime.getFullYear() + '-' + (F.datetime.getMonth() + 1).toString().padLeft(2, '0') + '-' + F.datetime.getDate().toString
().padLeft(2, '0') + ' ' + F.datetime.getHours().toString().padLeft(2, '0') + ':' + F.datetime.getMinutes().toString().padLeft(2
, '0') + ':' + F.datetime.getSeconds().toString().padLeft(2, '0');
	var str = '';
	var length = arguments.length;

	for (var i = 1; i &lt; length; i++) {
		var val = arguments[i];
		if (val === undefined)
			val = 'undefined';
		else if (val === null)
			val = 'null';
		else if (typeof(val) === 'object')
			val = Util.inspect(val);
		str += (str ? ' ' : '') + val;
	}

	F.path.verify('logs');
	U.queue('F.logger', 5, (next) =&gt; Fs.appendFile(U.combine(F.config['directory-logs'], arguments[0] + '.log'), dt + ' | ' + str + '\n', next));
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `U.send(name, stream, url, callback, [cookies], [headers], [method], [timeout])` supports cookies and timeout
- updated: `U.request()` supports a new flag `&lt; 200` (kB), it means that the method stores a content with maxixmum size 200
 kB.
- updated: `ErrorBuilder` instance contains a new property `instance.unexpected` when is `instance.push()` a classic Error'
s instance.
- updated: configuration files + resources support types like String, Number, Array, Date, etc. via `key (type) : value`
- updated: `F.use(name, [url], [types])` - now supports new attributes `url`, and `types`

- fixed: `Websocket.destroy()`
- fixed: Too many open files with `F.log()` and `F.<span class="apidocCodeKeywordSpan">logger</span>()`
- fixed: `String.isJSON()` the problem with `\n` character
- fixed: `FrameworkImage.save()` problem with streams
- fixed: `CLEANUP(stream)` method
- fixed: `controller.memorize()` problem with `controller.content()`
- fixed: `multipart/form-data` parser
- fixed: `Array.async()` without arguments
- fixed: view inline helpers
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.logmail" id="apidoc.element.total.js.logmail">
        function <span class="apidocSignatureSpan">total.js.</span>logmail
        <span class="apidocSignatureSpan">(address, subject, body, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">logmail = function (address, subject, body, callback) {

	if (typeof(body) === FUNCTION) {
		callback = body;
		body = subject;
		subject = null;
	} else if (body === undefined) {
		body = subject;
		subject = null;
	}

	if (!subject)
		subject = F.config.name + ' v' + F.config.version;

	var body = '&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;title&gt;' + subject + '&lt;/title&gt;&lt;meta charset="utf-8" /&gt;&lt;/head&gt;&lt;body&gt;&lt;pre style="max-width
:600px;font-size:13px;line-height:16px"&gt;' + (typeof(body) === 'object' ? JSON.stringify(body).escape() : body) + '&lt;/pre&gt;&lt;/body&gt;&lt;/
html&gt;';
	return F.onMail(address, subject, body, callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: CSS variables likes sass, example: `$color: red;`
- added: CSS nesting
- added: modificators for dynamic modification before compilation: views, styles and scripts
- added: TransformBuilder
- added: F.load(debug, load_types, [path]);
- added: F.isWorker (is true when is called F.load())
- added: F.isCluster (is true when the framework is running in the cluster)
- added: F.<span class="apidocCodeKeywordSpan">logmail</span>(address, [subject], body, [callback]) --&gt; send e-mail message
 as plain text
- added: Array.unique([property]) by Andrea Sessa
- added: Array.pair(array, property, fn(itemA, itemB), [remove]) - pair arrays
- added: String.base64ToBuffer();
- added: terminal -&gt; `tpm unpack [package_name] [optional: target_directory]`
- added: versions is applied to raw HTML
- added: versions supports auto-mapping
- added: sync2(), e.g. sync2(fn), diff with v1: sync(fn)() and v2: sync2(fn)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.lookup" id="apidoc.element.total.js.lookup">
        function <span class="apidocSignatureSpan">total.js.</span>lookup
        <span class="apidocSignatureSpan">(req, url, flags, membertype)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lookup = function (req, url, flags, membertype) {

	var isSystem = url[0] === '#';
	var subdomain = F._length_subdomain_web &amp;&amp; req.subdomain ? req.subdomain.join('.') : null;
	if (isSystem)
		req.path = [url];

	// helper for 401 http status
	req.$isAuthorized = true;

	var key;

	if (!isSystem) {
		key = '#' + url + '$' + membertype + req.$flags + (subdomain ? '$' + subdomain : '');
		if (F.temporary.other[key])
			return F.temporary.other[key];
	}

	var length = F.routes.web.length;
	for (var i = 0; i &lt; length; i++) {

		var route = F.routes.web[i];
		if (route.CUSTOM) {
			if (!route.CUSTOM(url, req, flags))
				continue;
		} else {
			if (F._length_subdomain_web &amp;&amp; !framework_internal.routeCompareSubdomain(subdomain, route.subdomain))
				continue;
			if (route.isASTERIX) {
				if (!framework_internal.routeCompare(req.path, route.url, isSystem, true))
					continue;
			} else {
				if (!framework_internal.routeCompare(req.path, route.url, isSystem))
					continue;
			}
		}

		if (isSystem) {
			if (route.isSYSTEM)
				return route;
			continue;
		}

		if (route.isPARAM &amp;&amp; route.regexp) {
			var skip = false;
			for (var j = 0, l = route.regexpIndexer.length; j &lt; l; j++) {

				var p = req.path[route.regexpIndexer[j]];
				if (p === undefined) {
					skip = true;
					break;
				}

				if (!route.regexp[route.regexpIndexer[j]].test(p)) {
					skip = true;
					break;
				}
			}

			if (skip)
				continue;
		}

		if (route.flags &amp;&amp; route.flags.length) {
			var result = framework_internal.routeCompareFlags2(req, route, membertype);
			if (result === -1)
				req.$isAuthorized = false; // request is not authorized
			if (result &lt; 1)
				continue;
		}

		if (key &amp;&amp; route.isCACHE &amp;&amp; req.$isAuthorized)
			F.temporary.other[key] = route;

		return route;
	}

	return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	if (controller.res.success || controller.res.headersSent || !controller.isConnected)
		return controller;

	controller.precache &amp;&amp; controller.precache(null, null, null);
	controller.req.path = EMPTYARRAY;
	controller.subscribe.success();
	controller.subscribe.route = F.<span class="apidocCodeKeywordSpan">lookup</span>(controller.req, '#' + status, EMPTYARRAY
, 0);
	controller.subscribe.exception = problem;
	controller.subscribe.execute(status, true);
	return controller;
};

function Framework() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.lookup_websocket" id="apidoc.element.total.js.lookup_websocket">
        function <span class="apidocSignatureSpan">total.js.</span>lookup_websocket
        <span class="apidocSignatureSpan">(req, url, membertype)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">lookup_websocket = function (req, url, membertype) {

	var subdomain = F._length_subdomain_websocket &amp;&amp; req.subdomain ? req.subdomain.join('.') : null;
	var length = F.routes.websockets.length;

	req.$isAuthorized = true;

	for (var i = 0; i &lt; length; i++) {

		var route = F.routes.websockets[i];

		if (route.CUSTOM) {
			if (!route.CUSTOM(url, req))
				continue;
		} else {

			if (F._length_subdomain_websocket &amp;&amp; !framework_internal.routeCompareSubdomain(subdomain, route.subdomain))
				continue;
			if (route.isASTERIX) {
				if (!framework_internal.routeCompare(req.path, route.url, false, true))
					continue;
			} else {
				if (!framework_internal.routeCompare(req.path, route.url, false))
					continue;
			}
		}

		if (route.isPARAM &amp;&amp; route.regexp) {
			var skip = false;
			for (var j = 0, l = route.regexpIndexer.length; j &lt; l; j++) {

				var p = req.path[route.regexpIndexer[j]];
				if (p === undefined) {
					skip = true;
					break;
				}

				if (!route.regexp[route.regexpIndexer[j]].test(p)) {
					skip = true;
					break;
				}
			}

			if (skip)
				continue;
		}

		if (route.flags &amp;&amp; route.flags.length) {
			var result = framework_internal.routeCompareFlags2(req, route, membertype);
			if (result === -1)
				req.$isAuthorized = false;
			if (result &lt; 1)
				continue;
		}

		return route;
	}

	return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var auth = F.onAuthorize;
	if (auth) {
		auth.call(F, req, req.websocket, req.flags, function(isLogged, user) {

			if (user)
				req.user = user;

			var route = F.<span class="apidocCodeKeywordSpan">lookup_websocket</span>(req, req.websocket.uri.pathname, isLogged ? 1 : 2);
			if (route) {
				F.$websocketcontinue_process(route, req, path);
			} else {
				req.websocket.close();
				req.connection.destroy();
			}
		});
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.mail" id="apidoc.element.total.js.mail">
        function <span class="apidocSignatureSpan">total.js.</span>mail
        <span class="apidocSignatureSpan">(address, subject, view, model, callback, language)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mail = function (address, subject, view, model, callback, language) {

	if (typeof(callback) === 'string') {
		var tmp = language;
		language = callback;
		callback = tmp;
	}

	var controller = EMPTYCONTROLLER;
	controller.layoutName = '';
	controller.themeName = U.parseTheme(view);

	if (controller.themeName)
		view = prepare_viewname(view);
	else if (this.onTheme)
		controller.themeName = this.onTheme(controller);
	else
		controller.themeName = '';

	var replyTo;

	// Translation
	if (typeof(language) === 'string') {
		subject = subject.indexOf('@(') === -1 ? F.translate(language, subject) : F.translator(language, subject);
		controller.language = language;
	}

	return controller.mail(address, subject, view, model, callback, replyTo);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- updated: subdomain routing supports wildcard routing `F.route('[*]/', 'homepage')` (`F.websocket()` is supported
 too)
- updated: `F.route(url, ...)` - `url`can be String Array with multiple relative paths by @Harry-Stot
- updated: `F.file()` supports flags instead of middleware and the flags supports extensions `['.jpg', '.png'
;]`. The `name` argument has been removed.
- updated: `F.localize()` supports flags and the `name` argument has been removed
- updated: `F.sitemap()` returns object with a new field: `wildcard: {Boolean}`
- updated: `F.problem()`, `F.change()`, `controller.problem()` and `controller.change()` write logs to the file
- updated: `F.<span class="apidocCodeKeywordSpan">mail</span>()` and `controller.mail()` subject is translated according to the
language
- updated: `F.file(fnValidation/relative_path, fnExecute, [flags])` the file routing is completely changed
- updated: `export.booting` can contain `root` attribute for `package` applications
- updated: `Array.orderBy()` added quicksort algorithm
- updated: `Date.format()` supports day names `ddd` (short) and `dddd` (full)
- updated: `String.removeDiacritics()` supports multiple languages (by @Harry-Slot)
- updated: (IMPORTANT) `U.getExtension(filename)` --&gt; returns extension without `.` dot
- updated: (IMPORTANT) `F.resize(url, action(image), [flags])` new resize routing
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.map" id="apidoc.element.total.js.map">
        function <span class="apidocSignatureSpan">total.js.</span>map
        <span class="apidocSignatureSpan">(url, filename, filter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">map = function (url, filename, filter) {

	if (url[0] !== '/')
		url = '/' + url;

	var isPackage = false;

	filename = U.$normalize(filename);
	url = framework_internal.preparePath(F.$version(url));

	// isomorphic
	if (filename[0] === '#') {
		F.owners.push({ type: 'mapping', owner: _owner, id: url });
		F.routes.mapping[url] = F.path.temp('isomorphic_' + filename.substring(1) + '.min.js');
		return F;
	}

	var index = filename.indexOf('#');
	var block;

	if (index !== -1) {
		var tmp = filename.split('#');
		filename = tmp[0];
		block = tmp[1];
	}

	var c = filename[0];

	// package
	if (c === '@') {
		filename = F.path.package(filename.substring(1));
		isPackage = true;
	} else if (c === '=') {
		if (F.isWindows)
			filename = U.combine(F.config['directory-themes'], filename.substring(1));
		else
			filename = F.path.themes(filename.substring(1));
		isPackage = true;
	}

	var isFile = U.getExtension(filename).length &gt; 0;

	// Checks if the directory exists
	if (!isPackage &amp;&amp; !filename.startsWith(directory)) {
		var tmp = filename[0] === '~' ? F.path.root(filename.substring(1)) : F.path.public(filename);
		if (existsSync(tmp))
			filename = tmp;
	}

	if (isFile) {
		F.routes.mapping[url] = filename;
		F.owners.push({ type: 'mapping', owner: _owner, id: url });
		if (block) {
			F.owners.push({ type: 'blocks', owner: _owner, id: url });
			F.routes.blocks[url] = block;
		}
		return F;
	}

	url = U.path(url);
	filename = U.path(filename);

	var replace = filename;
	var plus = '';
	var isRoot = false;

	if (replace[0] === '/')
		isRoot = true;

	if (replace[0] === '~') {
		plus += '~';
		replace = replace.substring(1);
	}

	if (replace[0] === '.') {
		plus += '.';
		replace = replace.substring(1);
	}

	if (!isRoot &amp;&amp; replace[0] === '/') {
		plus += '/';
		replace = replace.substring(1);
	}

	if (filter instanceof Array) {
		for (var i = 0, length = filter.length; i &lt; length; i++) {
			if (filter[i][0] === '.')
				filter[i] = filter[i].substring(1);
			filter[i] = filter[i].toLowerCase();
		}
	}

	setTimeout(function() {
		U.ls(F.isWindows ? filename.replace(/\//g, '\\') : filename, function(files) {
			for (var i = 0, length = files.length; i &lt; length; i++) {

				if (F.isWindows)
					files[i] = files[i].replace(filename, '').replace(/\\/g, '/');

				var file = files[i].replace(replace, '');

				if (filter) {
					if (typeof(filter) === 'function') {
						if (!filter(file))
							continue;
					} else {
						if (filter.indexOf(U.getExtension(file).toLowerCase()) === -1)
							continue;
					}
				}

				if (file[0] === '/')
					file = file.substring(1);

				var key = url + file;
				F.routes.mapping[key] = plus + files[i];
				F.owners.push({ type: 'mapping', owner: _owner, id: key });

				if (block) {
					F.owners.push({ type: 'blocks', owner: _owner, id: key });
					F.routes.blocks[key] = block;
				}
			}

		});
	}, isPackage ? 500 : 1);

	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- fixed: email attachments
- fixed: throwing error in global middleware
- fixed: Pagination.last()
- fixed: CSS auto-vendor-prefixes
- fixed: `tpm` binary (bug in creating packages on Windows)
- fixed: controller generators
- fixed: F.install() --&gt; problem with names via URL import
- fixed: F.<span class="apidocCodeKeywordSpan">map</span>() on Windows (problem with paths)
- fixed: HTML compression in views
- fixed: U.Async() object (problem with waitingFor)
- fixed: F.map(), problem in Windows
- fixed: CLEANUP(stream, [callback]);
- fixed: HTTP CACHE

- EXAMPLE (NEW): https://github.com/totaljs/examples/tree/master/blocks
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.mapping" id="apidoc.element.total.js.mapping">
        function <span class="apidocSignatureSpan">total.js.</span>mapping
        <span class="apidocSignatureSpan">(url, path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mapping = function (url, path) {
	return F.map.apply(F, arguments);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.merge" id="apidoc.element.total.js.merge">
        function <span class="apidocSignatureSpan">total.js.</span>merge
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">merge = function (url) {

	var arr = [];

	for (var i = 1, length = arguments.length; i &lt; length; i++) {

		var items = arguments[i];
		if (!(items instanceof Array))
			items = [items];

		for (var j = 0, lengthsub = items.length; j &lt; lengthsub; j++) {
			var fn = items[j];
			var c = fn[0];
			if (c === '@')
				fn = '~' + F.path.package(fn.substring(1));
			else if (c === '=')
				fn = '~' + F.path.themes(fn.substring(1));
			else if (c === '#')
				fn = '~' + F.path.temp('isomorphic_' + fn.substring(1) + '.min.js');
			arr.push(fn);
		}
	}

	url = framework_internal.preparePath(F.$version(url));

	if (url[0] !== '/')
		url = '/' + url;

	var filename = F.path.temp((F.id ? 'i-' + F.id + '_' : '') + 'merged_' + createTemporaryKey(url));
	F.routes.merge[url] = { filename: filename.replace(/\.(js|css)/g, ext =&gt; '.min' + ext), files: arr };
	Fs.unlink(F.routes.merge[url].filename, NOOP);
	F.owners.push({ type: 'merge', owner: _owner, id: url });
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.findConnections()` finds websocket connections

- updated: (IMPORTANT) Array.async([NEW: threadCount (Number)], [callback]) supports `threads`
- updated: (IMPORTANT) Array.wait(onItem(item, index), [callback], [threadCount]) supports `threads`
- updated: (IMPORTANT) U.streamer(beg, [end], callback) --&gt; supports "end" delimiter
- updated: Date.format(format, [resource_name]) supports name of months via `MMM` (short) and `MMMM` (full)
- updated: Resources support months e.g. `January     : Janur`
- updated: `F.<span class="apidocCodeKeywordSpan">merge</span>()` supports directories, e.g. `F.merge('app.js', '/
js/*.js')`
- updated: NoSQL embeddded version
- updated: `U.ls()` --&gt; [filter] can be `string` or `RegExp`
- updated: `@{meta(title, [description], [keywords], [image])}` and `@{keywords(value)}` keywords can be String Array
- updated:&nbsp;`@{section name}` can be used in the view more times
- updated: `U.request()` flags supports `number` for timeout and encoding `utf8`, `ascii`, etc.
- updated: `F.restfull()` each action support SchemaBuilder
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.middleware" id="apidoc.element.total.js.middleware">
        function <span class="apidocSignatureSpan">total.js.</span>middleware
        <span class="apidocSignatureSpan">(name, funcExecute)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (name, funcExecute) {
	F.install('middleware', name, funcExecute);
	_owner &amp;&amp; F.owners.push({ type: 'middleware', owner: _owner, id: name });
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.web()` --&gt; alias to F.route()
- added: `F.cors(url, flags, credentials)`
- added: `config['default-response-maxage']`, default value `11111111`
- added: `U.get(obj, path)` reads a value from `obj` by path
- added: `U.set(obj, path, value)` sets a value into `obj` by path
- added: (IMPORTANT) `config['default-root']` can replace root relative path
- added: `FrameworkImage` --&gt; `instance.make(function(image) {})`
- added: `FrameworkImage` supports middleware `FrameworkImage.<span class="apidocCodeKeywordSpan">middleware</span>(extension, fn
)`
- added: `controller.$get([helper], callback)` or alias `controller.$read([helper], callback)` - schema must be defined in the route
- added: `controller.$remove([helper], callback)` - schema must be defined in the route
- added: `controller.$save([helper], callback)` - schema must be defined in the route
- added: `controller.$query([helper], callback)` - schema must be defined in the route
- added: `controller.$transform(name, [helper], callback)` - schema must be defined in the route
- added: `controller.$workflow([name, [helper], callback)` - schema must be defined in the route
- added: `controller.$operation(name, [helper], callback)` - schema must be defined in the route
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.mmr" id="apidoc.element.total.js.mmr">
        function <span class="apidocSignatureSpan">total.js.</span>mmr
        <span class="apidocSignatureSpan">(url, process)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mmr = function (url, process) {
	url = framework_internal.preparePath(U.path(url));
	F.routes.mmr[url] = { exec: process };
	F._request_check_POST = true;
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `@{title2('this content will be added to end of current title')}`
- added: `String.parseInt2()` the method searchs number and converts it to integer
- added: `String.parseFloat2()` the method searchs number and converts it to float
- added: `@{absolute(url, [hostname])}` for importing links with absolute URL by George Okojie Davis &lt;https://github.com/binarygeotech
&gt;
- added: `sitemap_replace(name, title, url)` can change sitemap `title` and `url` onetime
- added: new JavaScript minificator algorithm because of Douglas Crockford "Good, not Evil"
- added: NoSQL supports counter for e.g. views or downloads, etc., more in documentation
- added: new routing mechanism `F.<span class="apidocCodeKeywordSpan">mmr</span>(url, action)` for streaming `multipart/x-mixed-
replace` types (client--&gt;server)
- added: `controller.mmr(filename, [stream], callback)` for streaming `multipart/x-mixed-replace` (server--&gt;client)
- added: `setTimeout2(key, fn, timeout)` resets old and creates a new `setTimeout` according to the `key`
- added: `clearTimeou2(key)` resets existing timeout
- added: `dnscache` into the `controller.pipe()` and `F.responsePipe()`
- added: `CREATE([group], name)` the methods create an empty object according to the schema
- added: `F.group(flags, fn)` for extending routes (web, websocket, file) flags
- added: `Number.prototype.filesize([decimals], [type])` formatting file sizes
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.mode" id="apidoc.element.total.js.mode">
        function <span class="apidocSignatureSpan">total.js.</span>mode
        <span class="apidocSignatureSpan">(http, name, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mode = function (http, name, options) {

	var debug = false;

	if (options.directory)
		F.directory = directory = options.directory;

	if (typeof(http) === 'string') {
		switch (http) {
			case 'debug':
			case 'development':
				debug = true;
				break;
		}
		F.config.debug = debug;
		F.config.trace = debug;
		F.isDebug = debug;
		global.DEBUG = debug;
		global.RELEASE = !debug;
		return F;
	}

	F.isWorker = false;

	switch (name.toLowerCase().replace(/\.|\s/g, '-')) {
		case 'release':
		case 'production':
			break;

		case 'debug':
		case 'develop':
		case 'development':
			debug = true;
			break;

		case 'test':
		case 'testing':
		case 'test-debug':
		case 'debug-test':
		case 'testing-debug':
			debug = true;
			F.isTest = true;
			break;

		case 'test-release':
		case 'release-test':
		case 'testing-release':
		case 'test-production':
		case 'testing-production':
			debug = false;
			break;
	}

	var restart = false;
	if (F.temporary.init)
		restart = true;
	else
		F.temporary.init = { name: name, isHTTPS: typeof(http.STATUS_CODES) === 'undefined', options: options };

	F.config.trace = debug;
	F.consoledebug('startup');
	F.$startup(function() {
		F.consoledebug('startup (done)');
		F.initialize(http, debug, options, restart);
	});
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: ErrorBuilder.setContentType() --&gt; default application/json
- added: View engine supports `else if`
- added: U.parseBoolean(val, [def])
- added: F.backup(filename, path, [callback], [filter]) --&gt; backup some path to one file
- added: F.restore(filename, target, [callback], [filter]) --&gt; restore backup file (but not evaluating)
- added: MailMessage supports custom headers `message.headers = { key: 'value' }`
- added: @{notranslate} --&gt; disables view translation
- added: F.<span class="apidocCodeKeywordSpan">mode</span>('debug') or F.mode('release') --&gt; changes a
mode of the framework
- added: EACHSCHEMA([group], prepare(group, name, schema))

- updated: MailMessage.bcc(email, [clear]) --&gt; added clear
- updated: MailMessage.cc(email, [clear]) --&gt; added clear
- updated: MailMessage.reply(email, [clear]) --&gt; added clear

- fixed: uploading files
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.model" id="apidoc.element.total.js.model">
        function <span class="apidocSignatureSpan">total.js.</span>model
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">model = function (name) {
	var obj = F.models[name];
	if (obj || obj === null)
		return obj;
	var filename = U.combine(F.config['directory-models'], name + '.js');
	existsSync(filename) &amp;&amp; F.install('model', name, filename, undefined, undefined, undefined, true);
	return F.models[name] || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `nosql.update(docToUpdate, [docToInsert])` when the document for updating doesn't exist then database performs insert
- updated: `nosql.modify(docToUpdate, [docToInsert])` when the document for updating doesn't exist then database performs insert
- updated: `nosql.binary` stores a creation date as meta info

- fixed: Image.stream()
- fixed: global variable `Image` (in a single library)
- fixed: JavaScript compressor (problem with Regular Expressions)
- fixed: custom paths in `F.<span class="apidocCodeKeywordSpan">model</span>()` and `F.source()`
- fixed: NoSQL removing documents (problem with different filters in one queue)
- fixed: fix view compiler error message
- fixed: `String.prototype.capitalize`

- removed: `nosql` doesn't support cache (`DatabaseBuilder.cache` is obsolete)
- removed: `F.refresh()` the method was useless
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.modify" id="apidoc.element.total.js.modify">
        function <span class="apidocSignatureSpan">total.js.</span>modify
        <span class="apidocSignatureSpan">(fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">modify = function (fn) {
	if (!F.modificators)
		F.modificators = [];
	F.modificators.push(fn);
	fn.$owner = _owner;
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `HttpFile.rename(filename, [callback(err)])` moves file to another directory

- updated: `F.on('exit', function(signal) {})` added a signal code
- updated: SchemaBuilderEntity contains new argument `controller`, e.g. `.setSave(function(error, model, options, callback, controller
) { ..`
- updated: removed all validators of email addresses from FrameworkMail
- updated: `GETSCHEMA([group], name, [callback(err, schema)])` can wait for a schema
- updated: `F.localize()` supports modificators as `static` type
- updated: `F.<span class="apidocCodeKeywordSpan">modify</span>()` supports a new type `static`, it's group of `.html`, `.txt
` and `.md` files
- updated: `U.trim(obj, [clean])` supports a new argument `clean` (default `false`) and when it's `true` and a value is `&amp;#
x27;'` then it sets the value to `undefined`
- updated: `nosql.update(docToUpdate, [docToInsert])` when the document for updating doesn't exist then database performs insert
- updated: `nosql.modify(docToUpdate, [docToInsert])` when the document for updating doesn't exist then database performs insert
- updated: `nosql.binary` stores a creation date as meta info

- fixed: Image.stream()
- fixed: global variable `Image` (in a single library)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.module" id="apidoc.element.total.js.module">
        function <span class="apidocSignatureSpan">total.js.</span>module
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">module = function (name) {
	return F.modules[name] || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- EXAMPLE (NEW): https://github.com/totaljs/examples/tree/master/routing-resize
- EXAMPLE (NEW): https://github.com/totaljs/examples/tree/master/views-place-sections
- EXAMPLE (UPD): https://github.com/totaljs/examples/tree/master/views
- EXAMPLE (UPD): https://github.com/totaljs/examples/tree/master/views-custom-helper

======= 1.4.0

- added: new global methods: INCLUDE() - framework.source(), SOURCE() - framework.source(), MODEL(name) -&gt; framework.model(),
MODULE(name) -&gt; framework.<span class="apidocCodeKeywordSpan">module</span>(), DATABASE() -&gt; framework.database()
- added: unauthorize flag
- added: config['allow-compress-html'] (default: true)
- added: controller.language (read from request.language)
- added: framework sets response['Content-Length'] for some static files

- updated: debug.js (added "source")
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.noCache" id="apidoc.element.total.js.noCache">
        function <span class="apidocSignatureSpan">total.js.</span>noCache
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">noCache = function (req, res) {
	req.noCache();
	res &amp;&amp; res.noCache();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- fixed: assertion testing
- fixed: view @{foreach ....}

======= 1.5.0 &amp; 1.5.1

- added: TOTAL.JS PACKAGE MANAGER (new binary: tpm === [t]otal.js [p]ackage [m]anager)
- added: JS CSS (important: removed LESS)
- added: framework.<span class="apidocCodeKeywordSpan">noCache</span>(req, [res])
- added: request.noCache()
- added: response.noCache()
- added: new config file (this file is loaded in a debug and in a release mode): /some-app/config
- added: String.prototype.startsWith(text, [ignoreCase]);
- added: String.prototype.endsWith(text, [ignoreCase]);
- added: picture auto resizer: framework.resize(url, [width], [height], [extensions], [path], [options])
- added: .webm into the config['static-accepts']
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.nosql" id="apidoc.element.total.js.nosql">
        function <span class="apidocSignatureSpan">total.js.</span>nosql
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">nosql = function (name) {
	var db = F.databases[name];
	if (db)
		return db;
	F.path.verify('databases');
	db = framework_nosql.load(name, F.path.databases(name));
	F.databases[name] = db;
	return db;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `Number.async(fn(index, next), callback)` for asynchronous operations
- added: `UID()` for generating unique identificators (contains minimum 18 chars)
- added: `F.restart()` for restarting app
- added: `F.on('restart')`
- added: quicksort algorithm for sorting arrays
- added: `Array.quicksort(property_name, [asc], [maxlength])` for sorting arrays
- added: `String.removeTags()` by @harry-stot
- added: F.<span class="apidocCodeKeywordSpan">nosql</span>(name) + NOSQL(name) --&gt; alias for NoSQL embedded database (it can
 be used with e.g. SQL Agent)
- added: modificators can handle `INSTALL('view', ...)`
- added: `String.isPhone()` for phone number validation
- added: `String.isUID()` for UID() validation
- added: `String.isZIP()`
- added: `Pagination.html(max, format)` returns `String`
- added: `Pagination.json(max, format)` returns `String`
- added: new schemabuilder types `Email` (string, maxlength 120), `Phone` (string, maxlength 20), `Zip` (string, maxlength 10), `
Capitalize` (string), `Lowerize` (string), `Upperize` (string), `UID` (string, minlength 18, maxlength 20), `Url` (string, maxlength
 500), `JSON` (string)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.notModified" id="apidoc.element.total.js.notModified">
        function <span class="apidocSignatureSpan">total.js.</span>notModified
        <span class="apidocSignatureSpan">(req, res, compare, strict)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">notModified = function (req, res, compare, strict) {

	var type = typeof(compare);
	if (type === 'boolean') {
		var tmp = compare;
		compare = strict;
		strict = tmp;
		type = typeof(compare);
	}

	var isEtag = type === 'string';
	var val = req.headers[isEtag ? 'if-none-match' : 'if-modified-since'];

	if (isEtag) {
		if (val !== (compare + F.config['etag-version']))
			return false;
	} else {

		if (!val)
			return false;

		var date = compare === undefined ? new Date().toUTCString() : compare.toUTCString();
		if (strict) {
			if (new Date(Date.parse(val)) === new Date(date))
				return false;
		} else {
			if (new Date(Date.parse(val)) &lt; new Date(date))
				return false;
		}
	}


	var headers;

	if (isEtag) {
		headers = HEADERS.notModifiedEtag;
		headers['Etag'] = val;
	} else {
		headers = HEADERS.notModifiedLastModifiedDate;
		headers['Last-Modified'] = val;
	}

	res.success = true;
	res.writeHead(304, headers);
	res.end();

	F.stats.response.notModified++;
	response_end(res);
	return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.on" id="apidoc.element.total.js.on">
        function <span class="apidocSignatureSpan">total.js.</span>on
        <span class="apidocSignatureSpan">(name, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">on = function (name, fn) {

	if (name === 'init' || name === 'ready' || name === 'load') {
		if (this.isLoaded) {
			fn.call(this);
			return;
		}
	} else if (name.indexOf('#') !== -1) {
		var arr = name.split('#');
		switch (arr[0]) {
			case 'middleware':
				F.temporary.ready[name] &amp;&amp; fn.call(this);
				break;
			case 'component':
				F.temporary.ready[name] &amp;&amp; fn.call(this);
				break;
			case 'model':
				F.temporary.ready[name] &amp;&amp; fn.call(this, F.models[arr[1]]);
				break;
			case 'source':
				F.temporary.ready[name] &amp;&amp; fn.call(this, F.sources[arr[1]]);
				break;
			case 'package':
			case 'module':
				F.temporary.ready[name] &amp;&amp; fn.call(this, F.modules[arr[1]]);
				break;
			case 'controller':
				F.temporary.ready[name] &amp;&amp; fn.call(this, F.controllers[arr[1]]);
				break;
		}
	}

	if (F.$events[name])
		F.$events[name].push(fn);
	else
		F.$events[name] = [fn];

	return this;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



======= 2.5.0

- added: a missing property for WebSocket controller `controller.mobile`
- added: `EMIT()` alias for `F.emit()`
- added: `ON()` alias for `F.<span class="apidocCodeKeywordSpan">on</span>()`
- added: `OFF()` alias for `F.removeListener(eventName, listener)` or `F.removeAllListeners([eventName])`
- added: `controller.components()` adds script/css tag into the head
- added: `@{components([group], [settings])}` renders all components together from selected group
- added: a new alias `WAIT()` alias for `U.wait()`
- added: `res.status(code)` for express middleware
- added: `F.clearSchedule(id)` for removing existing schedules
- added: a support for WebSocket compression
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onCompileView" id="apidoc.element.total.js.onCompileView">
        function <span class="apidocSignatureSpan">total.js.</span>onCompileView
        <span class="apidocSignatureSpan">(name, html, model)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onCompileView = function (name, html, model) {
	return html;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `config['default-maximum-file-descriptors'] = 0` (0 = the watcher is disabled)
- added: `config['default-interval-clear-dnscache'] = 2880` for clearing DNS cache of Utils.request(), Utils.download()
- added: Utils.resolve(url, callback(err, uri)) DNS cache
- added: Utils.clearDNS() clears DNS cache
- added: Utils.isObject()
- added: String.prototype.parseJSON()
- added: Date.prototype.diff([date], type)
- added: framework.<span class="apidocCodeKeywordSpan">onCompileView</span>(name, content, model)
- added: framework.on('cache-set', function(name, value, expire))
- added: `@{compile handlerbars}CONTENT TO COMPILE@{end}`
- added: `@{compile}CONTENT TO COMPILE@{end}`
- added: Utils.streamer(delimiter, function(value, index)) returns function
- added: HEAD method support for (controller.json(), .view(), .plain(), .file(), .stream())
- added: global.NEWSCHEMA([group], name) for creating new schemas (more in docs)
- added: global.GETSCHEMA([group], name) for getting new schemas (more in docs)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onError" id="apidoc.element.total.js.onError">
        function <span class="apidocSignatureSpan">total.js.</span>onError
        <span class="apidocSignatureSpan">(err, name, uri)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onError = function (err, name, uri) {
	F.datetime = new Date();
	console.log('======= ' + (F.datetime.format('yyyy-MM-dd HH:mm:ss')) + ': ' + (name ? name + ' ---&gt; ' : '') + err.toString() + (
uri ? ' (' + Parser.format(uri) + ')' : ''), err.stack);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		callback.success = false;

		var onError = function(err) {
			if (!err || callback.success)
				return;
			callback.success = true;
			builder.push(err);
			self.onError &amp;&amp; self.<span class="apidocCodeKeywordSpan">onError</span>(builder, model, $type);
			callback(builder);
		};

		var onCallback = function(res) {
			if (callback.success)
				return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onMail" id="apidoc.element.total.js.onMail">
        function <span class="apidocSignatureSpan">total.js.</span>onMail
        <span class="apidocSignatureSpan">(address, subject, body, callback, replyTo)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMail = function (address, subject, body, callback, replyTo) {

	var tmp;

	if (typeof(callback) === 'string') {
		tmp = replyTo;
		replyTo = callback;
		callback = tmp;
	}

	var message = Mail.create(subject, body);

	if (address instanceof Array) {
		for (var i = 0, length = address.length; i &lt; length; i++)
			message.to(address[i]);
	} else
		message.to(address);

	message.from(F.config['mail-address-from'] || '', F.config.name);

	if (replyTo)
		message.reply(replyTo);
	else {
		tmp = F.config['mail-address-reply'];
		tmp &amp;&amp; tmp.length &gt; 3 &amp;&amp; message.reply(tmp);
	}

	tmp = F.config['mail-address-copy'];
	tmp &amp;&amp; tmp.length &gt; 3 &amp;&amp; message.bcc(tmp);

	var opt = F.temporary['mail-settings'];

	if (!opt) {
		var config = F.config['mail-smtp-options'];
		config &amp;&amp; (opt = config);
		F.temporary['mail-settings'] = opt || {};
	}

	message.$sending = setTimeout(() =&gt; message.send(F.config['mail-smtp'], opt, callback), 5);
	return message;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: controller.throw403([problem])
- added: controller.throw404([problem])
- added: controller.throw500(error)
- added: controller.throw501([problem])
- added: request.signature()
- added: Builders.create(schemaName)
- added: controller.exception
- added: framework.<span class="apidocCodeKeywordSpan">onMail</span>(address, subject, body, callback)
- added: controller.mail(address, subject, viewName, [model], [callback])
- added: controller.transfer(url, [flags])

- updated: config['default-websocket-encodedecode'] - default: true
- updated: @{options(array/object)} - supports Object
- updated: utils.request(url, flags, [data], callback, cookies, headers, encoding, timeout)
- updated: utils.download(url, flags, [data], callback, cookies, headers, encoding, timeout)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onMapping" id="apidoc.element.total.js.onMapping">
        function <span class="apidocSignatureSpan">total.js.</span>onMapping
        <span class="apidocSignatureSpan">(url, def, ispublic, encode)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMapping = function (url, def, ispublic, encode) {

	if (url[0] !== '/')
		url = '/' + url;

	if (F._length_themes) {
		var index = url.indexOf('/', 1);
		if (index !== -1) {
			var themeName = url.substring(1, index);
			if (F.themes[themeName])
				return F.themes[themeName] + 'public' + url.substring(index);
		}
	}

	if (F.routes.mapping[url])
		return F.routes.mapping[url];

	def = framework_internal.preparePath(def, true);

	if (encode)
		def = $decodeURIComponent(def);

	if (ispublic)
		def = F.path.public_cache(def);
	else
		def = def[0] === '~' ? def.substring(1) : def[0] === '.' ? def : F.path.public_cache(def);

	return def;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				res.options.type = U.getContentType(req.extension);
				res.$text();
			}
			return;
		}

		var name = req.uri.pathname;
		var filename = F.<span class="apidocCodeKeywordSpan">onMapping</span>(name, name, true, true);

		Fs.readFile(filename, function(err, content) {

			if (err)
				return res.throw404();

			content = F.translator(req.$language, framework_internal.modificators(content.toString(ENCODING), filename, 'static'
;));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onMeta" id="apidoc.element.total.js.onMeta">
        function <span class="apidocSignatureSpan">total.js.</span>onMeta
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onMeta = function () {

	var builder = '';
	var length = arguments.length;
	var self = this;

	for (var i = 0; i &lt; length; i++) {

		var arg = U.encode(arguments[i]);
		if (arg == null || !arg.length)
			continue;

		switch (i) {
			case 0:
				builder += '&lt;title&gt;' + (arg + (F.url !== '/' &amp;&amp; !F.config['allow-custom-titles'] ? ' - ' + F.config.name : '')) + '&lt;/title&gt;';
				break;
			case 1:
				builder += '&lt;meta name="description" content="' + arg + '" /&gt;';
				break;
			case 2:
				builder += '&lt;meta name="keywords" content="' + arg + '" /&gt;';
				break;
			case 3:
				var tmp = arg.substring(0, 6);
				var img = tmp === 'http:/' || tmp === 'https:' || arg.substring(0, 2) === '//' ? arg : self.hostname(self.routeImage(arg));
				builder += '&lt;meta property="og:image" content="' + img + '" /&gt;&lt;meta name="twitter:image" content="' + img + '" /&gt;';
				break;
		}
	}

	return builder;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onParseJSON" id="apidoc.element.total.js.onParseJSON">
        function <span class="apidocSignatureSpan">total.js.</span>onParseJSON
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onParseJSON = function (value) {
	return JSON.parse(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	return U.request(self.$url, flags, self.$data, function(err, response, status, headers, hostname) {

		var type = err ? '' : headers['content-type'] || '';
		var output = new RESTBuilderResponse();

		output.value = type.indexOf('/xml') === -1 ? response.isJSON() ? F.<span class="apidocCodeKeywordSpan">onParseJSON<!--
span-->(response) : F.onParseQuery(response) : response.parseXML();

		if (output.value == null)
			output.value = EMPTYOBJECT;

		output.response = response;
		output.status = status;
		output.headers = headers;
...</span></pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onParseQuery" id="apidoc.element.total.js.onParseQuery">
        function <span class="apidocSignatureSpan">total.js.</span>onParseQuery
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onParseQuery = function (value) {
	if (value) {
		var val = Qs.parse(value, null, null, QUERYPARSEROPTIONS);
		F._length_convertors &amp;&amp; F.convert(val);
		return val;
	}
	return {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	return U.request(self.$url, flags, self.$data, function(err, response, status, headers, hostname) {

		var type = err ? '' : headers['content-type'] || '';
		var output = new RESTBuilderResponse();

		output.value = type.indexOf('/xml') === -1 ? response.isJSON() ? F.onParseJSON(response) : F.<span class="apidocCodeKeywordSpan
">onParseQuery</span>(response) : response.parseXML();

		if (output.value == null)
			output.value = EMPTYOBJECT;

		output.response = response;
		output.status = status;
		output.headers = headers;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onParseXML" id="apidoc.element.total.js.onParseXML">
        function <span class="apidocSignatureSpan">total.js.</span>onParseXML
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onParseXML = function (value) {
	var val = U.parseXML(value);
	F._length_convertors &amp;&amp; F.convert(val);
	return val;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `F.findConnections([path])` a `path` argument is optional
- updated: `U.streamer(beg, [end], function, [skip])` add a new argument `skip`
- updated: deprecated methods in Node.js v7
- updated: `String.parseJSON([date])` added `date` argument (date fields will be converted to `datetime`)
- updated: `F.script()` can compile code to function e.g.: `F.script('next(a + b)')` returns a compiled function
- updated: `String.captialize([onlyFirst])` add a new argument `onlyFirst`
- updated: `F.onParseQuery(value, req)` add a new argument `req`
- updated: `F.<span class="apidocCodeKeywordSpan">onParseXML</span>(value, req)` add a new argument `req`
- updated: `F.onParseJSON(value, req)` add a new argument `req`
- updated: `RESTBuilder.url()` without argument returns a current URL
- updated: `RESTBuilder.exec(function(err, value, response))` when the `error` exists the `value` is still `EMPTYOBJECT`
- updated: addded a new argument `replacer` to `controller.send(message, [id], [blacklist], [replacer])` and `client.send(message
, [raw], [replacer])`

- removed: behaviours
- removed: restrictions
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.onSchema" id="apidoc.element.total.js.onSchema">
        function <span class="apidocSignatureSpan">total.js.</span>onSchema
        <span class="apidocSignatureSpan">(req, group, name, callback, filter, novalidate)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">onSchema = function (req, group, name, callback, filter, novalidate) {
	var schema = GETSCHEMA(group, name);
	if (schema)
		schema.make(req.body, filter, onSchema_callback, callback, novalidate);
	else
		callback(new Error('Schema "' + group + '/' + name + '" not found.'));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: "dependencies" file for installing dependencies (modules, packages, etc.)
- added: @{nocompress html}, @{nocompress js}, @{nocompress css}, @{nocompress all}
- added: req.authorize(callback(err, userprofile, isAuthorized))
- added: res.content(code, body, type, [compress]) -&gt; alias for F.responseContent()
- added: F.localize(name, path, [middleware], [options]) - auto translating static files
- added: F.listener(req, res) -&gt; for multiple server listeners
- added: F.restful(url, flags, onQuery, onGet, onSave, onDelete) -&gt; creates routing
- added: F.<span class="apidocCodeKeywordSpan">onSchema</span>(req, group, name, callback(err, body)) -&gt; for custom schemas
- added: @{import(filename1, filename2, filenameN)}
- added: SchemaBuilderEntity.setError(function(error, model, type, name));
- added: F.snapshot(url, filename, [callback]);
- added: CLEANUP(stream, [callback]) - clean up readable streams
- added: configs directory
- added: F.behaviour(url, flags);
- added: behaviour: disable-measuring (default: false)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.once" id="apidoc.element.total.js.once">
        function <span class="apidocSignatureSpan">total.js.</span>once
        <span class="apidocSignatureSpan">(name, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">once = function (name, fn) {
	fn.$once = true;
	return F.on(name, fn);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		F.stats.request.error400++;
		subscribe.res.writeHead(400);
		subscribe.res.end();
		return;
	}

	// For unexpected closing
	req.<span class="apidocCodeKeywordSpan">once</span>('close', () =&gt; !req.$upload &amp;&amp; req.clear());

	var parser = new MultipartParser();
	var size = 0;
	var stream;
	var maximumSize = route.length;
	var tmp;
	var close = 0;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.parseComponent" id="apidoc.element.total.js.parseComponent">
        function <span class="apidocSignatureSpan">total.js.</span>parseComponent
        <span class="apidocSignatureSpan">(body, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function parseComponent(body, filename) {
	var response = {};

	response.css = '';
	response.js = '';
	response.install = '';

	var beg = 0;
	var end = 0;

	while (true) {
		beg = body.indexOf('&lt;script type="text/totaljs"&gt;');
		if (beg === -1)
			break;
		end = body.indexOf('&lt;/script&gt;', beg);
		if (end === -1)
			break;
		response.install += (response.install ? '\n' : '') + body.substring(beg, end).replace(/&lt;(\/)?script.*?&gt;/g, '');
		body = body.substring(0, beg).trim() + body.substring(end + 9).trim();
	}

	while (true) {
		beg = body.indexOf('&lt;style');
		if (beg === -1)
			break;
		end = body.indexOf('&lt;/style&gt;', beg);
		if (end === -1)
			break;
		response.css += (response.css ? '\n' : '') + body.substring(beg, end).replace(/&lt;(\/)?style.*?&gt;/g, '');
		body = body.substring(0, beg).trim() + body.substring(end + 8).trim();
	}

	while (true) {
		beg = body.indexOf('&lt;script&gt;');
		if (beg === -1) {
			beg = body.indexOf('&lt;script type="text/javascript"&gt;');
			if (beg === -1)
				break;
		}
		end = body.indexOf('&lt;/script&gt;', beg);
		if (end === -1)
			break;
		response.js += (response.js ? '\n' : '') + body.substring(beg, end).replace(/&lt;(\/)?script.*?&gt;/g, '');
		body = body.substring(0, beg).trim() + body.substring(end + 9).trim();
	}

	if (response.js)
		response.js = framework_internal.compile_javascript(response.js, filename);

	if (response.css)
		response.css = framework_internal.compile_css(response.css, filename);

	response.body = body;
	return response;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.problem" id="apidoc.element.total.js.problem">
        function <span class="apidocSignatureSpan">total.js.</span>problem
        <span class="apidocSignatureSpan">(message, name, uri, ip)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">problem = function (message, name, uri, ip) {
	F.$events.problem &amp;&amp; F.emit('problem', message, name, uri, ip);

	if (message instanceof framework_builders.ErrorBuilder)
		message = message.plain();
	else if (typeof(message) === 'object')
		message = JSON.stringify(message);

	var obj = { message: message, name: name, url: uri ? typeof(uri) === 'string' ? uri : Parser.format(uri) : undefined, ip: ip };
	F.logger('problems', obj.message, 'url: ' + obj.url, 'source: ' + obj.name, 'ip: ' + obj.ip);

	if (F.problems) {
		F.problems.push(obj);
		F.problems.length &gt; 50 &amp;&amp; F.problems.shift();
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: view engine supports looping with objects&nbsp;`@{foreach m in model} key: @{m.key} and value: @{m.value} @{end}`

- updated: subdomain routing supports wildcard routing `F.route('[*]/', 'homepage')` (`F.websocket()` is supported
 too)
- updated: `F.route(url, ...)` - `url`can be String Array with multiple relative paths by @Harry-Stot
- updated: `F.file()` supports flags instead of middleware and the flags supports extensions `['.jpg', '.png'
;]`. The `name` argument has been removed.
- updated: `F.localize()` supports flags and the `name` argument has been removed
- updated: `F.sitemap()` returns object with a new field: `wildcard: {Boolean}`
- updated: `F.<span class="apidocCodeKeywordSpan">problem</span>()`, `F.change()`, `controller.problem()` and `controller.change
()` write logs to the file
- updated: `F.mail()` and `controller.mail()` subject is translated according to the language
- updated: `F.file(fnValidation/relative_path, fnExecute, [flags])` the file routing is completely changed
- updated: `export.booting` can contain `root` attribute for `package` applications
- updated: `Array.orderBy()` added quicksort algorithm
- updated: `Date.format()` supports day names `ddd` (short) and `dddd` (full)
- updated: `String.removeDiacritics()` supports multiple languages (by @Harry-Slot)
- updated: (IMPORTANT) `U.getExtension(filename)` --&gt; returns extension without `.` dot
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.reconnect" id="apidoc.element.total.js.reconnect">
        function <span class="apidocSignatureSpan">total.js.</span>reconnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reconnect = function () {
	if (F.config['default-port'] !== undefined)
		F.port = F.config['default-port'];
	if (F.config['default-ip'] !== undefined)
		F.ip = F.config['default-ip'];
	F.server.close(() =&gt; F.server.listen(F.port, F.ip));
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.redirect" id="apidoc.element.total.js.redirect">
        function <span class="apidocSignatureSpan">total.js.</span>redirect
        <span class="apidocSignatureSpan">(host, newHost, withPath, permanent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">redirect = function (host, newHost, withPath, permanent) {

	var external = host.startsWith('http://') || host.startsWith('https');
	if (external) {

		if (host[host.length - 1] === '/')
			host = host.substring(0, host.length - 1);

		if (newHost[newHost.length - 1] === '/')
			newHost = newHost.substring(0, newHost.length - 1);

		F.routes.redirects[host] = { url: newHost, path: withPath, permanent: permanent };
		F._request_check_redirect = true;
		F.owners.push({ type: 'redirects', owner: _owner, id: host });
		return F;
	}

	if (host[0] !== '/')
		host = '/' + host;

	var flags;

	if (withPath instanceof Array) {
		flags = withPath;
		withPath = permanent === true;
	} else if (permanent instanceof Array) {
		flags = permanent;
		withPath = withPath === true;
	} else
		withPath = withPath === true;

	permanent = withPath;

	if (U.isStaticFile(host)) {
		F.file(host, function(req, res) {
			if (newHost.startsWith('http://') || newHost.startsWith('https://'))
				res.redirect(newHost, permanent);
			else
				res.redirect(newHost[0] !== '/' ? '/' + newHost : newHost, permanent);
		});
		return F;
	}

	F.route(host, function() {

		if (newHost.startsWith('http://') || newHost.startsWith('https://')) {
			this.redirect(newHost + this.href(), permanent);
			return;
		}

		if (newHost[0] !== '/')
			newHost = '/' + newHost;

		this.redirect(newHost + this.href(), permanent);
	}, flags);

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: a support for WebSocket compression
- added: removing `.package` files from `tmp` directory
- added: a new schema implementation (more in docs)
- added: `F.restful2()` has simplified route mechanism (it doesn't use "{id}" param for insert(POST)/update(POST)/
delete(DELETE) method with except "GET" method)
- added: `res.binary(buffer, contentType, [type], [download], [headers])`
- added: a new route flag `novalidate` (a prevention for Schema validation)
- added: `U.upload(files, url, [callback], [cookies], [headers], [method], [timeout])` for multiple uploading files
- added: `RESTBuilder.<span class="apidocCodeKeywordSpan">redirect</span>(true/false)` enables/disables auto-redirect (default:
enabled)
- added: new schema aliases (`$QUERY()`, `$GET()`, `$WORKFLOW()`, '$TRANSFORM()' and `$OPERATION()`)
- added: `allow-head` (default: false) adds `head` method into the each route automatically
- added: `F.config['allow-defer']` enables deferring functions with `DEFER` keyword (default: false)
- added: `DEFER` feature
- added: `F.config['allow-debug']` starts a mini debugger
- added: `res.image_nocache()` alternative to `F.responseImageWithoutCache`
- added: `req.localize()` performs localization (executes `F.onLocale`)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.register" id="apidoc.element.total.js.register">
        function <span class="apidocSignatureSpan">total.js.</span>register
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">register = function (path) {

	var key;
	var extension = '.' + U.getExtension(path);
	var name = U.getName(path);
	var c = path[0];

	if (c === '@')
		path = F.path.package(path.substring(1));
	else if (c === '=') {
		if (path[1] === '?')
			F.path.themes(F.config['default-theme'] + path.substring(2));
		else
			path = F.path.themes(path.substring(1));
	}

	switch (extension) {
		case '.resource':
			key = name.replace(extension, '');
			if (F.routes.resources[key])
				F.routes.resources[key].push(path);
			else
				F.routes.resources[key] = [path];
			// clears cache
			delete F.resources[key];
			break;

		default:
			throw new Error('Not supported registration type "' + extension + '".');
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `.jsx` content-type
- added: `robot` flag into the routing (for search engines)
- added: property `req.robot`
- added: property `controller.robot`
- added: property `controller.mobile`
- added: support for default theme name, e.g. `=?/index` (the framework replaces `?` for `default-theme`)
- added: String.localeCompare2(value) --&gt; same as localeCompare() but this method works with diacritics
- added: F.<span class="apidocCodeKeywordSpan">register</span>(filename); --&gt; the methods registers new e.g. resource (it solves
 the problem with resources in packages)

- updated: (IMPORTANT) controller.isSecure was renamed to controller.secured
- updated: (IMPORTANT) req.isSecure was renamed to req.secured
- updated: (IMPORTANT) Array.wait(onItem, onCallback, [NEW: threadCount (Number) or removeItemFromArray (Boolean)]) supports `threads
`
- updated: `F.mail()` supports themes with view nema like this `=default/someview'`
- updated: `@{import()}` supports movies and images
- updated: `@{import()}` can contain schema name in the path like this `=YOURTHEME/somefile.js`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.removeAllListeners" id="apidoc.element.total.js.removeAllListeners">
        function <span class="apidocSignatureSpan">total.js.</span>removeAllListeners
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeAllListeners = function (name) {
	if (name)
		F.$events[name] = undefined;
	else
		F.$events = {};
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		callback(err, self.maketransform(output.value, output), output);
		output.cache = true;

	}, self.$cookies, self.$headers, undefined, self.$timeout);
};

function exec_removelisteners(evt) {
	evt.<span class="apidocCodeKeywordSpan">removeAllListeners</span>();
}

function RESTBuilderResponse() {}

RESTBuilderResponse.prototype.cookie = function(name) {
	var self = this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.removeListener" id="apidoc.element.total.js.removeListener">
        function <span class="apidocSignatureSpan">total.js.</span>removeListener
        <span class="apidocSignatureSpan">(name, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeListener = function (name, fn) {
	var evt = F.$events[name];
	if (evt) {
		evt = evt.remove(n =&gt; n === fn);
		if (evt.length)
			F.$events[name] = evt;
		else
			F.$events[name] = undefined;
	}
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...


======= 2.5.0

- added: a missing property for WebSocket controller `controller.mobile`
- added: `EMIT()` alias for `F.emit()`
- added: `ON()` alias for `F.on()`
- added: `OFF()` alias for `F.<span class="apidocCodeKeywordSpan">removeListener</span>(eventName, listener)` or `F.removeAllListeners
([eventName])`
- added: `controller.components()` adds script/css tag into the head
- added: `@{components([group], [settings])}` renders all components together from selected group
- added: a new alias `WAIT()` alias for `U.wait()`
- added: `res.status(code)` for express middleware
- added: `F.clearSchedule(id)` for removing existing schedules
- added: a support for WebSocket compression
- added: removing `.package` files from `tmp` directory
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.reqstats" id="apidoc.element.total.js.reqstats">
        function <span class="apidocSignatureSpan">total.js.</span>reqstats
        <span class="apidocSignatureSpan">(beg)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reqstats = function (beg) {

	if (beg)
		F.stats.request.pending++;
	else
		F.stats.request.pending--;

	if (F.stats.request.pending &lt; 0)
		F.stats.request.pending = 0;

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
F.$notModified = function(req, res, date) {
	if (date === req.headers['if-modified-since']) {
		HEADERS.responseNotModified['Last-Modified'] = date;
		res.success = true;
		res.writeHead(304, HEADERS.responseNotModified);
		res.end();
		F.stats.response.notModified++;
		F.<span class="apidocCodeKeywordSpan">reqstats</span>(false, req.isStaticFile);
		return true;
	}
};

/**
* Error caller
* @param {Error} err
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.resize" id="apidoc.element.total.js.resize">
        function <span class="apidocSignatureSpan">total.js.</span>resize
        <span class="apidocSignatureSpan">(url, fn, flags)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resize = function (url, fn, flags) {

	var extensions = {};
	var cache = true;

	if (typeof(flags) === 'function') {
		var tmp = flags;
		flags = fn;
		fn = tmp;
	}

	var ext = url.match(/\*.\*$|\*?\.(jpg|png|gif|jpeg)$/gi);
	if (ext) {
		url = url.replace(ext, '');
		switch (ext.toString().toLowerCase()) {
			case '*.*':
				extensions['*'] = true;
				break;
			case '*.jpg':
			case '*.gif':
			case '*.png':
			case '*.jpeg':
				extensions[ext.toString().toLowerCase().replace(/\*/g, '').substring(1)] = true;
				break;
		}
	}

	var path = url;

	if (flags &amp;&amp; flags.length) {
		for (var i = 0, length = flags.length; i &lt; length; i++) {
			var flag = flags[i];
			if (flag[0] === '.')
				extensions[flag.substring(1)] = true;
			else if (flag[0] === '~' || flag[0] === '/' || flag.match(/^http\:|https\:/gi))
				path = flag;
			else if (flag === 'nocache')
				cache = false;
		}
	}

	if (!extensions.length) {
		extensions['jpg'] = true;
		extensions['jpeg'] = true;
		extensions['png'] = true;
		extensions['gif'] = true;
	}

	if (extensions['jpg'] &amp;&amp; !extensions['jpeg'])
		extensions['jpeg'] = true;
	else if (extensions['jpeg'] &amp;&amp; !extensions['jpg'])
		extensions['jpg'] = true;

	F.routes.resize[url] = { fn: fn, path: U.path(path || url), ishttp: path.match(/http\:|https\:/gi) ? true : false, extension: extensions
, cache: cache };
	F.owners.push({ type: 'resize', owner: _owner, id: url });
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `String.toSearch()` - removes duplicates characters + better performance
- updated: `String.decode()` - improves decoding by Tom Spaccialbelli &lt;https://github.com/harry-stot&gt;

- fixed: (critical) NoSQL views
- fixed: (critical) view compilation in release mode (problem with just-in-time rendering)
- fixed: (critical) `F.eval()`
- fixed: (critical) parsing Date instance as Date instance in SchemaBuilder
- fixed: `F.<span class="apidocCodeKeywordSpan">resize</span>()` additional path `~`
- fixed: `controller.memorize()` threw a timeout when the action contains some error in the memorize scope
- fixed: `F.sitemap()` fixed problem with `me` argument
- fixed: SchemaBuilderEntity preparing and validation
- fixed: QuickSort algorithm (problem with dates)
- fixed: `TRY()` scope
- fixed: problem with resources in views
- fixed: CSS compressor
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.resource" id="apidoc.element.total.js.resource">
        function <span class="apidocSignatureSpan">total.js.</span>resource
        <span class="apidocSignatureSpan">(name, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resource = function (name, key) {

	if (!key) {
		key = name;
		name = null;
	}

	if (!name)
		name = 'default';

	var res = F.resources[name];
	if (res)
		return res[key] || '';

	var routes = F.routes.resources[name];
	var body = '';
	var filename;
	if (routes) {
		for (var i = 0, length = routes.length; i &lt; length; i++) {
			filename = routes[i];
			if (existsSync(filename))
				body += (body ? '\n' : '') + Fs.readFileSync(filename).toString(ENCODING);
		}
	}

	var filename = U.combine(F.config['directory-resources'], name + '.resource');
	if (existsSync(filename))
		body += (body ? '\n' : '') + Fs.readFileSync(filename).toString(ENCODING);

	var obj = body.parseConfig();
	F.resources[name] = obj;
	return obj[key] || '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var self = this;
	self.onResource = self._resource_handler;
	return self;
};

ErrorBuilder.prototype._resource_handler = function(name) {
	var self = this;
	return typeof(framework) !== 'undefined' ? F.<span class="apidocCodeKeywordSpan">resource</span>(self.resourceName || &amp;#
x27;default', self.resourcePrefix + name) : '';
};

ErrorBuilder.prototype.exception = function(message) {
	this.items.push({ name: '', error: message });
	return this;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response400" id="apidoc.element.total.js.response400">
        function <span class="apidocSignatureSpan">total.js.</span>response400
        <span class="apidocSignatureSpan">(req, res, problem)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response400 = function (req, res, problem) {
	res.options.code = 400;
	problem &amp;&amp; (res.options.problem = problem);
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response401" id="apidoc.element.total.js.response401">
        function <span class="apidocSignatureSpan">total.js.</span>response401
        <span class="apidocSignatureSpan">(req, res, problem)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response401 = function (req, res, problem) {
	res.options.code = 401;
	problem &amp;&amp; (res.options.problem = problem);
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response403" id="apidoc.element.total.js.response403">
        function <span class="apidocSignatureSpan">total.js.</span>response403
        <span class="apidocSignatureSpan">(req, res, problem)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response403 = function (req, res, problem) {
	res.options.code = 403;
	problem &amp;&amp; (res.options.problem = problem);
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response404" id="apidoc.element.total.js.response404">
        function <span class="apidocSignatureSpan">total.js.</span>response404
        <span class="apidocSignatureSpan">(req, res, problem)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response404 = function (req, res, problem) {
	res.options.code = 404;
	problem &amp;&amp; (res.options.problem = problem);
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response408" id="apidoc.element.total.js.response408">
        function <span class="apidocSignatureSpan">total.js.</span>response408
        <span class="apidocSignatureSpan">(req, res, problem)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response408 = function (req, res, problem) {
	res.options.code = 408;
	problem &amp;&amp; (res.options.problem = problem);
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response431" id="apidoc.element.total.js.response431">
        function <span class="apidocSignatureSpan">total.js.</span>response431
        <span class="apidocSignatureSpan">(req, res, problem)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response431 = function (req, res, problem) {
	res.options.code = 431;
	problem &amp;&amp; (res.options.problem = problem);
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response500" id="apidoc.element.total.js.response500">
        function <span class="apidocSignatureSpan">total.js.</span>response500
        <span class="apidocSignatureSpan">(req, res, error)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response500 = function (req, res, error) {
	res.throw500(error);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response501" id="apidoc.element.total.js.response501">
        function <span class="apidocSignatureSpan">total.js.</span>response501
        <span class="apidocSignatureSpan">(req, res, problem)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response501 = function (req, res, problem) {
	res.options.code = 501;
	problem &amp;&amp; (res.options.problem = problem);
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.response503" id="apidoc.element.total.js.response503">
        function <span class="apidocSignatureSpan">total.js.</span>response503
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">response503 = function (req, res) {
	var keys = '';
	for (var m in F.waits)
		keys += (res.options.body ? ', ' : '') + '&lt;u&gt;' + m + '&lt;/u&gt;';
	res.options.code = 503;
	res.options.headers = HEADERS.response503;
	res.options.body = '&lt;html&gt;&lt;head&gt;&lt;meta charset="utf-8" /&gt;&lt;/head&gt;&lt;body style="font:normal normal 11px Arial;color:gray;line-height
:16px;padding:10px;background-color:white"&gt;&lt;div style="font-size:14px;color:#505050"&gt;Please wait (&lt;span id="time"&gt;10&lt;/span&gt;) for
 &lt;b&gt;' + (F.config.name + ' v' + F.config.version) + '&lt;/b&gt; application.&lt;/div&gt;The application is waiting for: ' + keys + '.&lt;script
&gt;var i=10;setInterval(function(){i--;if(i&lt;0)return;document.getElementById("time").innerHTML=(i===0?"refreshing":i);if(i===0)window
.location.reload();},1000);&lt;/script&gt;&lt;/body&gt;&lt;/html&gt;';
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
F.listener = function(req, res) {

	req.options = res.options = {};
	res.req = req;
	req.res = res;

	if (F._length_wait)
		return F.<span class="apidocCodeKeywordSpan">response503</span>(req, res);
	else if (!req.host) // HTTP 1.0 without host
		return res.throw400();

	var headers = req.headers;
	req.$protocol = req.connection.encrypted || headers['x-forwarded-protocol'] === 'https' ? 'https' : &amp;#
x27;http';

	req.uri = framework_internal.parseURI(req);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseBinary" id="apidoc.element.total.js.responseBinary">
        function <span class="apidocSignatureSpan">total.js.</span>responseBinary
        <span class="apidocSignatureSpan">(req, res, type, buffer, encoding, download, headers, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseBinary = function (req, res, type, buffer, encoding, download, headers, done) {
	res.options.type = type;
	res.options.body = buffer;
	res.options.encoding = encoding;
	res.options.download = download;
	res.options.headers = headers;
	res.options.callback = done;
	res.$binary();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.path.isomorphic([filename])`
- added: `Controller.ping()` for WebSocket
- added: `global.DB()` --&gt; same as `global.DATABASE()`
- added: `global.isomorphic` --&gt; returns `framework.isomorphic` --&gt; returns isomorphic objects
- added: `global.is_client` and `global.is_server` for isomorphic
- added: cache for HTTP routing
- added: RegExp routing `F.route('/{/^\\d+$/}', ...)`
- added: `F.<span class="apidocCodeKeywordSpan">responseBinary</span>(req, res, contentType, buffer, [type], [download], [headers
])`
- added: `SchemaBuilderEntity.filter(custom, [model], [reverse])`
- added: `SchemaBuilderEntity.trim = true`(enable/disable trim strings (default: true))
- added: `Number.prototype.add(value, [decimals])` -&gt; supports percentage
- added: `Date.prototype.toUTC([ticksOnly])`
- added: `Date.prototype.extend()` -&gt; extend current datetime about new date or time (more in documentation)
- added: `F.stats.request.mobile`, `F.stats.request.desktop`
- added: `res.setHeader('Vary', 'Accept-Encoding, User-Agent')` for same url addresses and different devices
 (desktop vs mobile)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseCode" id="apidoc.element.total.js.responseCode">
        function <span class="apidocSignatureSpan">total.js.</span>responseCode
        <span class="apidocSignatureSpan">(req, res, code, problem)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseCode = function (req, res, code, problem) {
	res.options.code = code;
	problem &amp;&amp; (res.options.problem = problem);
	res.$throw();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseContent" id="apidoc.element.total.js.responseContent">
        function <span class="apidocSignatureSpan">total.js.</span>responseContent
        <span class="apidocSignatureSpan">(req, res, code, body, type, compress, headers)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseContent = function (req, res, code, body, type, compress, headers) {
	res.options.code = code;
	res.options.body = body;
	res.options.type = type;
	res.options.compress = compress === undefined || compress === true;
	res.options.headers = headers;
	res.$text();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: terminal -&gt; `tpm unpack [package_name] [optional: target_directory]`
- added: versions is applied to raw HTML
- added: versions supports auto-mapping
- added: sync2(), e.g. sync2(fn), diff with v1: sync(fn)() and v2: sync2(fn)
- added: "dependencies" file for installing dependencies (modules, packages, etc.)
- added: @{nocompress html}, @{nocompress js}, @{nocompress css}, @{nocompress all}
- added: req.authorize(callback(err, userprofile, isAuthorized))
- added: res.content(code, body, type, [compress]) -&gt; alias for F.<span class="apidocCodeKeywordSpan">responseContent</span>()
- added: F.localize(name, path, [middleware], [options]) - auto translating static files
- added: F.listener(req, res) -&gt; for multiple server listeners
- added: F.restful(url, flags, onQuery, onGet, onSave, onDelete) -&gt; creates routing
- added: F.onSchema(req, group, name, callback(err, body)) -&gt; for custom schemas
- added: @{import(filename1, filename2, filenameN)}
- added: SchemaBuilderEntity.setError(function(error, model, type, name));
- added: F.snapshot(url, filename, [callback]);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseCustom" id="apidoc.element.total.js.responseCustom">
        function <span class="apidocSignatureSpan">total.js.</span>responseCustom
        <span class="apidocSignatureSpan">(req, res)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseCustom = function (req, res) {
	res.$custom();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseFile" id="apidoc.element.total.js.responseFile">
        function <span class="apidocSignatureSpan">total.js.</span>responseFile
        <span class="apidocSignatureSpan">(req, res, filename, downloadName, headers, done, key)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseFile = function (req, res, filename, downloadName, headers, done, key) {
	res.$key = key;
	res.options.filename = filename;
	res.options.download = downloadName;
	res.options.headers = headers;
	res.options.callback = done;
	res.$file();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- added: `SchemaBuilderEntity.$output()` sets the current `callback(value)` as output/result for `obj.$async(function(err, output
))`

- updated: when the config contains `directory-temp` with empty value then the framework uses system temporary directory
- updated: `U.reduce()` supports array

- fixed: binary `totaljs`, fixed problem with creating localized texts
- fixed: `F.<span class="apidocCodeKeywordSpan">responseFile</span>()` problem with cached filename, extension was broken when the
 framework reads the file from cache
- fixed: preparing values with subtype for array in SchemaBuilder
- fixed: generation UID
- fixed: problem with uninstalling middleware
- fixed: email validation, a problem with e.g. `blabla@somedomain.business` by @VarunBatraIT

- improved: view engine rendering
- improved: view engine memory consumption
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseImage" id="apidoc.element.total.js.responseImage">
        function <span class="apidocSignatureSpan">total.js.</span>responseImage
        <span class="apidocSignatureSpan">(req, res, filename, make, headers, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseImage = function (req, res, filename, make, headers, done) {

	if (typeof(filename) === 'object')
		res.options.stream = filename;
	else
		res.options.filename = filename;

	res.options.headers = headers;
	res.options.callback = done;
	res.options.make = make;
	res.$image();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: ErrorBuilder is a global class
- added: F.on('upload-begin', function(req, file) {})
- added: F.on('upload-end', function(req, file) {})
- added: config['static-accepts']: woff2
- added: F.logger(filename, arg1, ...), controller.logger(...), @{logger(...)}
- added: (IMPORTANT) F.exists(req, res, callback(next, filename))
- added: callback: F.responseFile(), controller.file(), response.file()
- added: callback: F.<span class="apidocCodeKeywordSpan">responseImage</span>(), controller.image(), response.image()
- added: callback: F.responseImageWithoutCache()
- added: callback: F.responseStream(), controller.stream(), response.stream()
- added: callback: F.responseStatic(), response.continue()
- added: Array.prototype.findIndex(cb, [value]) returns Number
- added: Array.prototype.toObject([name]) returns Object
- added: Array.prototype.limit(max, fn(items, next), [callback])
- added: Array.prototype.compare(propName, arr, comparer)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseImageWithoutCache" id="apidoc.element.total.js.responseImageWithoutCache">
        function <span class="apidocSignatureSpan">total.js.</span>responseImageWithoutCache
        <span class="apidocSignatureSpan">(req, res, filename, make, headers, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseImageWithoutCache = function (req, res, filename, make, headers, done) {

	if (typeof(filename) === 'object')
		res.options.stream = filename;
	else
		res.options.filename = filename;

	res.options.headers = headers;
	res.options.callback = done;
	res.options.make = make;
	res.options.cache = false;
	res.$image();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: F.on('upload-begin', function(req, file) {})
- added: F.on('upload-end', function(req, file) {})
- added: config['static-accepts']: woff2
- added: F.logger(filename, arg1, ...), controller.logger(...), @{logger(...)}
- added: (IMPORTANT) F.exists(req, res, callback(next, filename))
- added: callback: F.responseFile(), controller.file(), response.file()
- added: callback: F.responseImage(), controller.image(), response.image()
- added: callback: F.<span class="apidocCodeKeywordSpan">responseImageWithoutCache</span>()
- added: callback: F.responseStream(), controller.stream(), response.stream()
- added: callback: F.responseStatic(), response.continue()
- added: Array.prototype.findIndex(cb, [value]) returns Number
- added: Array.prototype.toObject([name]) returns Object
- added: Array.prototype.limit(max, fn(items, next), [callback])
- added: Array.prototype.compare(propName, arr, comparer)
- added: Image.geometry(w, h, options)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responsePipe" id="apidoc.element.total.js.responsePipe">
        function <span class="apidocSignatureSpan">total.js.</span>responsePipe
        <span class="apidocSignatureSpan">(req, res, url, headers, timeout, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responsePipe = function (req, res, url, headers, timeout, callback) {
	res.pipe(url, headers, timeout, callback);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `sitemap_replace(name, title, url)` can change sitemap `title` and `url` onetime
- added: new JavaScript minificator algorithm because of Douglas Crockford "Good, not Evil"
- added: NoSQL supports counter for e.g. views or downloads, etc., more in documentation
- added: new routing mechanism `F.mmr(url, action)` for streaming `multipart/x-mixed-replace` types (client--&gt;server)
- added: `controller.mmr(filename, [stream], callback)` for streaming `multipart/x-mixed-replace` (server--&gt;client)
- added: `setTimeout2(key, fn, timeout)` resets old and creates a new `setTimeout` according to the `key`
- added: `clearTimeou2(key)` resets existing timeout
- added: `dnscache` into the `controller.pipe()` and `F.<span class="apidocCodeKeywordSpan">responsePipe</span>()`
- added: `CREATE([group], name)` the methods create an empty object according to the schema
- added: `F.group(flags, fn)` for extending routes (web, websocket, file) flags
- added: `Number.prototype.filesize([decimals], [type])` formatting file sizes
- added: `binary` importing CSV `-csv`
- added: `controller.autodestroy([callback])` only for websocket

- updated: `framework.view()`, `controller.view()` and `@{view()}` supports `=theme/viewname`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseRedirect" id="apidoc.element.total.js.responseRedirect">
        function <span class="apidocSignatureSpan">total.js.</span>responseRedirect
        <span class="apidocSignatureSpan">(req, res, url, permanent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseRedirect = function (req, res, url, permanent) {
	res.options.url = url;
	res.options.permanent = permanent;
	res.$redirect();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseStatic" id="apidoc.element.total.js.responseStatic">
        function <span class="apidocSignatureSpan">total.js.</span>responseStatic
        <span class="apidocSignatureSpan">(req, res, done)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseStatic = function (req, res, done) {
	res.options.callback = done;
	res.continue();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: config['static-accepts']: woff2
- added: F.logger(filename, arg1, ...), controller.logger(...), @{logger(...)}
- added: (IMPORTANT) F.exists(req, res, callback(next, filename))
- added: callback: F.responseFile(), controller.file(), response.file()
- added: callback: F.responseImage(), controller.image(), response.image()
- added: callback: F.responseImageWithoutCache()
- added: callback: F.responseStream(), controller.stream(), response.stream()
- added: callback: F.<span class="apidocCodeKeywordSpan">responseStatic</span>(), response.continue()
- added: Array.prototype.findIndex(cb, [value]) returns Number
- added: Array.prototype.toObject([name]) returns Object
- added: Array.prototype.limit(max, fn(items, next), [callback])
- added: Array.prototype.compare(propName, arr, comparer)
- added: Image.geometry(w, h, options)
- added: Image.thumbnail(w, h, options)
- added: Image.filter(type)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.responseStream" id="apidoc.element.total.js.responseStream">
        function <span class="apidocSignatureSpan">total.js.</span>responseStream
        <span class="apidocSignatureSpan">(req, res, type, stream, download, headers, done, nocompress)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">responseStream = function (req, res, type, stream, download, headers, done, nocompress) {
	res.options.type = type;
	res.options.stream = stream;
	res.options.download = download;
	res.options.headers = headers;
	res.options.compress = nocompress ? false : true;
	res.options.callback = done;
	res.$stream();
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: better handling middleware errors and added prevention of "memory leak"
- updated: (IMPORTANT): Websocket ping is set to 3 minutes
- updated: framework responds for bad requests with HTTP 403
- updated: Mail (added support for Office365)
- updated: Date.prototype.add() supports e.g. Date.prototype.add('25 days')
- updated: String.prototype.params() -&gt; supports double "{{"
- updated: F.schedule(date, [repeat], fn) --&gt; added [repeat]
- updated: `F.<span class="apidocCodeKeywordSpan">responseStream</span>()` and `controller.stream()` added [nocompress] argument
- updated: binary `tpm` supports install package from different URL

- removed: XSS check

- fixed: `controller.binary(buffer, contentType, [download], [headers])`
- fixed: routing `DELETE`
- fixed: `binary` (creating empty-project, bad record with smtp options)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.restart" id="apidoc.element.total.js.restart">
        function <span class="apidocSignatureSpan">total.js.</span>restart
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restart = function () {
	if (!F.isRestarted) {
		F.isRestarted = true;
		F.emit('restart');
		setTimeout(() =&gt; F.$restart(), 1000);
	}
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `@{sitemap_navigation([parent], [language])` can get list of all items according to the parent
- added: `/startup/` all scripts in this directory are executed only one (then are renamed automatically)
- added: `F.route()` supports a new flag: `cors` (creates a cors route) and `credentials` (enables cookies for cors)
- added: `ErrorBuilder.plain()` returns all errors as a simple string
- added: `Array.findItem()` alias to `Array.find()`
- added: `Number.async(fn(index, next), callback)` for asynchronous operations
- added: `UID()` for generating unique identificators (contains minimum 18 chars)
- added: `F.<span class="apidocCodeKeywordSpan">restart</span>()` for restarting app
- added: `F.on('restart')`
- added: quicksort algorithm for sorting arrays
- added: `Array.quicksort(property_name, [asc], [maxlength])` for sorting arrays
- added: `String.removeTags()` by @harry-stot
- added: F.nosql(name) + NOSQL(name) --&gt; alias for NoSQL embedded database (it can be used with e.g. SQL Agent)
- added: modificators can handle `INSTALL('view', ...)`
- added: `String.isPhone()` for phone number validation
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.restful" id="apidoc.element.total.js.restful">
        function <span class="apidocSignatureSpan">total.js.</span>restful
        <span class="apidocSignatureSpan">(url, flags, onQuery, onGet, onSave, onDelete)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restful = function (url, flags, onQuery, onGet, onSave, onDelete) {

	var tmp;

	if (onQuery) {
		tmp = [];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(url, tmp, onQuery);
	}

	var restful = U.path(url) + '{id}';

	if (onGet) {
		tmp = [];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(restful, tmp, onGet);
	}

	if (onSave) {
		tmp = ['post'];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(url, tmp, onSave);
		tmp = ['put'];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(restful, tmp, onSave);
	}

	if (onDelete) {
		tmp = ['delete'];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(restful, tmp, onDelete);
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: sync2(), e.g. sync2(fn), diff with v1: sync(fn)() and v2: sync2(fn)
- added: "dependencies" file for installing dependencies (modules, packages, etc.)
- added: @{nocompress html}, @{nocompress js}, @{nocompress css}, @{nocompress all}
- added: req.authorize(callback(err, userprofile, isAuthorized))
- added: res.content(code, body, type, [compress]) -&gt; alias for F.responseContent()
- added: F.localize(name, path, [middleware], [options]) - auto translating static files
- added: F.listener(req, res) -&gt; for multiple server listeners
- added: F.<span class="apidocCodeKeywordSpan">restful</span>(url, flags, onQuery, onGet, onSave, onDelete) -&gt; creates routing
- added: F.onSchema(req, group, name, callback(err, body)) -&gt; for custom schemas
- added: @{import(filename1, filename2, filenameN)}
- added: SchemaBuilderEntity.setError(function(error, model, type, name));
- added: F.snapshot(url, filename, [callback]);
- added: CLEANUP(stream, [callback]) - clean up readable streams
- added: configs directory
- added: F.behaviour(url, flags);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.restful2" id="apidoc.element.total.js.restful2">
        function <span class="apidocSignatureSpan">total.js.</span>restful2
        <span class="apidocSignatureSpan">(url, flags, onQuery, onGet, onSave, onDelete)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restful2 = function (url, flags, onQuery, onGet, onSave, onDelete) {

	var tmp;

	if (onQuery) {
		tmp = [];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(url, tmp, onQuery);
	}

	if (onGet) {
		tmp = [];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(U.path(url) + '{id}', tmp, onGet);
	}

	if (onSave) {
		tmp = ['post'];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(url, tmp, onSave);
	}

	if (onDelete) {
		tmp = ['delete'];
		flags &amp;&amp; tmp.push.apply(tmp, flags);
		F.route(url, tmp, onDelete);
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `@{components([group], [settings])}` renders all components together from selected group
- added: a new alias `WAIT()` alias for `U.wait()`
- added: `res.status(code)` for express middleware
- added: `F.clearSchedule(id)` for removing existing schedules
- added: a support for WebSocket compression
- added: removing `.package` files from `tmp` directory
- added: a new schema implementation (more in docs)
- added: `F.<span class="apidocCodeKeywordSpan">restful2</span>()` has simplified route mechanism (it doesn't use "{id
}" param for insert(POST)/update(POST)/delete(DELETE) method with except "GET" method)
- added: `res.binary(buffer, contentType, [type], [download], [headers])`
- added: a new route flag `novalidate` (a prevention for Schema validation)
- added: `U.upload(files, url, [callback], [cookies], [headers], [method], [timeout])` for multiple uploading files
- added: `RESTBuilder.redirect(true/false)` enables/disables auto-redirect (default: enabled)
- added: new schema aliases (`$QUERY()`, `$GET()`, `$WORKFLOW()`, '$TRANSFORM()' and `$OPERATION()`)
- added: `allow-head` (default: false) adds `head` method into the each route automatically
- added: `F.config['allow-defer']` enables deferring functions with `DEFER` keyword (default: false)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.restore" id="apidoc.element.total.js.restore">
        function <span class="apidocSignatureSpan">total.js.</span>restore
        <span class="apidocSignatureSpan">(filename, target, callback, filter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restore = function (filename, target, callback, filter) {
	var backup = new Backup();
	backup.restore(filename, target, callback, filter);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- added: new sitemap system
- added: a default schema validator is F.onValidation()
- added: ErrorBuilder.setContentType() --&gt; default application/json
- added: View engine supports `else if`
- added: U.parseBoolean(val, [def])
- added: F.backup(filename, path, [callback], [filter]) --&gt; backup some path to one file
- added: F.<span class="apidocCodeKeywordSpan">restore</span>(filename, target, [callback], [filter]) --&gt; restore backup file
 (but not evaluating)
- added: MailMessage supports custom headers `message.headers = { key: 'value' }`
- added: @{notranslate} --&gt; disables view translation
- added: F.mode('debug') or F.mode('release') --&gt; changes a mode of the framework
- added: EACHSCHEMA([group], prepare(group, name, schema))

- updated: MailMessage.bcc(email, [clear]) --&gt; added clear
- updated: MailMessage.cc(email, [clear]) --&gt; added clear
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.rmdir" id="apidoc.element.total.js.rmdir">
        function <span class="apidocSignatureSpan">total.js.</span>rmdir
        <span class="apidocSignatureSpan">(arr, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rmdir = function (arr, callback) {
	if (typeof(arr) === 'string')
		arr = [arr];

	if (!arr.length) {
		callback &amp;&amp; callback();
		return F;
	}

	var path = arr.shift();
	if (path)
		Fs.rmdir(path, () =&gt; F.rmdir(arr, callback));
	else
		callback &amp;&amp; callback();

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					continue;
				(filename.indexOf('/') === -1 || filename.indexOf('.package/') !== -1) &amp;&amp; !filename.endsWith(&amp;#
x27;.jsoncache') &amp;&amp; arr.push(files[i]);
			}
			files = arr;
			directories = directories.remove(n =&gt; n.indexOf('.package') === -1);
		}

		F.unlink(files, () =&gt; F.<span class="apidocCodeKeywordSpan">rmdir</span>(directories, callback));
	});

	if (!isInit) {
		// clear static cache
		F.temporary.path = {};
		F.temporary.range = {};
		F.temporary.notfound = {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.route" id="apidoc.element.total.js.route">
        function <span class="apidocSignatureSpan">total.js.</span>route
        <span class="apidocSignatureSpan">(url, funcExecute, flags, length, language)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">route = function (url, funcExecute, flags, length, language) {

	var name;
	var tmp;
	var viewname;
	var sitemap;

	if (url instanceof Array) {
		url.forEach(url =&gt; F.route(url, funcExecute, flags, length));
		return F;
	}

	var CUSTOM = typeof(url) === 'function' ? url : null;
	if (CUSTOM)
		url = '/';

	if (url[0] === '#') {
		url = url.substring(1);
		if (url !== '400' &amp;&amp; url !== '401' &amp;&amp; url !== '403' &amp;&amp; url !== '404' &amp;&amp; url !== '408' &amp;&amp; url !== '431' &amp;&amp; url !== '500' &amp;&amp; url
 !== '501') {

			var sitemapflags = funcExecute instanceof Array ? funcExecute : flags;
			if (!(sitemapflags instanceof Array))
				sitemapflags = EMPTYARRAY;

			sitemap = F.sitemap(url, true, language);
			if (sitemap) {

				name = url;
				url = sitemap.url;
				if (sitemap.wildcard)
					url += '*';

				if (sitemap.localizeUrl) {
					if (language === undefined) {
						var sitemaproutes = {};
						F.temporary.internal.resources.forEach(function(language) {
							var item = F.sitemap(sitemap.id, true, language);
							if (item.url &amp;&amp; item.url !== url)
								sitemaproutes[item.url] = { name: sitemap.id, language: language };
						});

						Object.keys(sitemaproutes).forEach(key =&gt; F.route('#' + sitemap.id, funcExecute, flags, length, sitemaproutes[key].language
));
					}
				}

			} else
				throw new Error('Sitemap item "' + url + '" not found.');
		} else
			url = '#' + url;
	}

	if (!url)
		url = '/';

	if (url[0] !== '[' &amp;&amp; url[0] !== '/')
		url = '/' + url;

	if (url.endsWith('/'))
		url = url.substring(0, url.length - 1);

	url = framework_internal.encodeUnicodeURL(url);

	var type = typeof(funcExecute);
	var index = 0;
	var urlcache = url;

	if (!name)
		name = url;

	if (type === 'object' || funcExecute instanceof Array) {
		tmp = funcExecute;
		funcExecute = flags;
		flags = tmp;
	}

	var priority = 0;
	var subdomain = null;

	priority = url.count('/');

	if (url[0] === '[') {
		index = url.indexOf(']');
		if (index &gt; 0) {
			subdomain = url.substring(1, index).trim().toLowerCase().split(',');
			url = url.substring(index + 1);
			priority += subdomain.indexOf('*') !== -1 ? 50 : 100;
		}
	}

	var isASTERIX = url.indexOf('*') !== -1;
	if (isASTERIX) {
		url = url.replace('*', '').replace('//', '/');
		priority = priority - 100;
	}

	var isRaw = false;
	var isNOXHR = false;
	var method = '';
	var schema;
	var workflow;
	var isMOBILE = false;
	var isJSON = false;
	var isDELAY = false;
	var isROBOT = false;
	var isBINARY = false;
	var isCORS = false;
	var isROLE = false;
	var novalidate = false;
	var middleware = null;
	var timeout;
	var options;
	var corsflags = [];
	var membertype = 0;
	var isGENERATOR = false;
	var description;
	var id = null;

	if (_flags) {
		if (!flags)
			flags = [];
		_flags.forEach(function(flag) {
			flags.indexOf(flag) === -1 &amp;&amp; flags.push(flag);
		});
	}

	if (flags) {

		tmp = [];
		var count = 0;

		for (var i = 0; i &lt; flags.length; i++) {

			var tt = typeof(flags[i]);

			if (tt === 'number') {
				timeout = flags[i];
				continue;
			}

			if (tt === 'object') {
				options = flags[i];
				continue;
			}

			var first = flags[i][0];

			if (first === '&amp;') {
				// resource (sitemap localization)
				// doesn't used now
				continue;
			}

			// ROUTE identificator
			if (flags[i].substring(0, 3) === 'id:') {
				id = flags[i].substring(3).trim();
				continue;
			}

			if (first === '#') {
				!middleware &amp;&amp; (middleware = []);
				middleware.push(flags[i].substring(1));
				continue;
			}

			if (first === '*') {

				workflow = flags[i].trim().substring(1);
				index = workflow.indexOf('--&gt;');

				if (index !== -1) {
					schema = workflow.substring(0, index).trim();
					workflow = workflow.substring(index + 3).trim();
				} else {
					schema = workflow;
					workflow = null;
				}
				schema = schema.replace(/\\/g, '/').split('/');

				if (schema.length === 1) {
					schema[1] = schema[0];
					schema[0] = 'default';
				}

				index = schema[1].indexOf('#');
				if (index !== -1) {
					schema[2] = schema[1].substring(index + 1).trim();
					schema[1] = schema[1].substring(0, index).trim(); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `res.image_nocache()` alternative to `F.responseImageWithoutCache`
- added: `req.localize()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.useSMTP(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.http('debug/release/test', { debug: true })` can start a mini debugger
- updated: `F.<span class="apidocCodeKeywordSpan">route</span>()`, `F.websocket()` and `F.file()` --&gt; now returns `FrameworkRoute
` instance instead of `Framework` instance (more in docs)
- updated: `F.load(debug, [types], [path])` supports a new type `service` which enables `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.routeDownload" id="apidoc.element.total.js.routeDownload">
        function <span class="apidocSignatureSpan">total.js.</span>routeDownload
        <span class="apidocSignatureSpan">(name, theme)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeDownload = function (name, theme) {
	return F.$routeStatic(name, F.config['static-url-download'], theme);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.routeFont" id="apidoc.element.total.js.routeFont">
        function <span class="apidocSignatureSpan">total.js.</span>routeFont
        <span class="apidocSignatureSpan">(name, theme)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeFont = function (name, theme) {
	return F.$routeStatic(name, F.config['static-url-font'], theme);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.routeImage" id="apidoc.element.total.js.routeImage">
        function <span class="apidocSignatureSpan">total.js.</span>routeImage
        <span class="apidocSignatureSpan">(name, theme)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeImage = function (name, theme) {
	return F.$routeStatic(name, F.config['static-url-image'], theme);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				builder += '&lt;meta name="description" content="' + arg + '" /&gt;';
				break;
			case 2:
				builder += '&lt;meta name="keywords" content="' + arg + '" /&gt;';
				break;
			case 3:
				var tmp = arg.substring(0, 6);
				var img = tmp === 'http:/' || tmp === 'https:' || arg.substring(0, 2) === '//' ? arg : self.hostname
(self.<span class="apidocCodeKeywordSpan">routeImage</span>(arg));
				builder += '&lt;meta property="og:image" content="' + img + '" /&gt;&lt;meta name=&amp;#
x22;twitter:image" content="' + img + '" /&gt;';
				break;
		}
	}

	return builder;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.routeScript" id="apidoc.element.total.js.routeScript">
        function <span class="apidocSignatureSpan">total.js.</span>routeScript
        <span class="apidocSignatureSpan">(name, theme)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeScript = function (name, theme) {
	if (!name.endsWith('.js'))
		name += '.js';
	return F.$routeStatic(name, F.config['static-url-script'], theme);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.routeStatic" id="apidoc.element.total.js.routeStatic">
        function <span class="apidocSignatureSpan">total.js.</span>routeStatic
        <span class="apidocSignatureSpan">(name, theme)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeStatic = function (name, theme) {
	return F.$routeStatic(name, F.config['static-url'], theme);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.routeStyle" id="apidoc.element.total.js.routeStyle">
        function <span class="apidocSignatureSpan">total.js.</span>routeStyle
        <span class="apidocSignatureSpan">(name, theme)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeStyle = function (name, theme) {
	return F.$routeStatic(name + (name.endsWith('.css') ? '' : '.css'), F.config['static-url-style'], theme);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.routeVideo" id="apidoc.element.total.js.routeVideo">
        function <span class="apidocSignatureSpan">total.js.</span>routeVideo
        <span class="apidocSignatureSpan">(name, theme)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeVideo = function (name, theme) {
	return F.$routeStatic(name, F.config['static-url-video'], theme);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.routing" id="apidoc.element.total.js.routing">
        function <span class="apidocSignatureSpan">total.js.</span>routing
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routing = function (name) {
	for (var i = 0, length = F.routes.web.length; i &lt; length; i++) {
		var route = F.routes.web[i];
		if (route.name === name) {
			var url = U.path(route.url.join('/'));
			if (url[0] !== '/')
				url = '/' + url;
			return { controller: route.controller, url: url, id: route.id, flags: route.flags, middleware: route.middleware, execute: route
.execute, timeout: route.timeout, options: route.options, length: route.length };
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: framework.map(url, new_filename)
- added: framework.config['directory-packages'] for packages
- added: (IMPORTANT) PACKAGES (same as modules but package can contain many files in one file)
- added: framework.stats.request.request (requests count)
- added: FrameworkImage.miniature(w, h, bgColor)
- added: Array.first([def])
- added: Array.last([def])
- added: framework.<span class="apidocCodeKeywordSpan">routing</span>(name)
- added: global --&gt; ROUTING(name)
- added: global --&gt; NOOP() empty function (exists: noop(), Utils.noop())
- added: global --&gt; DEBUG boolean property (is the framework in debug mode?)
- added: global --&gt; RELEASE boolean property (is the framework in release mode?)
- added: global --&gt; TEST boolean property (is the framework in test mode?)
- added: global --&gt; F object property (is alias for "framework")
- added: routing supports schemas `*custom-schema/User` and we can define it in flags
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.schedule" id="apidoc.element.total.js.schedule">
        function <span class="apidocSignatureSpan">total.js.</span>schedule
        <span class="apidocSignatureSpan">(date, repeat, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">schedule = function (date, repeat, fn) {

	if (fn === undefined) {
		fn = repeat;
		repeat = false;
	}

	var type = typeof(date);

	if (type === 'string') {
		date = date.parseDate();
		repeat &amp;&amp; date &lt; F.datetime &amp;&amp; (date = F.datetime.add(repeat));
	} else if (type === 'number')
		date = new Date(date);

	var sum = date.getTime();
	repeat &amp;&amp; (repeat = repeat.replace('each', '1'));
	var id = U.GUID(5);
	F.schedules.push({ expire: sum, fn: fn, repeat: repeat, owner: _owner, id: id });
	return id;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `F.load(debug, [types], [path])` supports a new type `service` which enables `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
- updated: `F.<span class="apidocCodeKeywordSpan">schedule</span>()` returns an identificator
- updated: `U.clone()` supports `buffer` properties
- updated: `setTimeout2(name, fn(param), timeout, [limit], [param])` added a new argument `limit` and `param`
- updated: `F.script()` --&gt; `now` argument (in the script body) is function `now()` which it still returns `new Date()`
- updated: `F.script(body, value, callback(err, response, param), [param])` --&gt; `param` argument is a helper
- updated: middleware `next(false)` cancels calling of next middleware and controller
- updated: `OPERATION(name, value, [callback(err, response, param)], [param])` added a new (helper) argument `param`
- updated: Mail error handling (added Message instance)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.script" id="apidoc.element.total.js.script">
        function <span class="apidocSignatureSpan">total.js.</span>script
        <span class="apidocSignatureSpan">(body, value, callback, param)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">script = function (body, value, callback, param) {

	var fn;
	var compilation = value === undefined &amp;&amp; callback === undefined;
	var err;

	try {
		fn = new Function('next', 'value', 'now', 'var model=value;var global,require,process,GLOBAL,root,clearImmediate,clearInterval
,clearTimeout,setImmediate,setInterval,setTimeout,console,$STRING,$VIEWCACHE,framework_internal,TransformBuilder,Pagination,Page
,URLBuilder,UrlBuilder,SchemaBuilder,framework_builders,framework_utils,framework_mail,Image,framework_image,framework_nosql,Builders
,U,utils,Utils,Mail,WTF,SOURCE,INCLUDE,MODULE,NOSQL,NOBIN,NOCOUNTER,NOSQLMEMORY,NOMEM,DATABASE,DB,CONFIG,INSTALL,UNINSTALL,RESOURCE
,TRANSLATOR,LOG,LOGGER,MODEL,GETSCHEMA,CREATE,UID,TRANSFORM,MAKE,SINGLETON,NEWTRANSFORM,NEWSCHEMA,EACHSCHEMA,FUNCTION,ROUTING,SCHEDULE
,OBSOLETE,DEBUG,TEST,RELEASE,is_client,is_server,F,framework,Controller,setTimeout2,clearTimeout2,String,Number,Boolean,Object,Function
,Date,isomorphic,I,eval;UPTODATE,NEWOPERATION,OPERATION,$$$,EMIT,ON,$QUERY,$GET,$WORKFLOW,$TRANSFORM,$OPERATION,$MAKE,$CREATE;try
{' + body + '}catch(e){next(e)}');
	} catch(e) {
		err = e;
	}

	if (err) {
		callback &amp;&amp; callback(err);
		return compilation ? null : F;
	}

	if (compilation) {
		return (function() {
			return function(model, callback, param) {
				return fn.call(EMPTYOBJECT, function(value) {
					if (value instanceof Error)
						callback(value, undefined, param);
					else
						callback(null, value, param);
				}, model, scriptNow);
			};
		})();
	}

	fn.call(EMPTYOBJECT, function(value) {

		if (!callback)
			return;

		if (value instanceof Error)
			callback(value);
		else
			callback(null, value);

	}, value, scriptNow, param);

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
- updated: `F.schedule()` returns an identificator
- updated: `U.clone()` supports `buffer` properties
- updated: `setTimeout2(name, fn(param), timeout, [limit], [param])` added a new argument `limit` and `param`
- updated: `F.<span class="apidocCodeKeywordSpan">script</span>()` --&gt; `now` argument (in the script body) is function `now
()` which it still returns `new Date()`
- updated: `F.script(body, value, callback(err, response, param), [param])` --&gt; `param` argument is a helper
- updated: middleware `next(false)` cancels calling of next middleware and controller
- updated: `OPERATION(name, value, [callback(err, response, param)], [param])` added a new (helper) argument `param`
- updated: Mail error handling (added Message instance)
- updated: `U.request()` add a new flag `noredirect`
- updated: `F.exists(req, res, [max], callback(next, filename, req, res))` added a new arguments into the callback `req` and `res
`
- updated: `F.memorize()` uses `themeName` as a part of the cache key
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.send" id="apidoc.element.total.js.send">
        function <span class="apidocSignatureSpan">total.js.</span>send
        <span class="apidocSignatureSpan">(message, handle)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (message, handle) {
	process.send(message, handle);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `F.script()` can compile code to function e.g.: `F.script('next(a + b)')` returns a compiled function
- updated: `String.captialize([onlyFirst])` add a new argument `onlyFirst`
- updated: `F.onParseQuery(value, req)` add a new argument `req`
- updated: `F.onParseXML(value, req)` add a new argument `req`
- updated: `F.onParseJSON(value, req)` add a new argument `req`
- updated: `RESTBuilder.url()` without argument returns a current URL
- updated: `RESTBuilder.exec(function(err, value, response))` when the `error` exists the `value` is still `EMPTYOBJECT`
- updated: addded a new argument `replacer` to `controller.<span class="apidocCodeKeywordSpan">send</span>(message, [id], [blacklist
], [replacer])` and `client.send(message, [raw], [replacer])`

- removed: behaviours
- removed: restrictions
- removed: `TransformBuilder`
- removed: `F.config['allow-compatibility']` (not used)
- removed: `controller.date()` method has been useless
- removed: dynamic view compilation through `.view()` method
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.service" id="apidoc.element.total.js.service">
        function <span class="apidocSignatureSpan">total.js.</span>service
        <span class="apidocSignatureSpan">(count)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">service = function (count) {

	UIDGENERATOR.date = F.datetime.format('yyMMddHHmm');
	UIDGENERATOR.index = 1;

	var releasegc = false;

	// clears temporary memory for non-exist files
	F.temporary.notfound = {};

	// every 7 minutes (default) service clears static cache
	if (count % F.config['default-interval-clear-cache'] === 0) {
		F.$events.clear &amp;&amp; F.emit('clear', 'temporary', F.temporary);
		F.temporary.path = {};
		F.temporary.range = {};
		F.temporary.views = {};
		F.temporary.other = {};
		global.$VIEWCACHE &amp;&amp; global.$VIEWCACHE.length &amp;&amp; (global.$VIEWCACHE = []);

		// Clears command cache
		Image.clear();

		var dt = F.datetime.add('-5 minutes');
		for (var key in F.databases)
			F.databases[key] &amp;&amp; F.databases[key].inmemorylastusage &lt; dt &amp;&amp; F.databases[key].release();

		releasegc = true;
		F.config['allow-debug'] &amp;&amp; F.consoledebug('clear temporary cache');
	}

	// every 61 minutes (default) services precompile all (installed) views
	if (count % F.config['default-interval-precompile-views'] === 0) {
		for (var key in F.routes.views) {
			var item = F.routes.views[key];
			F.install('view', key, item.url, null);
		}
	}

	if (count % F.config['default-interval-clear-dnscache'] === 0) {
		F.$events.clear &amp;&amp; F.emit('clear', 'dns');
		U.clearDNS();
		F.config['allow-debug'] &amp;&amp; F.consoledebug('clear DNS cache');
	}

	var ping = F.config['default-interval-websocket-ping'];
	if (ping &gt; 0 &amp;&amp; count % ping === 0) {
		var has = false;
		for (var item in F.connections) {
			var conn = F.connections[item];
			if (conn) {
				conn.check();
				conn.ping();
				has = true;
			}
		}
		has &amp;&amp; F.config['allow-debug'] &amp;&amp; F.consoledebug('ping websocket connections');
	}

	if (F.uptodates &amp;&amp; (count % F.config['default-interval-uptodate'] === 0) &amp;&amp; F.uptodates.length) {
		var hasUpdate = false;
		F.uptodates.wait(function(item, next) {

			if (item.updated.add(item.interval) &gt; F.datetime)
				return next();

			item.updated = F.datetime;
			item.count++;

			setTimeout(function() {
				F.config['allow-debug'] &amp;&amp; F.consoledebug('uptodate', item.type + '#' + item.url);
				F.install(item.type, item.url, item.options, function(err, name, skip) {

					F.config['allow-debug'] &amp;&amp; F.consoledebug('uptodate', item.type + '#' + item.url + ' (done)');

					if (skip)
						return next();

					if (err) {
						item.errors.push(err);
						item.errors.length &gt; 50 &amp;&amp; F.errors.shift();
					} else {
						hasUpdate = true;
						item.name = name;
						F.$events.uptodate &amp;&amp; F.emit('uptodate', item.type, name);
					}

					item.callback &amp;&amp; item.callback(err, name);
					next();

				}, undefined, undefined, undefined, undefined, item.name);

			}, item.name ? 500 : 1);

		}, function() {
			if (hasUpdate) {
				F.temporary.path = {};
				F.temporary.range = {};
				F.temporary.views = {};
				F.temporary.other = {};
				global.$VIEWCACHE &amp;&amp; global.$VIEWCACHE.length &amp;&amp; (global.$VIEWCACHE = []);
			}
		});
	}

	// every 20 minutes (default) service clears resources
	if (count % F.config['default-interval-clear-resources'] === 0) {
		F.$events.clear &amp;&amp; F.emit('clear', 'resources');
		F.resources = {};
		releasegc = true;
		F.config['allow-debug'] &amp;&amp; F.consoledebug('clear resources');
	}

	// Update expires date
	count % 1000 === 0 &amp;&amp; (DATE_EXPIRES = F.datetime.add('y', 1).toUTCString());

	F.$events.service &amp;&amp; F.emit('service', count);

	if (F.config['allow-debug']) {
		F.consoledebug('service ({0}x)'.format(count));
		F.usagesnapshot();
	}

	releasegc &amp;&amp; global.gc &amp;&amp; setTimeout(function() {
		global.gc();
		F.config['allow-debug'] &amp;&amp; F.consoledebug('gc()');
	}, 1000);

	// Run schedules
	if (!F.schedules.length)
		return F;

	var expire = F.datetime.getTime();
	var index = 0;

	while (true) {
		var schedule = F.schedules[index++];
		if (!schedule)
			break;
		if (schedule.expire &gt; expire)
			continue;

		index--;

		if (schedule.repeat)
			schedule.expire = F.datetime.add(schedule.repeat);
		else
			F.schedules.splice(index, 1);

		F.config['allow-debug'] &amp;&amp; F.consoledebug('schedule', schedule.id);
		schedule.fn.call(F);
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
global.TEST = false;
global.RELEASE = false;
global.is_client = false;
global.is_server = true;

var directory = U.$normalize(require.main ? Path.dirname(require.main.filename) : process.cwd());

// F.<span class="apidocCodeKeywordSpan">service</span>() changes the values below:
var DATE_EXPIRES = new Date().add('y', 1).toUTCString();

const WEBSOCKET_COMPRESS = U.createBuffer([0x00, 0x00, 0xFF, 0xFF]);
const UIDGENERATOR = { date: new Date().format('yyMMddHHmm'), instance: 'abcdefghijklmnoprstuwxy'.split('
;').random().join('').substring(0, 3), index: 1 };
const EMPTYBUFFER = U.createBufferSize(0);
global.EMPTYBUFFER = EMPTYBUFFER;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.setModified" id="apidoc.element.total.js.setModified">
        function <span class="apidocSignatureSpan">total.js.</span>setModified
        <span class="apidocSignatureSpan">(req, res, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setModified = function (req, res, value) {
	if (typeof(value) === 'string')
		res.setHeader('Etag', value + F.config['etag-version']);
	else
		res.setHeader('Last-Modified', value.toUTCString());
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.sitemap" id="apidoc.element.total.js.sitemap">
        function <span class="apidocSignatureSpan">total.js.</span>sitemap
        <span class="apidocSignatureSpan">(name, me, language)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sitemap = function (name, me, language) {

	if (!F.routes.sitemap)
		return EMPTYARRAY;

	if (typeof(me) === 'string') {
		language = me;
		me = false;
	}

	var key = REPOSITORY_SITEMAP + name + '$' + (me ? '1' : '0') + '$' + (language || '');

	if (F.temporary.other[key])
		return F.temporary.other[key];

	var sitemap;
	var id = name;
	var url;
	var title;

	if (me === true) {
		sitemap = F.routes.sitemap[name];
		var item = { sitemap: id, id: '', name: '', url: '', last: true, selected: true, index: 0, wildcard: false, formatName: false,
formatUrl: false };
		if (!sitemap)
			return item;

		title = sitemap.name;
		if (sitemap.localizeName)
			title = F.translate(language, title);

		url = sitemap.url;
		if (sitemap.localizeUrl)
			url = F.translate(language, url);

		item.sitemap = id;
		item.id = name;
		item.formatName = sitemap.formatName;
		item.formatUrl = sitemap.formatUrl;
		item.localizeUrl = sitemap.localizeUrl;
		item.localizeName = sitemap.localizeName;
		item.name = title;
		item.url = url;
		item.wildcard = sitemap.wildcard;
		F.temporary.other[key] = item;
		return item;
	}

	var arr = [];
	var index = 0;

	while (true) {
		sitemap = F.routes.sitemap[name];
		if (!sitemap)
			break;

		title = sitemap.name;
		url = sitemap.url;

		if (sitemap.localizeName)
			title = F.translate(language, sitemap.name);

		if (sitemap.localizeUrl)
			url = F.translate(language, url);

		arr.push({ sitemap: id, id: name, name: title, url: url, last: index === 0, first: sitemap.parent ? false : true, selected: index
 === 0, index: index, wildcard: sitemap.wildcard, formatName: sitemap.formatName, formatUrl: sitemap.formatUrl, localizeName: sitemap
.localizeName, localizeUrl: sitemap.localizeUrl });
		index++;
		name = sitemap.parent;
		if (!name)
			break;
	}

	arr.reverse();
	F.temporary.other[key] = arr;
	return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- fixed: (critical) NoSQL views
- fixed: (critical) view compilation in release mode (problem with just-in-time rendering)
- fixed: (critical) `F.eval()`
- fixed: (critical) parsing Date instance as Date instance in SchemaBuilder
- fixed: `F.resize()` additional path `~`
- fixed: `controller.memorize()` threw a timeout when the action contains some error in the memorize scope
- fixed: `F.<span class="apidocCodeKeywordSpan">sitemap</span>()` fixed problem with `me` argument
- fixed: SchemaBuilderEntity preparing and validation
- fixed: QuickSort algorithm (problem with dates)
- fixed: `TRY()` scope
- fixed: problem with resources in views
- fixed: CSS compressor
- fixed: CORS
- fixed: problem with SUCCESS() and async schemas
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.sitemap_add" id="apidoc.element.total.js.sitemap_add">
        function <span class="apidocSignatureSpan">total.js.</span>sitemap_add
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sitemap_add = function (obj) {
	F.$cofnigure_sitemap(obj instanceof Array ? obj : [obj]);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- fixed: (critical) security with GM and IM --&gt; 10000x thanks for Luis Figueiredo &lt;luisf@hexasoftware.com&gt;
- fixed: `Image.stream()` and `Image.pipe()`

- renamed: `F.onLocate` renamed to __`F.onLocale`__

======= 2.1.0

- added: `F.<span class="apidocCodeKeywordSpan">sitemap_add</span>(string)` for adding entries to sitemap by Martin Smola &lt;
https://github.com/molda&gt;
- added: SchemaBuilderEntity `schema.addHook(name, fn(error, model, options, callback))`
- added: SchemaBuilderEntity `schema.hook(name, model, [helper], callback)`
- added: `controller.$hook(name, [helper], callback)`
- added: `String.parseInt2()` the method searchs number and converts it to integer
- added: `String.parseFloat2()` the method searchs number and converts it to float
- added: `@{title2('this content will be added to end of current title')}`
- added: `String.parseInt2()` the method searchs number and converts it to integer
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.sitemap_navigation" id="apidoc.element.total.js.sitemap_navigation">
        function <span class="apidocSignatureSpan">total.js.</span>sitemap_navigation
        <span class="apidocSignatureSpan">(parent, language)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sitemap_navigation = function (parent, language) {

	var key = REPOSITORY_SITEMAP + '_n_' + (parent || '') + '$' + (language || '');
	if (F.temporary.other[key])
		return F.temporary.other[key];

	var keys = Object.keys(F.routes.sitemap);
	var arr = [];
	var index = 0;

	for (var i = 0, length = keys.length; i &lt; length; i++) {
		var item = F.routes.sitemap[keys[i]];
		if ((parent &amp;&amp; item.parent !== parent) || (!parent &amp;&amp; item.parent))
			continue;

		var title = item.name;
		var url = item.url;

		if (item.localizeName)
			title = F.translate(language, title);

		if (item.localizeUrl)
			url = F.translate(language, url);

		arr.push({ id: parent || '', name: title, url: url, last: index === 0, first: item.parent ? false : true, selected: index ===
0, index: index, wildcard: item.wildcard, formatName: item.formatName, formatUrl: item.formatUrl });
		index++;
	}

	arr.quicksort('name');
	F.temporary.other[key] = arr;
	return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
======= 2.0.0

- added: new NoSQL version v4.0.0 is fully optimized for total.js
- added: `controller.invalid([status])` creates the ErrorBuilder instance and it responds in the next tick
- added: `controller.sitemap_url([id])` returns an URL from the sitemap
- added: `controller.sitemap_name([id])` returns a name/title from the sitemap
- added: `controller.sitemap_change(id, property, newvalue)` can change a current value in the sitemap
- added: `controller.<span class="apidocCodeKeywordSpan">sitemap_navigation</span>([parent], [langauge])` can get list of all items
 according to the parent
- added: `@{sitemap_url([id], [arg1], [arg2], [argN])}` returns an URL from the sitemap
- added: `@{sitemap_name([id], [arg1], [arg2], [argN])}` returns a name/title from the sitemap
- added: `@{sitemap_change(id, property, newvalue)}` can change a current value in the sitemap
- added: `@{sitemap_navigation([parent], [language])` can get list of all items according to the parent
- added: `/startup/` all scripts in this directory are executed only one (then are renamed automatically)
- added: `F.route()` supports a new flag: `cors` (creates a cors route) and `credentials` (enables cookies for cors)
- added: `ErrorBuilder.plain()` returns all errors as a simple string
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.snapshot" id="apidoc.element.total.js.snapshot">
        function <span class="apidocSignatureSpan">total.js.</span>snapshot
        <span class="apidocSignatureSpan">(url, filename, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">snapshot = function (url, filename, callback) {

	url = framework_internal.preparePath(url);
	if (!url.match(/^http:|https:/gi)) {
		if (url[0] !== '/')
			url = '/' + url;
		url = 'http://' + (F.ip === 'auto' ? '0.0.0.0' : F.ip) + ':' + F.port + url;
	}

	U.download(url, FLAGS_INSTALL, function(err, response) {

		if (err) {
			callback &amp;&amp; callback(err);
			callback = null;
			return;
		}

		var stream = Fs.createWriteStream(filename);
		response.pipe(stream);

		response.on('error', function(err) {
			callback &amp;&amp; callback(err);
			callback = null;
		});

		CLEANUP(stream, function() {
			DESTROY(stream);
			callback &amp;&amp; callback(null, filename);
			callback = null;
		});
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.stats.response.image` with count of processed images via GM or IM
- added: `F.stats.request.schema` with count of request to SchemaBuilder
- added: `String.prototype.parseTerminal([fields], fn(values, index, count, realIndex), [skipLines], [takeLines])`
- added: `TRACE(message, [name], [url], [ip])` is an alias for `F.trace()`
- added: `F.config['trace-console']` (default: `true`) shows tracing on the console
- added: `F.convert(name, type/function(val))` registers a new convertor (convertors uses QueryParser (GET/POST))
- added: `F.convert(obj)` performs convertor for an object
- added: `F.download(url, filename, [callback])` a new alias for `F.<span class="apidocCodeKeywordSpan">snapshot</span>()`
- added: `$$$([group], name)` for `GETSCHEMA([group], name)`
- added: configuration files supports options for all dependencies `module#mymodulename    (Object)   : { name: 'A custom options
 for dependency' }`
- added: `U.chunker()` added a new property `chunker.pages` with count of all stored pages
- added: `U.chunker()` added a new property `chunker.count` with count of all stored items
- added: `NEWOPERATION(name, fn(error, callback(response), value))` - registers a new operation (same as schemas)
- added: `OPERATION('name', function(err, response))` - executes an operation (same as schemas)
- added: `.flac` file extensions
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.source" id="apidoc.element.total.js.source">
        function <span class="apidocSignatureSpan">total.js.</span>source
        <span class="apidocSignatureSpan">(name, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">source = function (name, options, callback) {
	var obj = F.sources[name];
	if (obj || obj === null)
		return obj;
	var filename = U.combine(F.config['directory-source'], name + '.js');
	existsSync(filename) &amp;&amp; F.install('source', name, filename, options, callback, undefined, true);
	return F.sources[name] || null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `nosql.update(docToUpdate, [docToInsert])` when the document for updating doesn't exist then database performs insert
- updated: `nosql.modify(docToUpdate, [docToInsert])` when the document for updating doesn't exist then database performs insert
- updated: `nosql.binary` stores a creation date as meta info

- fixed: Image.stream()
- fixed: global variable `Image` (in a single library)
- fixed: JavaScript compressor (problem with Regular Expressions)
- fixed: custom paths in `F.model()` and `F.<span class="apidocCodeKeywordSpan">source</span>()`
- fixed: NoSQL removing documents (problem with different filters in one queue)
- fixed: fix view compiler error message
- fixed: `String.prototype.capitalize`

- removed: `nosql` doesn't support cache (`DatabaseBuilder.cache` is obsolete)
- removed: `F.refresh()` the method was useless
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.stop" id="apidoc.element.total.js.stop">
        function <span class="apidocSignatureSpan">total.js.</span>stop
        <span class="apidocSignatureSpan">(signal)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function (signal) {

	for (var m in F.workers) {
		var worker = F.workers[m];
		TRY(() =&gt; worker &amp;&amp; worker.kill &amp;&amp; worker.kill(signal || 'SIGTERM'));
	}

	F.emit('exit', signal);

	if (!F.isWorker &amp;&amp; typeof(process.send) === 'function')
		TRY(() =&gt; process.send('stop'));

	F.cache.stop();
	F.server &amp;&amp; F.server.close();

	setTimeout(() =&gt; process.exit(signal || 'SIGTERM'), TEST ? 2000 : 100);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	F.emit('exit', signal);

	if (!F.isWorker &amp;&amp; typeof(process.send) === 'function')
		TRY(() =&gt; process.send('stop'));

	F.cache.<span class="apidocCodeKeywordSpan">stop</span>();
	F.server &amp;&amp; F.server.close();

	setTimeout(() =&gt; process.exit(signal || 'SIGTERM'), TEST ? 2000 : 100);
	return F;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.test" id="apidoc.element.total.js.test">
        function <span class="apidocSignatureSpan">total.js.</span>test
        <span class="apidocSignatureSpan">(stop, names, cb)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">test = function (stop, names, cb) {

	if (stop === undefined)
		stop = true;

	if (typeof(names) === 'function') {
		cb = names;
		names = [];
	} else
		names = names || [];

	var counter = 0;
	var dir = F.config['directory-tests'];
	F.isTest = true;
	F.$configure_configs('config-test', true);

	var logger = function(name, start, err) {
		var time = Math.floor(new Date() - start) + ' ms';
		if (err) {
			F.isTestError = true;
			console.error('Failed [x] '.padRight(20, '.') + ' ' + name + ' &lt;' + (err.name.toLowerCase().indexOf('assert') !== -1 ? err.toString
() : err.stack) + '&gt; [' + time + ']');
		} else
			console.info('Passed '.padRight(20, '.') + ' ' + name + ' [' + time + ']');
	};

	var results = function() {
		if (!F.testsResults.length)
			return;
		console.log('');
		console.log('===================== RESULTS ======================');
		console.log('');
		F.testsResults.forEach((fn) =&gt; fn());
	};

	F.testsFiles = [];

	if (!F.testsResults)
		F.testsResults = [];

	if (!F.testsOK)
		F.testsOK = 0;

	if (!F.testsNO)
		F.testsNO = 0;

	U.ls(U.combine(dir), function(files) {
		files.forEach(function(filePath) {
			var name = Path.relative(U.combine(dir), filePath);
			var filename = filePath;
			var ext = U.getExtension(filename).toLowerCase();
			if (ext !== 'js')
				return;

			if (names.length &amp;&amp; names.indexOf(name.substring(0, name.length - 3)) === -1)
				return;

			var test = require(filename);
			var beg = new Date();

			try {
				var isRun = test.run !== undefined;
				var isInstall = test.isInstall !== undefined;
				var isInit = test.init !== undefined;
				var isLoad = test.load !== undefined;

				_test = name;

				if (test.disabled === true)
					return;

				F.testsPriority = test.priority === undefined ? F.testsFiles.length : test.priority;
				var fn = null;

				if (isRun)
					fn = test.run;
				else if (isInstall)
					fn = test.install;
				else if (isInit)
					fn = test.init;
				else if (isLoad)
					fn = test.loadname;

				if (fn === null)
					return;

				F.testsFiles.push({ name: name, index: F.testsFiles.length, fn: fn, priority: F.testsPriority });

				test.usage &amp;&amp; (function(test) {
					F.testsResults.push(() =&gt; test.usage(name));
				})(test);

				counter++;

			} catch (ex) {
				logger('Failed', beg, ex);
			}
		});

		_test = '';

		F.testsFiles.sort(function(a, b) {

			if (a.priority &gt; b.priority)
				return 1;

			if (a.priority &lt; b.priority)
				return -1;

			if (a.index &gt; b.index)
				return 1;

			if (a.index &lt; b.index)
				return -1;

			return 0;
		});

		setTimeout(function() {
			console.log('===================== TESTING ======================');
			counter &amp;&amp; console.log('');
			F.testing(stop, function() {

				console.log('');
				console.log('Passed ...', F.testsOK);
				console.log('Failed ...', F.testsNO);
				console.log('');

				results();
				F.isTest = false;
				console.log('');
				cb &amp;&amp; cb();
			});
		}, 100);
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						continue;
				} else if (reverse)
					continue;
			} else
				continue;
		} else if (isReg) {
			if (tv === 'string') {
				if (!custom.<span class="apidocCodeKeywordSpan">test</span>(schema.current)) {
					if (!reverse)
						continue;
				} else if (reverse)
					continue;
			} else
				continue;
		} else if (schema.custom !== custom) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.testing" id="apidoc.element.total.js.testing">
        function <span class="apidocSignatureSpan">total.js.</span>testing
        <span class="apidocSignatureSpan">(stop, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">testing = function (stop, callback) {

	if (stop === undefined)
		stop = true;


	// !IMPORTANT! F.isTestError is created dynamically
	//             F.testsFiles too

	if (!F.tests.length) {

		if (!F.testsFiles.length) {
			callback &amp;&amp; callback(F.isTestError === true);
			stop &amp;&amp; F.stop(F.isTestError ? 1 : 0);
			return F;
		}

		var file = F.testsFiles.shift();
		file &amp;&amp; file.fn.call(F, F);
		F.testing(stop, callback);
		return F;
	}

	var logger = function(name, start, err) {

		var time = Math.floor(new Date() - start) + ' ms';

		if (err) {
			F.isTestError = true;
			console.error('Failed [x] '.padRight(20, '.') + ' ' + name + ' &lt;' + (err.name.toLowerCase().indexOf('assert') !== -1 ? err.toString
() : err.stack) + '&gt; [' + time + ']');
		} else
			console.info('Passed '.padRight(20, '.') + ' ' + name + ' [' + time + ']');
	};

	var test = F.tests.shift();
	var key = test.name;
	var beg = new Date();

	if (test.run) {

		// Is used in: process.on('uncaughtException')
		F.testContinue = function(err) {
			logger(key, beg, err);
			if (err)
				F.testsNO++;
			else
				F.testsOK++;
			F.testing(stop, callback);
		};

		test.run.call(F, function() {
			logger(key, beg);
			F.testsOK++;
			F.testing(stop, callback);
		}, key);

		return F;
	}

	var response = function(res) {

		res.on('data', function(chunk) {
			if (this._buffer) {
				CONCAT[0] = this._buffer;
				CONCAT[1] = chunk;
				this._buffer = Buffer.concat(CONCAT);
			} else
				this._buffer = chunk;
		});

		res.on('end', function() {

			res.removeAllListeners();

			var cookie = res.headers['cookie'] || '';
			var cookies = {};

			if (cookie.length) {

				var arr = cookie.split(';');
				var length = arr.length;

				for (var i = 0; i &lt; length; i++) {
					var c = arr[i].trim().split('=');
					cookies[c.shift()] = unescape(c.join('='));
				}
			}

			try {
				test.callback(null, this._buffer ? this._buffer.toString(ENCODING) : '', res.statusCode, res.headers, cookies, key);
				logger(key, beg);
				F.testsOK++;
			} catch (e) {
				F.testsNO++;
				logger(key, beg, e);
			}

			F.testing(stop, callback);
		});

		res.resume();
	};

	var options = Parser.parse((test.url.startsWith('http://', true) || test.url.startsWith('https://', true) ? '' : 'http://' + F.
ip + ':' + F.port) + test.url);
	if (typeof(test.data) === 'function')
		test.data = test.data();

	if (typeof(test.data) !== 'string')
		test.data = (test.headers[HEADER_TYPE] || '').indexOf('json') !== -1 ? JSON.stringify(test.data) : Qs.stringify(test.data);

	var buf;

	if (test.data &amp;&amp; test.data.length) {
		buf = U.createBuffer(test.data);
		test.headers[HEADER_LENGTH] = buf.length;
	}

	options.method = test.method;
	options.headers = test.headers;

	var con = options.protocol === 'https:' ? require('https') : http;
	var req = test.method === 'POST' || test.method === 'PUT' || test.method === 'DELETE' || test.method === 'PATCH' ? con.request(
options, response) : con.get(options, response);

	req.on('error', function(e) {
		req.removeAllListeners();
		logger(key, beg, e);
		F.testsNO++;
		F.testing(stop, callback);
	});

	req.end(buf);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			callback &amp;&amp; callback(F.isTestError === true);
			stop &amp;&amp; F.stop(F.isTestError ? 1 : 0);
			return F;
		}

		var file = F.testsFiles.shift();
		file &amp;&amp; file.fn.call(F, F);
		F.<span class="apidocCodeKeywordSpan">testing</span>(stop, callback);
		return F;
	}

	var logger = function(name, start, err) {

		var time = Math.floor(new Date() - start) + ' ms';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.touch" id="apidoc.element.total.js.touch">
        function <span class="apidocSignatureSpan">total.js.</span>touch
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">touch = function (url) {
	if (url) {
		var key = createTemporaryKey(url);
		delete F.temporary.path[key];
		delete F.temporary.notfound[key];
	} else {
		F.temporary.path = {};
		F.temporary.notfound = {};
	}
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `Mail.try(smtp, options, callback)` tries to open a SMTP
- added: `F.datetime` contains current datetime and each 1 minute is the value increased
- added: `F.stats.other.restart` contains a new property with count of restarting
- added: `F.config.trace` for enable/disable tracing, `Boolean`, in a debug mode: `true`, release mode: `false`
- added: `F.trace(message, [name], [uri], [ip])`
- added: `controller.trace(message)`
- added: `req.split` contains splitted url
- added: `F.<span class="apidocCodeKeywordSpan">touch</span>(url/req)` for clearing internal cache of cached static files (it works
 only in release mode)
- added: `F.path.exists(path, callback(exist, size, isFile))` for check of existing file
- added: `U.chunker(name, [max])` creates the chunker (for streaming some items)
- added: `F.worker2(name, [args], [callback], [timeout])`
- added: `SchemaBuilderEntity.allow('fieldname1', 'fieldnameN')` - allows other keys out of defined fields
- added: `global.EMPTYOBJECT`
- added: `global.EMPTYARRAY`
- added: `global.SINGLETON(name)` returns a singleton object instance
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.trace" id="apidoc.element.total.js.trace">
        function <span class="apidocSignatureSpan">total.js.</span>trace
        <span class="apidocSignatureSpan">(message, name, uri, ip)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trace = function (message, name, uri, ip) {

	if (!F.config.trace)
		return F;

	F.$events.trace &amp;&amp; F.emit('trace', message, name, uri, ip);

	if (message instanceof framework_builders.ErrorBuilder)
		message = message.plain();
	else if (typeof(message) === 'object')
		message = JSON.stringify(message);

	F.datetime = new Date();
	var obj = { message: message, name: name, url: uri ? typeof(uri) === 'string' ? uri : Parser.format(uri) : undefined, ip: ip, date
: F.datetime };
	F.logger('traces', obj.message, 'url: ' + obj.url, 'source: ' + obj.name, 'ip: ' + obj.ip);

	F.config['trace-console'] &amp;&amp; console.log(F.datetime.format('yyyy-MM-dd HH:mm:ss'), '[trace]', message, '|', 'url: ' + obj.url, '
source: ' + obj.name, 'ip: ' + obj.ip);

	if (F.traces) {
		F.traces.push(obj);
		F.traces.length &gt; 50 &amp;&amp; F.traces.shift();
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `UPTODATE(type, url, [options], interval, [callback(err)])` more in docs
- added: `F.on('uptodate', function(type, name) {})` new event for up-to-date dependencies
- added: `F.stats.other.mail` with a count of sent emails
- added: `F.stats.response.errorBuilder` with count of sent ErrorBuilders
- added: `F.stats.response.image` with count of processed images via GM or IM
- added: `F.stats.request.schema` with count of request to SchemaBuilder
- added: `String.prototype.parseTerminal([fields], fn(values, index, count, realIndex), [skipLines], [takeLines])`
- added: `TRACE(message, [name], [url], [ip])` is an alias for `F.<span class="apidocCodeKeywordSpan">trace</span>()`
- added: `F.config['trace-console']` (default: `true`) shows tracing on the console
- added: `F.convert(name, type/function(val))` registers a new convertor (convertors uses QueryParser (GET/POST))
- added: `F.convert(obj)` performs convertor for an object
- added: `F.download(url, filename, [callback])` a new alias for `F.snapshot()`
- added: `$$$([group], name)` for `GETSCHEMA([group], name)`
- added: configuration files supports options for all dependencies `module#mymodulename    (Object)   : { name: 'A custom options
 for dependency' }`
- added: `U.chunker()` added a new property `chunker.pages` with count of all stored pages
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.translate" id="apidoc.element.total.js.translate">
        function <span class="apidocSignatureSpan">total.js.</span>translate
        <span class="apidocSignatureSpan">(language, text)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">translate = function (language, text) {

	if (!text) {
		text = language;
		language = undefined;
	}

	if (text[0] === '#' &amp;&amp; text[1] !== ' ')
		return F.resource(language, text.substring(1));

	var value = F.resource(language, 'T' + text.hash());
	return value ? value : text;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: response.throw500([error])
- added: response.throw501([problem])
- added: response.redirect(url, [permanent])
- added: view supports localization
- added: assertion testing --&gt; framework sets global.assert = require('assert')
- added: module/controller supports dependencies --&gt; exports.dependencies = ['moduleA', 'moduleB'];
- added: framework.dependencies (this object contains all installed total.js dependencies)
- added: controller.<span class="apidocCodeKeywordSpan">translate</span>([text]);
- added: framework.translate([language], text)
- added: @{body.} instead of @{post.}
- added: @{query.} instead of @{get.}
- added: @{files} uploaded files
- added: .manifest to accept list
- added: BINARY added --diff for creating difference between two resources
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.translator" id="apidoc.element.total.js.translator">
        function <span class="apidocSignatureSpan">total.js.</span>translator
        <span class="apidocSignatureSpan">(language, text)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">translator = function (language, text) {
	return framework_internal.parseLocalization(text, language);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: Array.prototype.extend(obj, [rewrite])
- added: SchemaBuilderEntity-&gt;constant(name, [value])
- added: Utils.minifyHTML(value);
- added: Utils.minifyScript(value);
- added: Utils.minifyStyle(value);
- added: FrameworkImage.measureSVG(buffer);
- added: auto-parsing SVG width/height
- added: framework.<span class="apidocCodeKeywordSpan">translator</span>([language], text);
- added: TRANSLATOR
- added: SUCCESS(boolean, [value]) returns { success: boolean, value: [value] }
- added: framework.onLocate(req, res) --&gt; this method sets the current localization
- added: new installation event framework.on('module#name');
- added: new installation event framework.on('controller#name');
- added: new installation event framework.on('model#name');
- added: new installation event framework.on('definition#name');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.uninstall" id="apidoc.element.total.js.uninstall">
        function <span class="apidocSignatureSpan">total.js.</span>uninstall
        <span class="apidocSignatureSpan">(type, name, options, skipEmit, packageName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">uninstall = function (type, name, options, skipEmit, packageName) {

	var obj = null;
	var k, v, tmp;

	if (type === 'route' || type === 'web') {
		k = typeof(name) === 'string' ? name.substring(0, 3) === 'id:' ? 'id' : 'urlraw' : 'execute';
		v = k === 'execute' ? name : k === 'id' ? name.substring(3).trim() : name;
		F.routes.web = F.routes.web.remove(k, v);
		F.$routesSort();
		F.consoledebug('uninstall', type + '#' + name);
		return F;
	}

	if (type === 'schedule') {
		F.clearSchedule(name);
		F.consoledebug('uninstall', type + '#' + name);
		return F;
	}

	var id = (packageName ? packageName + '@' : '') +  type + '#' + name;

	if (type === 'websocket') {
		k = typeof(name) === 'string' ? name.substring(0, 3) === 'id:' ? 'id' : 'urlraw' : 'onInitialize';
		v = k === 'onInitialize' ? name : k === 'id' ? name.substring(3).trim() : name;
		F.routes.websockets = F.routes.websockets.remove(k, v);
		F.$routesSort();
		F.consoledebug('uninstall', type + '#' + name);
		return F;
	}

	if (type === 'file') {
		k = typeof(name) === 'string' ? name.substring(0, 3) === 'id:' ? 'id' : 'urlraw' : 'execute';
		v = k === 'execute' ? name : k === 'id' ? name.substring(3).trim() : name;
		F.routes.files = F.routes.files.remove(k, v);
		F.consoledebug('uninstall', type + '#' + name);
		return F;
	}

	if (type === 'schema') {
		tmp = name.split('/');
		tmp.length === 2 ? framework_builders.remove(tmp[0], tmp[1]) : framework_builders.remove(undefined, tmp[0]);
		F.consoledebug('uninstall', type + '#' + name);
	} else if (type === 'mapping') {
		delete F.routes.mapping[name];
		F.consoledebug('uninstall', type + '#' + name);
	} else if (type === 'isomorphic') {
		var obj = F.isomorphic[name];
		if (obj.url)
			delete F.routes.mapping[F.$version(obj.url)];
		delete F.isomorphic[name];
		delete F.temporary.ready[type + '#' + name];
		F.consoledebug('uninstall', type + '#' + name);
	} else if (type === 'middleware') {

		if (!F.routes.middleware[name])
			return F;

		delete F.routes.middleware[name];
		delete F.dependencies[type + '.' + name];
		delete F.temporary.ready[type + '#' + name];
		F._length_middleware = Object.keys(F.routes.middleware).length;

		for (var i = 0, length = F.routes.web.length; i &lt; length; i++) {
			tmp = F.routes.web[i];
			if (tmp.middleware &amp;&amp; tmp.middleware.length)
				tmp.middleware = tmp.middleware.remove(name);
		}

		for (var i = 0, length = F.routes.websockets.length; i &lt; length; i++) {
			tmp = F.routes.websocket[i];
			if (tmp.middleware &amp;&amp; tmp.middleware.length)
				tmp.middleware = tmp.middleware.remove(name);
		}

		for (var i = 0, length = F.routes.files.length; i &lt; length; i++) {
			tmp = F.routes.files[i];
			if (tmp.middleware &amp;&amp; tmp.middleware.length)
				tmp.middleware = tmp.middleware.remove(name);
		}

		F.consoledebug('uninstall', type + '#' + name);

	} else if (type === 'package') {
		delete F.routes.packages[name];
		delete F.temporary.ready['package#' + name];
		F.uninstall('module', name, options, true);
		F.consoledebug('uninstall', type + '#' + name);
		return F;
	} else if (type === 'view' || type === 'precompile') {

		obj = F.routes.views[name];

		if (!obj)
			return F;

		delete F.routes.views[name];
		delete F.dependencies[type + '.' + name];
		delete F.temporary.ready[type + '#' + name];

		fsFileExists(obj.filename, function(e) {
			e &amp;&amp; Fs.unlink(obj.filename, NOOP);
			F.consoledebug('uninstall', type + '#' + name);
		});

	} else if (type === 'model' || type === 'source') {

		obj = type === 'model' ? F.models[name] : F.sources[name];

		if (!obj)
			return F;

		if (obj.id)
			delete require.cache[require.resolve(obj.id)];

		F.$uninstall(id);
		typeof(obj.uninstall) === 'function' &amp;&amp; obj.uninstall(options, name);

		if (type === 'model')
			delete F.models[name];
		else
			delete F.sources[name];

		delete F.dependencies[type + '.' + name];
		delete F.temporary.ready[type + '#' + name];
		F.consoledebug('uninstall', type + '#' + name);

	} else if (type === 'module' || type === 'controller') {

		var isModule = type === 'module';
		obj = isModule ? F.modules[name] : F.controllers[name]; ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: config['default-interval-websocket-ping'], default 1 (minutes)
- added: config['disable-strict-server-certificate-validation'], default true
- added: create automatically a ping message for websocket clients
- added: global INSTALL(type, name, declaration/url/function, [options], [callback]);
- added: global UNINSTALL(type, name, [options]);
- added: global CONTROLLER(name);
- added: framework.install(type, name, declaration/url/function, [options], [callback]);
- added: framework.<span class="apidocCodeKeywordSpan">uninstall</span>(type, name, [options]);
- added: framework.on('install', function(type, name) {});
- added: framework.on('uninstall', function(type, name) {});
- added: framework.on('route-add', function(type, route) {})
- added: module/model/source/controller: exports.name = 'name ';
- added: module/model/source/controller: exports.version = 'version';
- added: model/source: exports.install = function(framework, options, name) {}
- added: module/model/source/controller: exports.uninstall = function(framework, options) {}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.unlink" id="apidoc.element.total.js.unlink">
        function <span class="apidocSignatureSpan">total.js.</span>unlink
        <span class="apidocSignatureSpan">(arr, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">unlink = function (arr, callback) {

	if (typeof(arr) === 'string')
		arr = [arr];

	if (!arr.length) {
		callback &amp;&amp; callback();
		return F;
	}

	var filename = arr.shift();
	if (filename)
		Fs.unlink(filename, () =&gt; F.unlink(arr, callback));
	else
		callback &amp;&amp; callback();

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	url = framework_internal.preparePath(F.$version(url));

	if (url[0] !== '/')
		url = '/' + url;

	var filename = F.path.temp((F.id ? 'i-' + F.id + '_' : '') + 'merged_' + createTemporaryKey
(url));
	F.routes.merge[url] = { filename: filename.replace(/\.(js|css)/g, ext =&gt; '.min' + ext), files: arr };
	Fs.<span class="apidocCodeKeywordSpan">unlink</span>(F.routes.merge[url].filename, NOOP);
	F.owners.push({ type: 'merge', owner: _owner, id: url });
	return F;
};

F.mapping = function(url, path) {
	return F.map.apply(F, arguments);
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.uptodate" id="apidoc.element.total.js.uptodate">
        function <span class="apidocSignatureSpan">total.js.</span>uptodate
        <span class="apidocSignatureSpan">(type, url, options, interval, callback, next)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">uptodate = function (type, url, options, interval, callback, next) {

	if (typeof(options) === 'string' &amp;&amp; typeof(interval) !== 'string') {
		interval = options;
		options = null;
	}

	var obj = { type: type, name: '', url: url, interval: interval, options: options, count: 0, updated: F.datetime, errors: [], callback
: callback };

	if (!F.uptodates)
		F.uptodates = [];

	F.uptodates.push(obj);
	F.install(type, url, options, function(err, name) {
		err &amp;&amp; obj.errors.push(err);
		obj.name = name;
		obj.callback &amp;&amp; obj.callback(err, name);
	}, undefined, undefined, undefined, undefined, next);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
global.INCLUDE = global.SOURCE = (name, options) =&gt; F.source(name, options);
global.MODULE = (name) =&gt; F.module(name);
global.NOSQL = (name) =&gt; F.nosql(name);
global.NOBIN = (name) =&gt; F.nosql(name).binary;
global.NOCOUNTER = (name) =&gt; F.nosql(name).counter;
global.NOMEM = global.NOSQLMEMORY = (name, view) =&gt; global.framework_nosql.inmemory(name, view);
global.CONFIG = (name) =&gt; F.config[name];
global.UPTODATE = (type, url, options, interval, callback) =&gt; F.<span class="apidocCodeKeywordSpan">uptodate</span>(type, url
, options, interval, callback);
global.INSTALL = (type, name, declaration, options, callback) =&gt; F.install(type, name, declaration, options, callback);
global.UNINSTALL = (type, name, options) =&gt; F.uninstall(type, name, options);
global.RESOURCE = (name, key) =&gt; F.resource(name, key);
global.TRANSLATE = (name, key) =&gt; F.translate(name, key);
global.TRANSLATOR = (name, text) =&gt; F.translator(name, text);
global.TRACE = (message, name, uri, ip) =&gt; F.trace(message, name, uri, ip);
global.MODEL = (name) =&gt; F.model(name);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.usage" id="apidoc.element.total.js.usage">
        function <span class="apidocSignatureSpan">total.js.</span>usage
        <span class="apidocSignatureSpan">(detailed)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">usage = function (detailed) {
	var memory = process.memoryUsage();
	var cache = Object.keys(F.cache.items);
	var resources = Object.keys(F.resources);
	var controllers = Object.keys(F.controllers);
	var connections = Object.keys(F.connections);
	var workers = Object.keys(F.workers);
	var modules = Object.keys(F.modules);
	var isomorphic = Object.keys(F.isomorphic);
	var models = Object.keys(F.models);
	var helpers = Object.keys(F.helpers);
	var staticFiles = Object.keys(F.temporary.path);
	var staticNotfound = Object.keys(F.temporary.notfound);
	var staticRange = Object.keys(F.temporary.range);
	var redirects = Object.keys(F.routes.redirects);
	var defer = Object.keys(F.temporary.defer);
	var output = {};

	output.framework = {
		datetime: F.datetime,
		pid: process.pid,
		node: process.version,
		version: 'v' + F.version_header,
		platform: process.platform,
		processor: process.arch,
		uptime: Math.floor(process.uptime() / 60),
		memoryTotal: (memory.heapTotal / 1024 / 1024).floor(2),
		memoryUsage: (memory.heapUsed / 1024 / 1024).floor(2),
		memoryRss: (memory.rss / 1024 / 1024).floor(2),
		mode: F.config.debug ? 'debug' : 'release',
		port: F.port,
		ip: F.ip,
		directory: process.cwd()
	};

	var keys = Object.keys(U.queuecache);
	var pending = 0;
	for (var i = 0, length = keys.length; i &lt; length; i++)
		pending += U.queuecache[keys[i]].pending.length;

	output.counter = {
		resource: resources.length,
		controller: controllers.length,
		module: modules.length,
		isomorphic: isomorphic.length,
		cache: cache.length,
		worker: workers.length,
		connection: connections.length,
		schedule: F.schedules.length,
		helpers: helpers.length,
		error: F.errors.length,
		problem: F.problems.length,
		queue: pending,
		files: staticFiles.length,
		notfound: staticNotfound.length,
		streaming: staticRange.length,
		modificator:  F.modificators ? F.modificators.length : 0,
		viewphrases: $VIEWCACHE.length,
		uptodates: F.uptodates ? F.uptodates.length : 0,
		defer: defer.length
	};

	output.routing = {
		webpage: F.routes.web.length,
		sitemap: F.routes.sitemap ? Object.keys(F.routes.sitemap).length : 0,
		websocket: F.routes.websockets.length,
		file: F.routes.files.length,
		middleware: Object.keys(F.routes.middleware).length,
		redirect: redirects.length,
		mmr: Object.keys(F.routes.mmr).length
	};

	output.stats = F.stats;
	output.redirects = redirects;

	if (!detailed)
		return output;

	output.controllers = [];

	controllers.forEach(function(o) {
		var item = F.controllers[o];
		output.controllers.push({ name: o, usage: item.usage ? item.usage() : null });
	});

	output.connections = [];

	connections.forEach(function(o) {
		output.connections.push({ name: o, online: F.connections[o].online });
	});

	output.modules = [];

	modules.forEach(function(o) {
		var item = F.modules[o];
		output.modules.push({ name: o, usage: item.usage ? item.usage() : null });
	});

	output.models = [];

	models.forEach(function(o) {
		var item = F.models[o];
		output.models.push({ name: o, usage: item.usage ? item.usage() : null });
	});

	output.uptodates = F.uptodates;
	output.helpers = helpers;
	output.cache = cache;
	output.resources = resources;
	output.errors = F.errors;
	output.problems = F.problems;
	output.changes = F.changes;
	output.traces = F.traces;
	output.files = staticFiles;
	output.streaming = staticRange;
	output.other = Object.keys(F.temporary.other);
	return output;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: Utils.request(), Utils.download() supports `dnscache` flag for caching host IP
- updated: SchemaBuilderEntity.validation()
- updated: F.cache.set(key, value, expire, [sync])
- updated: NoSQL
- updated: (IMPORTANT): Websocket ping is disabled by default

- fixed: Image.resize()
- fixed: F.<span class="apidocCodeKeywordSpan">usage</span>() --&gt; fixed queue pendings
- fixed: (CRITICAL) SchemaBuilderEntity preparing (problem with prototypes)
- fixed: (CRITICAL) a package or module installation from the URL address
- fixed: (CRITICAL) response content-length
- fixed: framework.redirect()
- fixed: HTTP cache (added longer time)
- fixed: auto JSON parsing in `json` request
- fixed: Pagination.last() (Nikita Shmidt)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.usagesnapshot" id="apidoc.element.total.js.usagesnapshot">
        function <span class="apidocSignatureSpan">total.js.</span>usagesnapshot
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">usagesnapshot = function (filename) {
	Fs.writeFile(filename || F.path.root('usage.log'), JSON.stringify(F.usage(true), null, '    '), NOOP);
	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				delete F.test;
				delete F.testing;
				delete F.assert;
			}, 500);

			if (F.config['allow-debug']) {
				F.consoledebug('done');
				F.<span class="apidocCodeKeywordSpan">usagesnapshot</span>();
			}
		});
	});

	return F;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.use" id="apidoc.element.total.js.use">
        function <span class="apidocSignatureSpan">total.js.</span>use
        <span class="apidocSignatureSpan">(name, url, types, first)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">use = function (name, url, types, first) {
	if (!url &amp;&amp; !types) {
		if (name instanceof Array) {
			for (var i = 0; i &lt; name.length; i++)
				F.routes.request.push(name[i]);
		} else
			F.routes.request.push(name);
		F._length_request_middleware = F.routes.request.length;
		return F;
	}

	if (url instanceof Array) {
		types = url;
		url = null;
	}

	if (url === '*')
		url = null;

	var route;

	if (url)
		url = framework_internal.routeSplitCreate(framework_internal.preparePath(url.trim())).join('/');

	if (!types || types.indexOf('web') !== -1) {
		for (var i = 0, length = F.routes.web.length; i &lt; length; i++) {
			route = F.routes.web[i];
			if (url &amp;&amp; !route.url.join('/').startsWith(url))
				continue;
			!route.middleware &amp;&amp; (route.middleware = []);
			merge_middleware(route.middleware, name, first);
		}
	}

	if (!types || types.indexOf('file') !== -1 || types.indexOf('files') !== -1) {
		for (var i = 0, length = F.routes.files.length; i &lt; length; i++) {
			route = F.routes.files[i];
			if (url &amp;&amp; !route.url.join('/').startsWith(url))
				continue;
			!route.middleware &amp;&amp; (route.middleware = []);
			merge_middleware(route.middleware, name, first);
		}
	}

	if (!types || types.indexOf('websocket') !== -1 || types.indexOf('websockets') !== -1) {
		for (var i = 0, length = F.routes.websockets.length; i &lt; length; i++) {
			route = F.routes.websockets[i];
			if (url &amp;&amp; !route.url.join('/').startsWith(url))
				continue;
			!route.middleware &amp;&amp; (route.middleware = []);
			merge_middleware(route.middleware, name, first);
		}
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `Number.prototype.filesize([decimals], [type])` formatting file sizes
- added: `binary` importing CSV `-csv`
- added: `controller.autodestroy([callback])` only for websocket

- updated: `framework.view()`, `controller.view()` and `@{view()}` supports `=theme/viewname`
- updated: sitemap routing supports localization
- updated: `F.cache.fn(name, fnCache, fnCallback(value, isFromCache))` - added argument `isFromCache`
- updated: `F.<span class="apidocCodeKeywordSpan">use</span>(name, url, types, [first])` - `first` (default: `false`) argument adds
 a new middleware to the beginning of a route middleware
- updated: `String.toSearch()` - removes duplicates characters + better performance
- updated: `String.decode()` - improves decoding by Tom Spaccialbelli &lt;https://github.com/harry-stot&gt;

- fixed: (critical) NoSQL views
- fixed: (critical) view compilation in release mode (problem with just-in-time rendering)
- fixed: (critical) `F.eval()`
- fixed: (critical) parsing Date instance as Date instance in SchemaBuilder
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.useConfig" id="apidoc.element.total.js.useConfig">
        function <span class="apidocSignatureSpan">total.js.</span>useConfig
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">useConfig = function (name) {
	return F.$configure_configs(name, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

This version will work on `io.js` without problems.

- added: framework.schedule(date/string/number, fn);
- added: (IMPORTANT) a prevention for the HeaderSent exception
- added: new option `sleep` for framework.http() &amp; framework.https()
- added: request.ip caching
- added: framework.<span class="apidocCodeKeywordSpan">useConfig</span>(filename-configuration)

- updated: String.toSearch() removes non-word characters
- updated: Utils.trim() supports arrays

- fixed: framework.versionNode (updated for io.js)
- fixed: (CRITICAL) if the controller middleware does not exist framework throws exception correctly
- fixed: Utils.validation() (for Arrays)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.useSMTP" id="apidoc.element.total.js.useSMTP">
        function <span class="apidocSignatureSpan">total.js.</span>useSMTP
        <span class="apidocSignatureSpan">(smtp, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">useSMTP = function (smtp, options, callback) {

	if (typeof(options) === 'function') {
		callback = options;
		options = undefined;
	}

	Mail.try(smtp, options, function(err) {

		if (!err) {
			delete F.temporary['mail-settings'];
			F.config['mail-smtp'] = smtp;
			F.config['mail-smtp-options'] = options;
		}

		if (callback)
			callback(err);
		else if (err)
			F.error(err, 'F.useSMTP()', null);
	});

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.config['allow-defer']` enables deferring functions with `DEFER` keyword (default: false)
- added: `DEFER` feature
- added: `F.config['allow-debug']` starts a mini debugger
- added: `res.image_nocache()` alternative to `F.responseImageWithoutCache`
- added: `req.localize()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.<span class="apidocCodeKeywordSpan">useSMTP</span>(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.http('debug/release/test', { debug: true })` can start a mini debugger
- updated: `F.route()`, `F.websocket()` and `F.file()` --&gt; now returns `FrameworkRoute` instance instead of `Framework` instance
 (more in docs)
- updated: `F.load(debug, [types], [path])` supports a new type `service` which enables `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.view" id="apidoc.element.total.js.view">
        function <span class="apidocSignatureSpan">total.js.</span>view
        <span class="apidocSignatureSpan">(name, model, layout, repository, language)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">view = function (name, model, layout, repository, language) {

	var controller = EMPTYCONTROLLER;

	if (typeof(layout) === 'object') {
		var tmp = repository;
		repository = layout;
		layout = tmp;
	}

	controller.layoutName = layout || '';
	controller.language = language || '';
	controller.repository = typeof(repository) === 'object' &amp;&amp; repository ? repository : EMPTYOBJECT;

	var theme = U.parseTheme(name);
	if (theme) {
		controller.themeName = theme;
		name = prepare_viewname(name);
	} else if (this.onTheme)
		controller.themeName = this.onTheme(controller);
	else
		controller.themeName = undefined;

	return controller.view(name, model, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: addded a new argument `replacer` to `controller.send(message, [id], [blacklist], [replacer])` and `client.send(message
, [raw], [replacer])`

- removed: behaviours
- removed: restrictions
- removed: `TransformBuilder`
- removed: `F.config['allow-compatibility']` (not used)
- removed: `controller.date()` method has been useless
- removed: dynamic view compilation through `.<span class="apidocCodeKeywordSpan">view</span>()` method
- removed: `contorller.proxy()` in WebSocket controller

- fixed: JS minificator
- fixed: global alias `I` for isomorphic code
- fixed: streaming files in `debug` mode (removed cache)
- fixed: (critical) a bug with authorization in WebSocket
- fixed: `nosql_builder.join()` a problem with using `nosql_builder.first()` by @yexing (Xing Ye)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.viewCompile" id="apidoc.element.total.js.viewCompile">
        function <span class="apidocSignatureSpan">total.js.</span>viewCompile
        <span class="apidocSignatureSpan">(body, model, layout, repository, language)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">viewCompile = function (body, model, layout, repository, language) {

	var controller = EMPTYCONTROLLER;

	if (typeof(layout) === 'object') {
		var tmp = repository;
		repository = layout;
		layout = tmp;
	}

	controller.layoutName = layout || '';
	controller.language = language || '';
	controller.themeName = undefined;
	controller.repository = typeof(repository) === 'object' &amp;&amp; repository ? repository : EMPTYOBJECT;

	return controller.viewCompile(body, model, true);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: support for `/workflows` file (more in documentation)
- added: `ShcemaBuilderEntity.$exec(name, callback)` (more in documentation)
- added: `SchemaBuilder` supports new types `enum` and `keyvalue`
- added: `controller.$exec(name, [options], [callback])` (more in documentation)
- added: a new argument `description` to each SchemaBuilder `set` + `add` method e.g. `.setSave()`, `.addWorkflow()`, etc..
- added: `SchemaBuilder.meta` contains all registered handlers with their descriptions
- added: a property `controller.schema`
- added: `F.<span class="apidocCodeKeywordSpan">viewCompile</span>(body, [model], [layout], [repository], [language])` - dynamic
 views
- added: `controller.viewCompile(body, [model], [headers], [partial])` - dynamic views
- added: `{viewCompile(body, [model])}` - dynamic views
- added: `Controller` is a global variable for extending prototype
- added: `F.validators` with Regular Expressions
- added: View Engine supports `@{continue}` and `@{break}` command for looping
- added: `URLBuilder.make(fn)`
- added: `NOSQLMEMORY(dbName, [viewName])` enables in-memory database collection
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.wait" id="apidoc.element.total.js.wait">
        function <span class="apidocSignatureSpan">total.js.</span>wait
        <span class="apidocSignatureSpan">(name, enable)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wait = function (name, enable) {

	if (!F.waits)
		F.waits = {};

	if (enable !== undefined) {
		if (enable)
			F.waits[name] = true;
		else
			delete F.waits[name];
		F._length_wait = Object.keys(F.waits).length;
		return enable;
	}

	if (F.waits[name])
		delete F.waits[name];
	else {
		F.waits[name] = true;
		enable = true;
	}

	F._length_wait = Object.keys(F.waits).length;
	return enable === true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if (!name || typeof(name) === 'function') {
		fn = name;
		name = group;
		group = DEFAULT_SCHEMA;
	}

	if (fn)
		return framework_utils.<span class="apidocCodeKeywordSpan">wait</span>(() =&gt; schemas[group], err =&gt; fn(err, schemas[
group]), timeout || 20000);

	var g = schemas[group];
	return g ? g.get(name) : undefined;
};

exports.newschema = function(group, name) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.web" id="apidoc.element.total.js.web">
        function <span class="apidocSignatureSpan">total.js.</span>web
        <span class="apidocSignatureSpan">(url, funcExecute, flags, length, language)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">web = function (url, funcExecute, flags, length, language) {

	var name;
	var tmp;
	var viewname;
	var sitemap;

	if (url instanceof Array) {
		url.forEach(url =&gt; F.route(url, funcExecute, flags, length));
		return F;
	}

	var CUSTOM = typeof(url) === 'function' ? url : null;
	if (CUSTOM)
		url = '/';

	if (url[0] === '#') {
		url = url.substring(1);
		if (url !== '400' &amp;&amp; url !== '401' &amp;&amp; url !== '403' &amp;&amp; url !== '404' &amp;&amp; url !== '408' &amp;&amp; url !== '431' &amp;&amp; url !== '500' &amp;&amp; url
 !== '501') {

			var sitemapflags = funcExecute instanceof Array ? funcExecute : flags;
			if (!(sitemapflags instanceof Array))
				sitemapflags = EMPTYARRAY;

			sitemap = F.sitemap(url, true, language);
			if (sitemap) {

				name = url;
				url = sitemap.url;
				if (sitemap.wildcard)
					url += '*';

				if (sitemap.localizeUrl) {
					if (language === undefined) {
						var sitemaproutes = {};
						F.temporary.internal.resources.forEach(function(language) {
							var item = F.sitemap(sitemap.id, true, language);
							if (item.url &amp;&amp; item.url !== url)
								sitemaproutes[item.url] = { name: sitemap.id, language: language };
						});

						Object.keys(sitemaproutes).forEach(key =&gt; F.route('#' + sitemap.id, funcExecute, flags, length, sitemaproutes[key].language
));
					}
				}

			} else
				throw new Error('Sitemap item "' + url + '" not found.');
		} else
			url = '#' + url;
	}

	if (!url)
		url = '/';

	if (url[0] !== '[' &amp;&amp; url[0] !== '/')
		url = '/' + url;

	if (url.endsWith('/'))
		url = url.substring(0, url.length - 1);

	url = framework_internal.encodeUnicodeURL(url);

	var type = typeof(funcExecute);
	var index = 0;
	var urlcache = url;

	if (!name)
		name = url;

	if (type === 'object' || funcExecute instanceof Array) {
		tmp = funcExecute;
		funcExecute = flags;
		flags = tmp;
	}

	var priority = 0;
	var subdomain = null;

	priority = url.count('/');

	if (url[0] === '[') {
		index = url.indexOf(']');
		if (index &gt; 0) {
			subdomain = url.substring(1, index).trim().toLowerCase().split(',');
			url = url.substring(index + 1);
			priority += subdomain.indexOf('*') !== -1 ? 50 : 100;
		}
	}

	var isASTERIX = url.indexOf('*') !== -1;
	if (isASTERIX) {
		url = url.replace('*', '').replace('//', '/');
		priority = priority - 100;
	}

	var isRaw = false;
	var isNOXHR = false;
	var method = '';
	var schema;
	var workflow;
	var isMOBILE = false;
	var isJSON = false;
	var isDELAY = false;
	var isROBOT = false;
	var isBINARY = false;
	var isCORS = false;
	var isROLE = false;
	var novalidate = false;
	var middleware = null;
	var timeout;
	var options;
	var corsflags = [];
	var membertype = 0;
	var isGENERATOR = false;
	var description;
	var id = null;

	if (_flags) {
		if (!flags)
			flags = [];
		_flags.forEach(function(flag) {
			flags.indexOf(flag) === -1 &amp;&amp; flags.push(flag);
		});
	}

	if (flags) {

		tmp = [];
		var count = 0;

		for (var i = 0; i &lt; flags.length; i++) {

			var tt = typeof(flags[i]);

			if (tt === 'number') {
				timeout = flags[i];
				continue;
			}

			if (tt === 'object') {
				options = flags[i];
				continue;
			}

			var first = flags[i][0];

			if (first === '&amp;') {
				// resource (sitemap localization)
				// doesn't used now
				continue;
			}

			// ROUTE identificator
			if (flags[i].substring(0, 3) === 'id:') {
				id = flags[i].substring(3).trim();
				continue;
			}

			if (first === '#') {
				!middleware &amp;&amp; (middleware = []);
				middleware.push(flags[i].substring(1));
				continue;
			}

			if (first === '*') {

				workflow = flags[i].trim().substring(1);
				index = workflow.indexOf('--&gt;');

				if (index !== -1) {
					schema = workflow.substring(0, index).trim();
					workflow = workflow.substring(index + 3).trim();
				} else {
					schema = workflow;
					workflow = null;
				}
				schema = schema.replace(/\\/g, '/').split('/');

				if (schema.length === 1) {
					schema[1] = schema[0];
					schema[0] = 'default';
				}

				index = schema[1].indexOf('#');
				if (index !== -1) {
					schema[2] = schema[1].substring(index + 1).trim();
					schema[1] = schema[1].substring(0, index).trim(); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- improved: code (a lot)
- improved: preparing `SchemaBuilderEntity`
- improved: performance
- improved: a lot of code by Guy Fraser

======= 1.9.7

- added: `F.<span class="apidocCodeKeywordSpan">web</span>()` --&gt; alias to F.route()
- added: `F.cors(url, flags, credentials)`
- added: `config['default-response-maxage']`, default value `11111111`
- added: `U.get(obj, path)` reads a value from `obj` by path
- added: `U.set(obj, path, value)` sets a value into `obj` by path
- added: (IMPORTANT) `config['default-root']` can replace root relative path
- added: `FrameworkImage` --&gt; `instance.make(function(image) {})`
- added: `FrameworkImage` supports middleware `FrameworkImage.middleware(extension, fn)`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.websocket" id="apidoc.element.total.js.websocket">
        function <span class="apidocSignatureSpan">total.js.</span>websocket
        <span class="apidocSignatureSpan">(url, funcInitialize, flags, length)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">websocket = function (url, funcInitialize, flags, length) {

	var tmp;

	var CUSTOM = typeof(url) === 'function' ? url : null;
	if (CUSTOM)
		url = '/';

	if (url[0] === '#') {
		url = url.substring(1);
		var sitemap = F.sitemap(url, true);
		if (sitemap) {
			url = sitemap.url;
			if (sitemap.wildcard)
				url += '*';
		} else
			throw new Error('Sitemap item "' + url + '" not found.');
	}

	if (url === '')
		url = '/';

	// Unicode encoding
	url = framework_internal.encodeUnicodeURL(url);

	var priority = 0;
	var index = url.indexOf(']');
	var subdomain = null;
	var middleware;
	var allow;
	var options;
	var protocols;
	var id;

	priority = url.count('/');

	if (index &gt; 0) {
		subdomain = url.substring(1, index).trim().toLowerCase().split(',');
		url = url.substring(index + 1);
		priority += subdomain.indexOf('*') !== -1 ? 50 : 100;
	}

	var isASTERIX = url.indexOf('*') !== -1;
	if (isASTERIX) {
		url = url.replace('*', '').replace('//', '/');
		priority = (-10) - priority;
	}

	var url2 = framework_internal.preparePath(url.trim());
	var routeURL = framework_internal.routeSplitCreate(url2);
	var arr = [];
	var reg = null;
	var regIndex = null;
	var hash = url2.hash();
	var urlraw = U.path(url2) + (isASTERIX ? '*' : '');

	if (url.indexOf('{') !== -1) {

		routeURL.forEach(function(o, i) {
			if (o.substring(0, 1) !== '{')
				return;

			arr.push(i);

			var sub = o.substring(1, o.length - 1);

			if (sub[0] !== '/')
				return;

			var index = sub.lastIndexOf('/');
			if (index === -1)
				return;

			if (!reg) {
				reg = {};
				regIndex = [];
			}

			reg[i] = new RegExp(sub.substring(1, index), sub.substring(index + 1));
			regIndex.push(i);
		});

		priority -= arr.length;
	}

	if (typeof(allow) === 'string')
		allow = allow[allow];

	if (typeof(protocols) === 'string')
		protocols = protocols[protocols];

	tmp = [];

	var isJSON = false;
	var isBINARY = false;
	var isROLE = false;
	var count = 0;
	var membertype = 0;

	if (!flags)
		flags = [];

	_flags &amp;&amp; _flags.forEach(function(flag) {
		if (flags.indexOf(flag) === -1)
			flags.push(flag);
	});

	for (var i = 0; i &lt; flags.length; i++) {

		var flag = flags[i];
		var type = typeof(flag);

		// Middleware options
		if (type === 'object') {
			options = flags[i];
			continue;
		}

		// Length
		if (type === 'number') {
			length = flag;
			continue;
		}

		if (flag.substring(0, 3) === 'id:') {
			id = flag.substring(3).trim();
			continue;
		}

		// Middleware
		if (flag[0] === '#') {
			if (!middleware)
				middleware = [];
			middleware.push(flags[i].substring(1));
			continue;
		}

		flag = flag.toString().toLowerCase();

		// Origins
		if (flag.startsWith('http://') || flag.startsWith('https://')) {
			if (!allow)
				allow = [];
			allow.push(flag);
			continue;
		}

		count++;

		if (flag === 'json')
			isJSON = true;

		if (flag === 'binary')
			isBINARY = true;

		if (flag === 'raw') {
			isBINARY = false;
			isJSON = false;
		}

		if (flag[0] === '@') {
			isROLE = true;
			tmp.push(flag);
			continue;
		}

		if (flag === 'json' || flag === 'binary' || flag === 'raw')
			continue;

		switch (flag) {
			case 'authorize':
			case 'authorized':
			case 'logged':
				membertype = 1;
				priority++;
				tmp.push('authorize');
				break;
			case 'unauthorize':
			case 'unauthorized':
			case 'unlogged':
				membertype = 2;
				priority++;
				tmp.push('unauthorize');
				break;
			case 'get':
			case 'http':
			case 'https':
			case 'debug':
			case 'release':
				tmp.push(flag);
				break;
			default:
				if (!protocols)
					protocols = [];
				protocols.push(flag);
				break;
		}
	}

	flags = tmp;

	flags.indexOf('get') === -1 &amp;&amp; flags.unshift('get');
	priority += (count * 2);

	if (subdomain)
		F._length_subdomain_websocket++;

	var instance = new FrameworkRoute();
	var r = instance.route;
	r.id = id;
	r.urlraw = urlraw;
	r.hash = hash;
	r.controller = _controller ? _controller : 'unknown';
	r.owner = _owner;
	r.url = routeURL;
	r.param = arr;
	r.subdomain = subdomain;
	r.priority = priority;
	r.flags = flags || EMPTYARRAY;
	r.flags2 = flags_to_object(flags);
	r.onIni ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `res.image_nocache()` alternative to `F.responseImageWithoutCache`
- added: `req.localize()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.useSMTP(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.http('debug/release/test', { debug: true })` can start a mini debugger
- updated: `F.route()`, `F.<span class="apidocCodeKeywordSpan">websocket</span>()` and `F.file()` --&gt; now returns `FrameworkRoute
` instance instead of `Framework` instance (more in docs)
- updated: `F.load(debug, [types], [path])` supports a new type `service` which enables `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.worker" id="apidoc.element.total.js.worker">
        function <span class="apidocSignatureSpan">total.js.</span>worker
        <span class="apidocSignatureSpan">(name, id, timeout, args)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">worker = function (name, id, timeout, args) {

	var fork = null;
	var type = typeof(id);

	if (type === 'number' &amp;&amp; timeout === undefined) {
		timeout = id;
		id = null;
		type = 'undefined';
	}

	if (type === 'string')
		fork = F.workers[id];

	if (id instanceof Array) {
		args = id;
		id = null;
		timeout = undefined;
	}

	if (timeout instanceof Array) {
		args = timeout;
		timeout = undefined;
	}

	if (fork)
		return fork;

	// @TODO: dokoni
	var filename = name[0] === '@' ? F.path.package(name.substring(1)) : U.combine(F.config['directory-workers'], name);

	if (!args)
		args = [];

	fork = Child.fork(filename[filename.length - 3] === '.' ? filename : filename + '.js', args, HEADERS.workers);

	if (!id)
		id = name + '_' + new Date().getTime();

	fork.__id = id;
	F.workers[id] = fork;

	fork.on('exit', function() {
		var self = this;
		self.__timeout &amp;&amp; clearTimeout(self.__timeout);
		delete F.workers[self.__id];
		if (fork) {
			fork.removeAllListeners();
			fork = null;
		}
	});

	if (typeof(timeout) !== 'number')
		return fork;

	fork.__timeout = setTimeout(function() {
		fork &amp;&amp; fork.kill('SIGKILL');
	}, timeout);

	return fork;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: new config item `allow-cache-snapshot` - to prevent cache when the framework is restarted

- updated: `SINGLETON(name, [def = {}])` about `def` argument
- updated: `debug.js` adds timestamps
- updated: `F.redirect()` can contain a relative URL of file
- updated: NoSQL embedded parser, dates are parsed as date object
- updated: `Pagination.next()`, `Pagination.prev()`, `Pagination.last()` and `Pagination.first()` supports new arguments `.html([
link_inner_html], [class_name])`
- updated: `F.<span class="apidocCodeKeywordSpan">worker</span>()` supports packages `F.worker('@eshop/myworker-script'
;)`
- updated: `FrameworkImage` when the instance contains no command then `.minify()` method is performed automatically for preventing
 of empty response
- updated: `F.config['static-accepts']` removed dots from all extensions

- improved: `@{href(key, value)}` performance
- improved: Total Package Manager `$ tpm --help`
- improved: FrameworkImage command building
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.worker2" id="apidoc.element.total.js.worker2">
        function <span class="apidocSignatureSpan">total.js.</span>worker2
        <span class="apidocSignatureSpan">(name, args, callback, timeout)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">worker2 = function (name, args, callback, timeout) {

	if (typeof(args) === 'function') {
		timeout = callback;
		callback = args;
		args = undefined;
	} else if (typeof(callback) === 'number') {
		var tmp = timeout;
		timeout = callback;
		callback = tmp;
	}

	if (args &amp;&amp; !(args instanceof Array))
		args = [args];

	var fork = F.worker(name, name, timeout, args);
	if (fork.__worker2)
		return fork;

	fork.__worker2 = true;
	fork.on('error', function(e) {
		callback &amp;&amp; callback(e);
		callback = null;
	});

	fork.on('exit', function() {
		callback &amp;&amp; callback();
		callback = null;
	});

	return fork;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.config.trace` for enable/disable tracing, `Boolean`, in a debug mode: `true`, release mode: `false`
- added: `F.trace(message, [name], [uri], [ip])`
- added: `controller.trace(message)`
- added: `req.split` contains splitted url
- added: `F.touch(url/req)` for clearing internal cache of cached static files (it works only in release mode)
- added: `F.path.exists(path, callback(exist, size, isFile))` for check of existing file
- added: `U.chunker(name, [max])` creates the chunker (for streaming some items)
- added: `F.<span class="apidocCodeKeywordSpan">worker2</span>(name, [args], [callback], [timeout])`
- added: `SchemaBuilderEntity.allow('fieldname1', 'fieldnameN')` - allows other keys out of defined fields
- added: `global.EMPTYOBJECT`
- added: `global.EMPTYARRAY`
- added: `global.SINGLETON(name)` returns a singleton object instance
- added: `controller.referrer` returns a value from `req.headers['referer']`
- added: `controller.author(value)` can change `&lt;meta name="author"`
- added: `@{author(value)}` can change `&lt;meta name="author"`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.wtf" id="apidoc.element.total.js.wtf">
        function <span class="apidocSignatureSpan">total.js.</span>wtf
        <span class="apidocSignatureSpan">(message, name, uri, ip)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wtf = function (message, name, uri, ip) {
	F.$events.problem &amp;&amp; F.emit('problem', message, name, uri, ip);

	if (message instanceof framework_builders.ErrorBuilder)
		message = message.plain();
	else if (typeof(message) === 'object')
		message = JSON.stringify(message);

	var obj = { message: message, name: name, url: uri ? typeof(uri) === 'string' ? uri : Parser.format(uri) : undefined, ip: ip };
	F.logger('problems', obj.message, 'url: ' + obj.url, 'source: ' + obj.name, 'ip: ' + obj.ip);

	if (F.problems) {
		F.problems.push(obj);
		F.problems.length &gt; 50 &amp;&amp; F.problems.shift();
	}

	return F;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


































































































































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.total.js.builders" id="apidoc.module.total.js.builders">module total.js.builders</a></h1>


    <h2>
        <a href="#apidoc.element.total.js.builders.ErrorBuilder" id="apidoc.element.total.js.builders.ErrorBuilder">
        function <span class="apidocSignatureSpan">total.js.builders.</span>ErrorBuilder
        <span class="apidocSignatureSpan">(onResource)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ErrorBuilder(onResource) {

	this.items = [];
	this.transformName = transforms['error_default'];
	this.onResource = onResource;
	this.resourceName = F.config['default-errorbuilder-resource-name'];
	this.resourcePrefix = F.config['default-errorbuilder-resource-prefix'] || '';
	this.isResourceCustom = false;
	this.count = 0;
	this.replacer = [];
	this.isPrepared = false;
	this.contentType = 'application/json';

	// Hidden: when the .push() contains a classic Error instance
	// this.unexpected;

	!onResource &amp;&amp; this._resource();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.Page" id="apidoc.element.total.js.builders.Page">
        function <span class="apidocSignatureSpan">total.js.builders.</span>Page
        <span class="apidocSignatureSpan">(url, page, selected, enabled)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Page(url, page, selected, enabled) {
	this.url = url;
	this.page = page;
	this.selected = selected;
	this.enabled = enabled;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.Pagination" id="apidoc.element.total.js.builders.Pagination">
        function <span class="apidocSignatureSpan">total.js.builders.</span>Pagination
        <span class="apidocSignatureSpan">(items, page, max, format)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Pagination(items, page, max, format) {
	this.isNext = false;
	this.isPrev = false;
	this.isFirst = false;
	this.isLast = false;
	this.nextPage = 0;
	this.prevPage = 0;
	this.lastPage = 0;
	this.firstPage = 0;
	this.items = Math.max(0, +items);
	this.count = 0;
	this.skip = 0;
	this.take = 0;
	this.page = 0;
	this.max = 0;
	this.visible = false;
	this.format = format || '?page={0}';
	this.refresh(items, page, max);
	this.transformName = transforms['pagination_default'];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.RESTBuilder" id="apidoc.element.total.js.builders.RESTBuilder">
        function <span class="apidocSignatureSpan">total.js.builders.</span>RESTBuilder
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function RESTBuilder(url) {
	this.$url = url;
	this.$headers = { 'User-Agent': 'Total.js/v' + F.version_header, Accept: 'application/json, text/plain, text/plain, text/xml' };
	this.$method = 'get';
	this.$timeout = 10000;
	this.$type = 0; // 0 = query, 1 = json, 2 = urlencode, 3 = raw
	this.$schema;
	this.$length = 0;
	this.$transform = transforms['restbuilder_default'];

	// this.$flags;
	// this.$data = {};
	// this.$nodnscache = true;
	// this.$cache_expire;
	// this.$cache_nocache;
	// this.$redirect
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.SchemaBuilder" id="apidoc.element.total.js.builders.SchemaBuilder">
        function <span class="apidocSignatureSpan">total.js.builders.</span>SchemaBuilder
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function SchemaBuilder(name) {
	this.name = name;
	this.collection = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.TransformBuilder" id="apidoc.element.total.js.builders.TransformBuilder">
        function <span class="apidocSignatureSpan">total.js.builders.</span>TransformBuilder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function TransformBuilder() {}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.UrlBuilder" id="apidoc.element.total.js.builders.UrlBuilder">
        function <span class="apidocSignatureSpan">total.js.builders.</span>UrlBuilder
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function UrlBuilder() {
	this.builder = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: framework.redirect(url, redirectTo, [permanent]) supports relative redirects
- updated: Utils.request(), timeout is possible to add as cookie, headers or encoding
- updated: Utils.request() returns EventEmitter (begin, end, data(chunk, percentage))
- updated: Utils.request() supports auto-redirect if response status code is 301
- updated: Utils.download() returns EventEmitter (begin, end, data(chunk, percentage))
- updated: Controller.proxy() - returns EventEmitter (begin, end, data(chunk, percentage))
- updated: Array.wait(fnItem, fnCallback, removeItems) - default: function doesn't remove items
- updated: Builders.<span class="apidocCodeKeywordSpan">UrlBuilder</span>() -&gt; toString([skipEmpty])
- updated: Number.format([decimals], [separator], [decimalSeparator])
- updated: Date.format([format]) - format is optional, function returns ISO format without "Z"
- updated: response.send(), response.json() - supports ErrorBuilder
- updated: framework.error() (returns a wrapped delegate if error is undefined)
- updated: controller.baa([message]) - read documentation
- updated: Array.where(), Array.find(), Array.remove() - added a new functionality
- updated: @{view(name, [model], [expire], [expire-key])}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.create" id="apidoc.element.total.js.builders.create">
        function <span class="apidocSignatureSpan">total.js.builders.</span>create
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (name) {
	return exports.defaults(name);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	if (typeof(options) === 'function') {
		callback = options;
		options = undefined;
	}

	!callback &amp;&amp; (callback = function(){});
	return this.transform(name, this.<span class="apidocCodeKeywordSpan">create</span>(), options, callback, true, controller);
};

SchemaBuilderEntity.prototype.$process = function(arg, model, type, name, builder, response, callback) {

	var self = this;

	if (arg.length &gt; 1 || (response instanceof Error || response instanceof ErrorBuilder)) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.defaults" id="apidoc.element.total.js.builders.defaults">
        function <span class="apidocSignatureSpan">total.js.builders.</span>defaults
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">defaults = function (name) {
	if (schemas[DEFAULT_SCHEMA] === undefined)
		return null;
	var schema = schemas[DEFAULT_SCHEMA].get(name);
	return schema === undefined ? null : schema.default();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
* Create default object according to schema
* @param  {String} name Schema name.
* @return {Object}
*/
exports.create = function(name) {
	return exports.<span class="apidocCodeKeywordSpan">defaults</span>(name);
};

/**
* Create default object according to schema
* @param  {String} name Schema name.
* @return {Object}
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.eachschema" id="apidoc.element.total.js.builders.eachschema">
        function <span class="apidocSignatureSpan">total.js.builders.</span>eachschema
        <span class="apidocSignatureSpan">(group, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">eachschema = function (group, fn) {

	if (fn === undefined) {
		fn = group;
		group = undefined;
	}

	var groups = group ? [group] : Object.keys(schemas);
	for (var i = 0, length = groups.length; i &lt; length; i++) {
		var schema = schemas[groups[i]];
		if (!schema)
			continue;
		var collection = Object.keys(schema.collection);
		for (var j = 0, jl = collection.length; j &lt; jl; j++)
			fn(schema.name, schema.collection[collection[j]].name, schema.collection[collection[j]]);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		return;

	Object.keys(operations).forEach(function(key) {
		if (operations[key].$owner === owner)
			delete operations[key];
	});

	exports.<span class="apidocCodeKeywordSpan">eachschema</span>(function(group, name, schema) {
		schema.owner === owner &amp;&amp; schema.destroy();
	});
};

exports.restart = function() {
	schemas = {};
	operations = {};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.getschema" id="apidoc.element.total.js.builders.getschema">
        function <span class="apidocSignatureSpan">total.js.builders.</span>getschema
        <span class="apidocSignatureSpan">(group, name, fn, timeout)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getschema = function (group, name, fn, timeout) {

	if (!name || typeof(name) === 'function') {
		fn = name;
		name = group;
		group = DEFAULT_SCHEMA;
	}

	if (fn)
		return framework_utils.wait(() =&gt; schemas[group], err =&gt; fn(err, schemas[group]), timeout || 20000);

	var g = schemas[group];
	return g ? g.get(name) : undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

RESTBuilder.prototype.auth = function(user, password) {
	this.$headers['authorization'] = 'Basic ' + framework_utils.createBuffer(user + ':' + password).toString
('base64');
	return this;
};

RESTBuilder.prototype.schema = function(group, name) {
	this.$schema = exports.<span class="apidocCodeKeywordSpan">getschema</span>(group, name);
	return this;
};

RESTBuilder.prototype.noDnsCache = function() {
	this.$nodnscache = true;
	this.$flags = null;
	return this;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.isJoin" id="apidoc.element.total.js.builders.isJoin">
        function <span class="apidocSignatureSpan">total.js.builders.</span>isJoin
        <span class="apidocSignatureSpan">(collection, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isJoin = function (collection, value) {
	if (!value)
		return false;
	if (value[0] === '[')
		return true;
	if (collection === undefined)
		return false;
	return collection[value] !== undefined;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (value === undefined) {
			error.add(pluspath + name, '@', current + name);
			continue;
		} else if (type === 'function')
			value = model[name]();

		if (type !== 'object') {
			if (Builders.<span class="apidocCodeKeywordSpan">isJoin</span>(collection, name))
				type = 'object';
		}

		if (type === 'object' &amp;&amp; !exports.isDate(value)) {
			entity = collection[schema];

			if (entity) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.isSchema" id="apidoc.element.total.js.builders.isSchema">
        function <span class="apidocSignatureSpan">total.js.builders.</span>isSchema
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isSchema = function (obj) {
	return obj instanceof SchemaInstance;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Controller.prototype.$query = function(helper, callback) {
	this.getSchema().query(helper, callback, this);
	return this;
};

Controller.prototype.$save = function(helper, callback) {
	var self = this;
	if (framework_builders.<span class="apidocCodeKeywordSpan">isSchema</span>(self.body)) {
		self.body.$$controller = self;
		self.body.$save(helper, callback);
	} else {
		var model = self.getSchema().default();
		model.$$controller = self;
		model.$save(helper, callback);
	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.newschema" id="apidoc.element.total.js.builders.newschema">
        function <span class="apidocSignatureSpan">total.js.builders.</span>newschema
        <span class="apidocSignatureSpan">(group, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">newschema = function (group, name) {

	if (!group)
		group = DEFAULT_SCHEMA;

	if (!schemas[group])
		schemas[group] = new SchemaBuilder(group);

	var o = schemas[group].create(name);
	o.owner = F.$owner();
	return o;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

global.NEWSCHEMA = function(group, name) {
	if (!name) {
		name = group;
		group = 'default';
	}
	return framework_builders.<span class="apidocCodeKeywordSpan">newschema</span>(group, name);
};

global.CLEANUP = function(stream, callback) {

	var fn = function() {
		FINISHED(stream, function() {
			DESTROY(stream);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.prepare" id="apidoc.element.total.js.builders.prepare">
        function <span class="apidocSignatureSpan">total.js.builders.</span>prepare
        <span class="apidocSignatureSpan">(name, model)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">prepare = function (name, model) {
	if (schemas[DEFAULT_SCHEMA] === undefined)
		return null;
	var schema = schemas[DEFAULT_SCHEMA].get(name);
	return schema === undefined ? null : schema.prepare(model);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	if (typeof(filter) === 'function') {
		var tmp = callback;
		callback = filter;
		filter = tmp;
	}

	var output = this.<span class="apidocCodeKeywordSpan">prepare</span>(model);
	if (novalidate) {
		callback &amp;&amp; callback(null, output, argument);
		return output;
	}

	var builder = this.validate(output, undefined, undefined, undefined, filter);
	if (builder.hasError()) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.remove" id="apidoc.element.total.js.builders.remove">
        function <span class="apidocSignatureSpan">total.js.builders.</span>remove
        <span class="apidocSignatureSpan">(group, name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">remove = function (group, name) {
	if (name) {
		var g = schemas[group || DEFAULT_SCHEMA];
		g &amp;&amp; g.remove(name);
	} else
		delete schemas[group];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	} else {
		delete schemas[this.name];
		this.collection = null;
	}
};

SchemaBuilder.prototype.destroy = function(name) {
	return this.<span class="apidocCodeKeywordSpan">remove</span>(name);
};

function SchemaBuilderEntity(parent, name) {
	this.parent = parent;
	this.name = name;
	this.primary;
	this.trim = true;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.restart" id="apidoc.element.total.js.builders.restart">
        function <span class="apidocSignatureSpan">total.js.builders.</span>restart
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restart = function () {
	schemas = {};
	operations = {};
	Object.keys(transforms).forEach(function(key) {
		if (key.indexOf('_') === -1)
			transforms[key] = {};
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `@{sitemap_navigation([parent], [language])` can get list of all items according to the parent
- added: `/startup/` all scripts in this directory are executed only one (then are renamed automatically)
- added: `F.route()` supports a new flag: `cors` (creates a cors route) and `credentials` (enables cookies for cors)
- added: `ErrorBuilder.plain()` returns all errors as a simple string
- added: `Array.findItem()` alias to `Array.find()`
- added: `Number.async(fn(index, next), callback)` for asynchronous operations
- added: `UID()` for generating unique identificators (contains minimum 18 chars)
- added: `F.<span class="apidocCodeKeywordSpan">restart</span>()` for restarting app
- added: `F.on('restart')`
- added: quicksort algorithm for sorting arrays
- added: `Array.quicksort(property_name, [asc], [maxlength])` for sorting arrays
- added: `String.removeTags()` by @harry-stot
- added: F.nosql(name) + NOSQL(name) --&gt; alias for NoSQL embedded database (it can be used with e.g. SQL Agent)
- added: modificators can handle `INSTALL('view', ...)`
- added: `String.isPhone()` for phone number validation
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.uninstall" id="apidoc.element.total.js.builders.uninstall">
        function <span class="apidocSignatureSpan">total.js.builders.</span>uninstall
        <span class="apidocSignatureSpan">(owner)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">uninstall = function (owner) {

	if (!owner)
		return;

	Object.keys(operations).forEach(function(key) {
		if (operations[key].$owner === owner)
			delete operations[key];
	});

	exports.eachschema(function(group, name, schema) {
		schema.owner === owner &amp;&amp; schema.destroy();
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: config['default-interval-websocket-ping'], default 1 (minutes)
- added: config['disable-strict-server-certificate-validation'], default true
- added: create automatically a ping message for websocket clients
- added: global INSTALL(type, name, declaration/url/function, [options], [callback]);
- added: global UNINSTALL(type, name, [options]);
- added: global CONTROLLER(name);
- added: framework.install(type, name, declaration/url/function, [options], [callback]);
- added: framework.<span class="apidocCodeKeywordSpan">uninstall</span>(type, name, [options]);
- added: framework.on('install', function(type, name) {});
- added: framework.on('uninstall', function(type, name) {});
- added: framework.on('route-add', function(type, route) {})
- added: module/model/source/controller: exports.name = 'name ';
- added: module/model/source/controller: exports.version = 'version';
- added: model/source: exports.install = function(framework, options, name) {}
- added: module/model/source/controller: exports.uninstall = function(framework, options) {}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.validate" id="apidoc.element.total.js.builders.validate">
        function <span class="apidocSignatureSpan">total.js.builders.</span>validate
        <span class="apidocSignatureSpan">(name, model, resourcePrefix, resourceName)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate = function (name, model, resourcePrefix, resourceName) {
	var schema = schemas[DEFAULT_SCHEMA];
	if (schema === undefined)
		return null;
	schema = schema.get(name);
	return schema === undefined ? null : schema.validate(model, resourcePrefix, resourceName);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		if (!s) {
			F.error(new Error('Schema "' + schema.raw + '" not found (validation).'));
			continue;
		}

		if (!schema.isArray) {
			(model[key] != null || schema.required) &amp;&amp; s.<span class="apidocCodeKeywordSpan">validate</span>(model[key], resourcePrefix
, resourceName, builder, filter, path + key, j);
			continue;
		}

		var arr = model[key];
		for (var j = 0, jl = arr.length; j &lt; jl; j++)
			(model[key][j] != null || schema.required) &amp;&amp; s.validate(model[key][j], resourcePrefix, resourceName, builder, filter
, path + key + '[' + j + ']', j);
	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.builders.validation" id="apidoc.element.total.js.builders.validation">
        function <span class="apidocSignatureSpan">total.js.builders.</span>validation
        <span class="apidocSignatureSpan">(name, properties, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validation = function (name, properties, fn) {

	if (schemas[DEFAULT_SCHEMA] === undefined)
		return EMPTYARRAY;

	var schema = schemas[DEFAULT_SCHEMA].get(name);
	if (schema === undefined)
		return EMPTYARRAY;

	if (fn instanceof Array &amp;&amp; typeof(properties) === 'function') {
		var tmp = fn;
		fn = properties;
		properties = tmp;
	}

	if (typeof(fn) === 'function') {
		schema.onValidate = fn;
		if (properties)
			schema.properties = properties;
		else
			schema.properties = Object.keys(schema.schema);
		return true;
	}

	if (!fn) {
		var validator = schema.properties;
		if (validator === undefined)
			return Object.keys(schema.schema);
		return validator || [];
	}

	schema.onValidate = fn;
	return fn;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: Image.miniature(w,h,color,[filter]) --&gt; added filter
- updated: binary supports translation files `--translate my-localization.txt`
- updated: framework.mail() --&gt; returns MailMessage
- updated: controller.mail() --&gt; returns MailMessage
- updated: SchemaBuilderEntity.$async(callback, [return-only-this-index])
- updated: translation @(#KEY) (direct reading) or @(TEXT TO TRANSLATE) (hash reading)
- updated: Utils.request(), Utils.download() supports `dnscache` flag for caching host IP
- updated: SchemaBuilderEntity.<span class="apidocCodeKeywordSpan">validation</span>()
- updated: F.cache.set(key, value, expire, [sync])
- updated: NoSQL
- updated: (IMPORTANT): Websocket ping is disabled by default

- fixed: Image.resize()
- fixed: F.usage() --&gt; fixed queue pendings
- fixed: (CRITICAL) SchemaBuilderEntity preparing (problem with prototypes)
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.total.js.image" id="apidoc.module.total.js.image">module total.js.image</a></h1>


    <h2>
        <a href="#apidoc.element.total.js.image.Image" id="apidoc.element.total.js.image.Image">
        function <span class="apidocSignatureSpan">total.js.image.</span>Image
        <span class="apidocSignatureSpan">(filename, useImageMagick, width, height)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Image(filename, useImageMagick, width, height) {
	var type = typeof(filename);
	this.width = width;
	this.height = height;
	this.builder = [];
	this.filename = type === 'string' ? filename : null;
	this.currentStream = type === 'object' ? filename : null;
	this.isIM = useImageMagick == null ? F.config['default-image-converter'] === 'im' : useImageMagick;
	this.outputType = type === 'string' ? framework_utils.getExtension(filename) : 'jpg';
	this.islimit = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.Picture" id="apidoc.element.total.js.image.Picture">
        function <span class="apidocSignatureSpan">total.js.image.</span>Picture
        <span class="apidocSignatureSpan">(filename, useImageMagick, width, height)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Image(filename, useImageMagick, width, height) {
	var type = typeof(filename);
	this.width = width;
	this.height = height;
	this.builder = [];
	this.filename = type === 'string' ? filename : null;
	this.currentStream = type === 'object' ? filename : null;
	this.isIM = useImageMagick == null ? F.config['default-image-converter'] === 'im' : useImageMagick;
	this.outputType = type === 'string' ? framework_utils.getExtension(filename) : 'jpg';
	this.islimit = false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.clear" id="apidoc.element.total.js.image.clear">
        function <span class="apidocSignatureSpan">total.js.image.</span>clear
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clear = function () {
	CACHE = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: View Engine supports `@{continue}` and `@{break}` command for looping
- added: `URLBuilder.make(fn)`
- added: `NOSQLMEMORY(dbName, [viewName])` enables in-memory database collection
- added: NoSQL `nosql.upsert(doc)` inserts a new document where document doesn't exist in DB
- added: NoSQL `nosql.release()` for releasing of in-memory DB (framework clears unused in-memory databases automatically)
- added: NoSQL `nosql.scalar(type, dbName, [view])` performs scalar operation by type: `sum`, `min`, `max`, `avg`, `count` or `group
`
- added: NoSQL `nosql.binary.all(callback)` browses all stored files
- added: NoSQL `nosql.binary.<span class="apidocCodeKeywordSpan">clear</span>(callback)`removes all stored files
- added: NoSQL `DatabaseBuilder.random()`
- added: NoSQL `DatabaseBuilder.join(field, dbName, [view])` returns `DatabaseBuilder` with updated `.where(field_JoinedDB, field_currentdb
)` method (it supports `.fields()` too)
- added: NoSQL `DatabaseBuilder.join()` supports scalar operation too, e.g. `nosql.join(...).scalar('count')`
- added: NoSQL `DatabaseBuilder.scalar(type, [field])` - types: `sum`, `min`, `max`, `avg`, `count` or `group`
- added: NoSQL `DatabaseBuilder.month(field, [operator], value)` filters `Date` fields according its month number
- added: NoSQL `DatabaseBuilder.year(field, [operator], value)` filters `Date` fields according its year number
- added: NoSQL `DatabaseBuilder.day(field, [operator], value)` filters `Date` fields according its day number
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.init" id="apidoc.element.total.js.image.init">
        function <span class="apidocSignatureSpan">total.js.image.</span>init
        <span class="apidocSignatureSpan">(filename, imageMagick, width, height)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (filename, imageMagick, width, height) {
	return new Image(filename, imageMagick, width, height);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (!types || types.indexOf('workflows') !== -1)
			F.$configure_workflows();

		if (!types || types.indexOf('sitemap') !== -1)
			F.$cofnigure_sitemap();

		F.consoledebug('init');
		F.cache.<span class="apidocCodeKeywordSpan">init</span>();
		F.emit('init');
		F.isLoaded = true;

		F.$load(types, directory, function() {
			setTimeout(function() {

				try {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.load" id="apidoc.element.total.js.image.load">
        function <span class="apidocSignatureSpan">total.js.image.</span>load
        <span class="apidocSignatureSpan">(filename, imageMagick, width, height)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">load = function (filename, imageMagick, width, height) {
	return new Image(filename, imageMagick, width, height);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `req.localize()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.useSMTP(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.http('debug/release/test', { debug: true })` can start a mini debugger
- updated: `F.route()`, `F.websocket()` and `F.file()` --&gt; now returns `FrameworkRoute` instance instead of `Framework` instance
 (more in docs)
- updated: `F.<span class="apidocCodeKeywordSpan">load</span>(debug, [types], [path])` supports a new type `service` which enables
 `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
- updated: `F.schedule()` returns an identificator
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.measureGIF" id="apidoc.element.total.js.image.measureGIF">
        function <span class="apidocSignatureSpan">total.js.image.</span>measureGIF
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">measureGIF = function (buffer) {
	return { width: buffer[6], height: buffer[8] };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	stream.on('data', function(buffer) {

		switch (extension) {
			case '.jpg':
				callback(null, exports.measureJPG(buffer));
				return;
			case '.gif':
				callback(null, exports.<span class="apidocCodeKeywordSpan">measureGIF</span>(buffer));
				return;
			case '.png':
				callback(null, exports.measurePNG(buffer));
				return;
		}

		callback(new Error('This type of file is not supported.'));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.measureJPG" id="apidoc.element.total.js.image.measureJPG">
        function <span class="apidocSignatureSpan">total.js.image.</span>measureJPG
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">measureJPG = function (buffer) {

	var len = buffer.length;
	var o = 0;

	var jpeg = 0xff == buffer[0] &amp;&amp; 0xd8 == buffer[1];
	if (!jpeg)
		return;

	o += 2;

	while (o &lt; len) {

		while (0xff != buffer[o]) o++;
		while (0xff == buffer[o]) o++;

		if (!sof[buffer[o]]) {
			o += u16(buffer, ++o);
			continue;
		}

		var w = u16(buffer, o + 6);
		var h = u16(buffer, o + 4);

		return { width: w, height: h };
	}

	return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var extension = self.filename.substring(index).toLowerCase();
	var stream = require('fs').createReadStream(self.filename, { start: 0, end: extension === '.jpg' ? 40000 :
24 });

	stream.on('data', function(buffer) {

		switch (extension) {
			case '.jpg':
				callback(null, exports.<span class="apidocCodeKeywordSpan">measureJPG</span>(buffer));
				return;
			case '.gif':
				callback(null, exports.measureGIF(buffer));
				return;
			case '.png':
				callback(null, exports.measurePNG(buffer));
				return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.measurePNG" id="apidoc.element.total.js.image.measurePNG">
        function <span class="apidocSignatureSpan">total.js.image.</span>measurePNG
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">measurePNG = function (buffer) {
	return { width: u32(buffer, 16), height: u32(buffer, 16 + 4) };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			case '.jpg':
				callback(null, exports.measureJPG(buffer));
				return;
			case '.gif':
				callback(null, exports.measureGIF(buffer));
				return;
			case '.png':
				callback(null, exports.<span class="apidocCodeKeywordSpan">measurePNG</span>(buffer));
				return;
		}

		callback(new Error('This type of file is not supported.'));
	});

	stream.on('error', callback);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.measureSVG" id="apidoc.element.total.js.image.measureSVG">
        function <span class="apidocSignatureSpan">total.js.image.</span>measureSVG
        <span class="apidocSignatureSpan">(buffer)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">measureSVG = function (buffer) {

	var match = buffer.toString('utf8').match(REGEXP_SVG);
	if (!match)
		return;

	var width = 0;
	var height = 0;

	for (var i = 0, length = match.length; i &lt; length; i++) {
		var value = match[i];

		if (width &gt; 0 &amp;&amp; height &gt; 0)
			break;

		if (!width &amp;&amp; value.startsWith('width="'))
			width = value.parseInt2();

		if (!height &amp;&amp; value.startsWith('height="'))
			height = value.parseInt2();
	}

	return { width: width, height: height };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
======= 1.7.2

- added: Array.prototype.extend(obj, [rewrite])
- added: SchemaBuilderEntity-&gt;constant(name, [value])
- added: Utils.minifyHTML(value);
- added: Utils.minifyScript(value);
- added: Utils.minifyStyle(value);
- added: FrameworkImage.<span class="apidocCodeKeywordSpan">measureSVG</span>(buffer);
- added: auto-parsing SVG width/height
- added: framework.translator([language], text);
- added: TRANSLATOR
- added: SUCCESS(boolean, [value]) returns { success: boolean, value: [value] }
- added: framework.onLocate(req, res) --&gt; this method sets the current localization
- added: new installation event framework.on('module#name');
- added: new installation event framework.on('controller#name');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.middleware" id="apidoc.element.total.js.image.middleware">
        function <span class="apidocSignatureSpan">total.js.image.</span>middleware
        <span class="apidocSignatureSpan">(type, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">middleware = function (type, fn) {
	if (type[0] === '.')
		type = type.substring(1);
	middlewares[type] = fn;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.web()` --&gt; alias to F.route()
- added: `F.cors(url, flags, credentials)`
- added: `config['default-response-maxage']`, default value `11111111`
- added: `U.get(obj, path)` reads a value from `obj` by path
- added: `U.set(obj, path, value)` sets a value into `obj` by path
- added: (IMPORTANT) `config['default-root']` can replace root relative path
- added: `FrameworkImage` --&gt; `instance.make(function(image) {})`
- added: `FrameworkImage` supports middleware `FrameworkImage.<span class="apidocCodeKeywordSpan">middleware</span>(extension, fn
)`
- added: `controller.$get([helper], callback)` or alias `controller.$read([helper], callback)` - schema must be defined in the route
- added: `controller.$remove([helper], callback)` - schema must be defined in the route
- added: `controller.$save([helper], callback)` - schema must be defined in the route
- added: `controller.$query([helper], callback)` - schema must be defined in the route
- added: `controller.$transform(name, [helper], callback)` - schema must be defined in the route
- added: `controller.$workflow([name, [helper], callback)` - schema must be defined in the route
- added: `controller.$operation(name, [helper], callback)` - schema must be defined in the route
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.image.restart" id="apidoc.element.total.js.image.restart">
        function <span class="apidocSignatureSpan">total.js.image.</span>restart
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restart = function () {
	middlewares = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `@{sitemap_navigation([parent], [language])` can get list of all items according to the parent
- added: `/startup/` all scripts in this directory are executed only one (then are renamed automatically)
- added: `F.route()` supports a new flag: `cors` (creates a cors route) and `credentials` (enables cookies for cors)
- added: `ErrorBuilder.plain()` returns all errors as a simple string
- added: `Array.findItem()` alias to `Array.find()`
- added: `Number.async(fn(index, next), callback)` for asynchronous operations
- added: `UID()` for generating unique identificators (contains minimum 18 chars)
- added: `F.<span class="apidocCodeKeywordSpan">restart</span>()` for restarting app
- added: `F.on('restart')`
- added: quicksort algorithm for sorting arrays
- added: `Array.quicksort(property_name, [asc], [maxlength])` for sorting arrays
- added: `String.removeTags()` by @harry-stot
- added: F.nosql(name) + NOSQL(name) --&gt; alias for NoSQL embedded database (it can be used with e.g. SQL Agent)
- added: modificators can handle `INSTALL('view', ...)`
- added: `String.isPhone()` for phone number validation
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.total.js.internal" id="apidoc.module.total.js.internal">module total.js.internal</a></h1>


    <h2>
        <a href="#apidoc.element.total.js.internal.MultipartParser" id="apidoc.element.total.js.internal.MultipartParser">
        function <span class="apidocSignatureSpan">total.js.internal.</span>MultipartParser
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function MultipartParser() {
	this.boundary = null;
	this.boundaryChars = null;
	this.lookbehind = null;
	this.state = S.PARSER_UNINITIALIZED;
	this.index = null;
	this.flags = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.appendModel" id="apidoc.element.total.js.internal.appendModel">
        function <span class="apidocSignatureSpan">total.js.internal.</span>appendModel
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appendModel = function (str) {
	var index = str.indexOf('(');
	if (index === -1)
		return str;
	var end = str.substring(index + 1);
	return str.substring(0, index) + '(model' + (end[0] === ')' ? end : ',' + end);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		case 'radio':
		case 'text':
		case 'checkbox':
		case 'hidden':
		case 'textarea':
		case 'password':
			return 'self.$' + exports.<span class="apidocCodeKeywordSpan">appendModel</span>(command);

		default:
			return F.helpers[name] ? ('helpers.' + view_insert_call(command)) : ('$STRING(' + (functions.indexOf(name
) === -1 ? command[0] === '!' ? command.substring(1) + ')' : command + ').encode()' : command + &amp;#
x27;)'));
	}
}

function view_insert_call(command) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.compile_css" id="apidoc.element.total.js.internal.compile_css">
        function <span class="apidocSignatureSpan">total.js.internal.</span>compile_css
        <span class="apidocSignatureSpan">(value, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile_css = function (value, filename) {

	if (global.F) {
		value = modificators(value, filename, 'style');
		if (F.onCompileStyle)
			return F.onCompileStyle(filename, value);
	}

	try {

		var isVariable = false;

		value = nested(value, '', function() {
			isVariable = true;
		});

		value = compile_autovendor(value);

		if (isVariable)
			value = variablesCSS(value);

		return value;
	} catch (ex) {
		F.error(new Error('CSS compiler exception: ' + ex.message));
		return '';
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		return content;

	switch (extension) {
		case 'js':
			return F.config['allow-compile-script'] ? framework_internal.compile_javascript(content, filename) : content;

		case 'css':
			content = F.config['allow-compile-style'] ? framework_internal.<span class="apidocCodeKeywordSpan">compile_css</span>(content, filename) : content;
			var matches = content.match(REG_COMPILECSS);
			if (matches) {
				for (var i = 0, length = matches.length; i &lt; length; i++) {
					var key = matches[i];
					var url = key.substring(4, key.length - 1);
					content = content.replace(key, 'url(' + F.$version(url) + ')');
				}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.compile_html" id="apidoc.element.total.js.internal.compile_html">
        function <span class="apidocSignatureSpan">total.js.internal.</span>compile_html
        <span class="apidocSignatureSpan">(source, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile_html = function (source, filename) {
	return compressCSS(compressJS(compressHTML(source, true), 0, filename), 0, filename);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			content = F.translator(req.$language, framework_internal.modificators(content.toString(ENCODING), filename, 'static'
;));

			Fs.lstat(filename, function(err, stats) {

				var mtime = stats.mtime.toUTCString();

				if (minify &amp;&amp; (req.extension === 'html' || req.extension === 'htm'))
					content = framework_internal.<span class="apidocCodeKeywordSpan">compile_html</span>(content, filename);

				if (RELEASE) {
					F.temporary.other[key] = U.createBuffer(content);
					F.temporary.other[key].$mtime = mtime;
					if (F.$notModified(req, res, mtime))
						return;
				}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.compile_javascript" id="apidoc.element.total.js.internal.compile_javascript">
        function <span class="apidocSignatureSpan">total.js.internal.</span>compile_javascript
        <span class="apidocSignatureSpan">(source, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">compile_javascript = function (source, filename) {

	if (global.F) {
		source = modificators(source, filename, 'script');
		if (F.onCompileScript)
			return F.onCompileScript(filename, source).trim();
	}

	return minify_javascript(source);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				obj.url = '/' + obj.url;
		} else
			obj.url = '/' + name + '.js';

		tmp = F.path.temp('isomorphic_' + name + '.min.js');
		F.map(framework_internal.preparePath(obj.url), tmp);
		F.isomorphic[name] = obj;
		Fs.writeFileSync(tmp, prepare_isomorphic(name, framework_internal.<span class="apidocCodeKeywordSpan">compile_javascript</span>(content, '#' + name)));

		F.consoledebug('install', type + '#' + name);
		next &amp;&amp; next();
		callback &amp;&amp; callback(null, name);

		setTimeout(function() {
			F.emit(type + '#' + name, obj);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.destroyStream" id="apidoc.element.total.js.internal.destroyStream">
        function <span class="apidocSignatureSpan">total.js.internal.</span>destroyStream
        <span class="apidocSignatureSpan">(stream)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function destroyStream(stream) {
	if (stream instanceof ReadStream) {
		stream.destroy();
		if (typeof(stream.close) !== 'function')
			return stream;
		stream.on('open', function() {
			typeof(this.fd) === 'number' &amp;&amp; this.close();
		});
		return stream;
	}
	stream instanceof Stream &amp;&amp; typeof(stream.destroy) === 'function' &amp;&amp; stream.destroy();
	return stream;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
global.SCRIPT = (body, value, callback, param) =&gt; F.script(body, value, callback, param);
global.SINGLETON = (name, def) =&gt; SINGLETONS[name] || (SINGLETONS[name] = (new Function('return ' + (def || '
;{}')))());
global.EACHSCHEMA = (group, fn) =&gt; framework_builders.eachschema(group, fn);
global.FUNCTION = (name) =&gt; F.functions[name];
global.ROUTING = (name) =&gt; F.routing(name);
global.SCHEDULE = (date, each, fn, param) =&gt; F.schedule(date, each, fn, param);
global.FINISHED = (stream, callback) =&gt; framework_internal.onFinished(stream, callback);
global.DESTROY = (stream) =&gt; framework_internal.<span class="apidocCodeKeywordSpan">destroyStream</span>(stream);
global.UID = () =&gt; UIDGENERATOR.date + (++UIDGENERATOR.index).padLeft(4, '0') + UIDGENERATOR.instance + (UIDGENERATOR
.index % 2 ? 1 : 0);

global.$CREATE = function(schema) {
	schema = parseSchema(schema);
	var o = framework_builders.getschema(schema[0], schema[1]);
	return o ? o.default() : null;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.encodeUnicodeURL" id="apidoc.element.total.js.internal.encodeUnicodeURL">
        function <span class="apidocSignatureSpan">total.js.internal.</span>encodeUnicodeURL
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">encodeUnicodeURL = function (url) {
	var output = url;
	for (var i = 0, length = url.length; i &lt; length; i++) {
		var code = url.charCodeAt(i);
		if (code &gt; 127)
			output = output.replace(url[i], encodeURIComponent(url[i]));
	}
	return output;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	route.isASTERIX = url.lastIndexOf('*') !== -1;

	if (route.isASTERIX)
		url = url.replace('*', '');

	url = framework_internal.preparePath(framework_internal.<span class="apidocCodeKeywordSpan">encodeUnicodeURL</span>(url.trim()));

	route.hash = url.hash();
	route.owner = _owner;
	route.url = framework_internal.routeSplitCreate(url);
	route.origins = origins.length ? origins : null;
	route.methods = methods.length ? methods : null;
	route.headers = headers.length ? headers : null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.findLocalization" id="apidoc.element.total.js.internal.findLocalization">
        function <span class="apidocSignatureSpan">total.js.internal.</span>findLocalization
        <span class="apidocSignatureSpan">(content, index)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function view_find_localization(content, index) {

	index = content.indexOf('@(', index);
	if (index === -1)
		return null;

	var length = content.length;
	var count = 0;

	for (var i = index + 2; i &lt; length; i++) {
		var c = content[i];

		if (c === '(') {
			count++;
			continue;
		}

		if (c !== ')')
			continue;
		else if (count) {
			count--;
			continue;
		}

		return {
			beg: index,
			end: i,
			command: content.substring(index + 2, i).trim()
		};
	}

	return null;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				var filename = files[i];
				var ext = Utils.getExtension(filename);

				if (filename.indexOf('sitemap') === -1 &amp;&amp; ext !== 'html' &amp;&amp; ext !== 'js')
					continue;

				var content = fs.readFileSync(filename).toString('utf8');
				var command = Internal.<span class="apidocCodeKeywordSpan">findLocalization</span>(content, 0);
				while (command !== null) {

					// Skip for direct reading
					if (command.command[0] === '#' &amp;&amp; command.command[1] !== ' ') {
						command = Internal.findLocalization(content, command.end);
						continue;
					}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.modificators" id="apidoc.element.total.js.internal.modificators">
        function <span class="apidocSignatureSpan">total.js.internal.</span>modificators
        <span class="apidocSignatureSpan">(value, filename, type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function modificators(value, filename, type) {

	if (!F.modificators)
		return value;

	for (var i = 0, length = F.modificators.length; i &lt; length; i++) {
		var output = F.modificators[i](type || 'view', filename, value);
		if (output)
			value = output;
	}

	return value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		var filename = F.onMapping(name, name, true, true);

		Fs.readFile(filename, function(err, content) {

			if (err)
				return res.throw404();

			content = F.translator(req.$language, framework_internal.<span class="apidocCodeKeywordSpan">modificators</span>(content.toString
(ENCODING), filename, 'static'));

			Fs.lstat(filename, function(err, stats) {

				var mtime = stats.mtime.toUTCString();

				if (minify &amp;&amp; (req.extension === 'html' || req.extension === 'htm'))
					content = framework_internal.compile_html(content, filename);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.onFinished" id="apidoc.element.total.js.internal.onFinished">
        function <span class="apidocSignatureSpan">total.js.internal.</span>onFinished
        <span class="apidocSignatureSpan">(msg, listener)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function onFinished(msg, listener) {
	if (isFinished(msg) !== false)
		setImmediate(listener, null, msg);
	else
		attachListener(msg, listener);
	return msg;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
global.CREATE = (group, name) =&gt; framework_builders.getschema(group, name).default();
global.SCRIPT = (body, value, callback, param) =&gt; F.script(body, value, callback, param);
global.SINGLETON = (name, def) =&gt; SINGLETONS[name] || (SINGLETONS[name] = (new Function('return ' + (def || '
;{}')))());
global.EACHSCHEMA = (group, fn) =&gt; framework_builders.eachschema(group, fn);
global.FUNCTION = (name) =&gt; F.functions[name];
global.ROUTING = (name) =&gt; F.routing(name);
global.SCHEDULE = (date, each, fn, param) =&gt; F.schedule(date, each, fn, param);
global.FINISHED = (stream, callback) =&gt; framework_internal.<span class="apidocCodeKeywordSpan">onFinished</span>(stream, callback
);
global.DESTROY = (stream) =&gt; framework_internal.destroyStream(stream);
global.UID = () =&gt; UIDGENERATOR.date + (++UIDGENERATOR.index).padLeft(4, '0') + UIDGENERATOR.instance + (UIDGENERATOR
.index % 2 ? 1 : 0);

global.$CREATE = function(schema) {
	schema = parseSchema(schema);
	var o = framework_builders.getschema(schema[0], schema[1]);
	return o ? o.default() : null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.parseBlock" id="apidoc.element.total.js.internal.parseBlock">
        function <span class="apidocSignatureSpan">total.js.internal.</span>parseBlock
        <span class="apidocSignatureSpan">(name, content)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseBlock = function (name, content) {

	// @{block name}
	//
	// @{end}

	if (content.search(REG_BLOCK_BEG) === -1)
		return content;

	var newline = '\n';
	var lines = content.split(newline);
	var is = false;
	var skip = false;
	var builder = '';

	name = (name || '').replace(/\s/g, '').split(',');

	for (var i = 0, length = lines.length; i &lt; length; i++) {

		var line = lines[i];

		if (!line)
			continue;

		if (line.search(REG_BLOCK_END) !== -1) {
			is = false;
			skip = false;
			continue;
		}

		if (is) {
			if (skip)
				continue;
			builder += line + newline;
			continue;
		}

		var index = line.search(REG_BLOCK_BEG);
		if (!index)
			continue;

		if (index === -1) {
			builder += line + newline;
			continue;
		}

		is = true;
		skip = true;

		var block = line.substring(index + 8, line.indexOf('}', index)).replace(/\|\|/g, ',').replace(/\s/g, '').split(',');
		for (var j = 0, jl = block.length; j &lt; jl; j++) {
			if (name.indexOf(block[j]) === -1)
				continue;
			skip = false;
			break;
		}
	}

	return builder.trim();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			delete F.temporary.processing[req.$key];
			res.$file();
			return;
		}

		var file = F.path.temp((F.id ? 'i-' + F.id + '_' : '') + createTemporaryKey(uri.pathname));
		F.path.verify('temp');
		Fs.writeFileSync(file, F.compile_content(req.extension, framework_internal.<span class="apidocCodeKeywordSpan">parseBlock</span>(F.routes.blocks[uri.pathname], buffer.toString(ENCODING)), res.options.filename), ENCODING);
		var stats = Fs.statSync(file);
		F.temporary.path[req.$key] = [file, stats.size, stats.mtime.toUTCString()];
		delete F.temporary.processing[req.$key];
		res.$file();
	});
	return F;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.parseLocalization" id="apidoc.element.total.js.internal.parseLocalization">
        function <span class="apidocSignatureSpan">total.js.internal.</span>parseLocalization
        <span class="apidocSignatureSpan">(content, language)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function view_parse_localization(content, language) {

	var is = false;

	content = content.replace(REG_NOTRANSLATE, function() {
		is = true;
		return '';
	}).trim();

	if (is)
		return content;

	var command = view_find_localization(content, 0);
	var output = '';
	var end = 0;

	if (!command)
		return content;

	while (command) {
		if (command)
			output += content.substring(end ? end + 1 : 0, command.beg) + F.translate(language, command.command);
		end = command.end;
		command = view_find_localization(content, command.end);
	}

	output += content.substring(end + 1);
	return output;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
/**
 * The translator for the text from the View Engine @(TEXT TO TRANSLATE)
 * @param {String} language A resource filename, optional.
 * @param {String} text
 * @return {String}
 */
F.translator = function(language, text) {
	return framework_internal.<span class="apidocCodeKeywordSpan">parseLocalization</span>(text, language);
};

F.$cofnigure_sitemap = function(arr, clean) {

	if (!arr || typeof(arr) === 'string') {
		var filename = prepare_filename(arr || 'sitemap');
		if (existsSync(filename, true))
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.parseMULTIPART" id="apidoc.element.total.js.internal.parseMULTIPART">
        function <span class="apidocSignatureSpan">total.js.internal.</span>parseMULTIPART
        <span class="apidocSignatureSpan">(req, contentType, route, tmpDirectory, subscribe)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseMULTIPART = function (req, contentType, route, tmpDirectory, subscribe) {

	var boundary = contentType.split(';')[1];
	if (!boundary) {
		F.reqstats(false, false);
		F.stats.request.error400++;
		subscribe.res.writeHead(400);
		subscribe.res.end();
		return;
	}

	// For unexpected closing
	req.once('close', () =&gt; !req.$upload &amp;&amp; req.clear());

	var parser = new MultipartParser();
	var size = 0;
	var stream;
	var maximumSize = route.length;
	var tmp;
	var close = 0;
	var rm;

	// Replaces the EMPTYARRAY and EMPTYOBJECT in index.js
	req.files = [];
	req.body = {};

	var path = framework_utils.combine(tmpDirectory, (F.id ? 'i-' + F.id + '_' : '') + 'uploadedfile-');

	// Why indexOf(.., 2)? Because performance
	boundary = boundary.substring(boundary.indexOf('=', 2) + 1);

	req.buffer_exceeded = false;
	req.buffer_has = true;
	req.buffer_parser = parser;

	parser.initWithBoundary(boundary);

	parser.onPartBegin = function() {
		// Temporary data
		tmp = new HttpFile();
		tmp.$data = framework_utils.createBufferSize();
		tmp.$step = 0;
		tmp.$is = false;
		tmp.length = 0;
	};

	parser.onHeaderValue = function(buffer, start, end) {

		if (req.buffer_exceeded)
			return;

		var header = buffer.slice(start, end).toString(ENCODING);

		if (tmp.$step === 1) {
			var index = header.indexOf(';');
			if (index === -1)
				tmp.type = header.trim();
			else
				tmp.type = header.substring(0, index).trim();

			tmp.$step = 2;
			return;
		}

		if (tmp.$step !== 0)
			return;

		header = parse_multipart_header(header);

		tmp.$step = 1;
		tmp.$is = header[1] !== null;
		tmp.name = header[0];

		if (!tmp.$is) {
			destroyStream(stream);
			return;
		}

		tmp.filename = header[1];
		tmp.path = path + (INDEXFILE++) + '.bin';

		stream = Fs.createWriteStream(tmp.path, WRITESTREAM);
		stream.once('close', () =&gt; close--);
		stream.once('error', () =&gt; close--);
		close++;
	};

	parser.onPartData = function(buffer, start, end) {

		if (req.buffer_exceeded)
			return;

		var data = buffer.slice(start, end);
		var length = data.length;

		size += length;

		if (size &gt;= maximumSize) {
			req.buffer_exceeded = true;

			if (rm)
				rm.push(tmp.path);
			else
				rm = [tmp.path];
			return;
		}

		if (!tmp.$is) {
			CONCAT[0] = tmp.$data;
			CONCAT[1] = data;
			tmp.$data = Buffer.concat(CONCAT);
			return;
		}

		if (tmp.length) {
			stream.write(data);
			tmp.length += length;
			return;
		}

		var wh = null;

		switch (tmp.type) {
			case 'image/jpeg':
				wh = framework_image.measureJPG(buffer.slice(start));
				break;
			case 'image/gif':
				wh = framework_image.measureGIF(data);
				break;
			case 'image/png':
				wh = framework_image.measurePNG(data);
				break;
			case 'image/svg+xml':
				wh = framework_image.measureSVG(data);
				break;
		}

		if (wh) {
			tmp.width = wh.width;
			tmp.height = wh.height;
		} else {
			tmp.width = 0;
			tmp.height = 0;
		}

		req.files.push(tmp);
		F.$events['upload-begin'] &amp;&amp; F.emit('upload-begin', req, tmp);
		stream.write(data);
		tmp.length += length;
	};

	parser.onPartEnd = function() {

		if (stream) {
			stream.end();
			stream = null;
		}

		if (req.buffer_exceeded)
			return;

		if (tmp.$is) {
			tmp.$data = undefined;
			tmp.$is = undefined;
			tmp.$step = undefined;
			F.$events['upload-end'] &amp;&amp; F.emit('upload-end', req, tmp);
			return;
		}

		tmp.$data = tmp.$data.toString(ENCODING);

		var temporary = req.body[tmp.name];
		if (temporary === undefined) {
			req.body[tmp.name] = tmp.$data;
		} else if (temporary instanceof Array) {
			req.body[tmp.name].push(tmp.$data);
		} else {
			temporary = [temporary];
			temporary.push(tmp.$data);
			req.body[tmp.name] = temporary;
		}
	};

	parser.onEnd = function() {
		if (close) {
			setImmediate(parser.onEnd);
		} else {
			rm &amp;&amp; F.unlink(rm);
			subscribe.doEnd();
		}
	};

	req.on('data', uploadparser);
	req.on('end', uploadparser_done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	F.stats.request.upload++;
	self.route = F.lookup(req, req.uri.pathname, req.flags, 0);
	self.header = header;

	if (self.route) {
		F.path.verify('temp');
		framework_internal.<span class="apidocCodeKeywordSpan">parseMULTIPART</span>(req, header, self.route, F.config['directory
-temp'], self);
		return self;
	}

	F.reqstats(false, false);
	F.stats.request.blocked++;
	self.res.writeHead(403);
	self.res.end();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.parseMULTIPART_MIXED" id="apidoc.element.total.js.internal.parseMULTIPART_MIXED">
        function <span class="apidocSignatureSpan">total.js.internal.</span>parseMULTIPART_MIXED
        <span class="apidocSignatureSpan">(req, contentType, tmpDirectory, onFile)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseMULTIPART_MIXED = function (req, contentType, tmpDirectory, onFile) {

	var boundary = contentType.split(';')[1];
	if (!boundary) {
		F.reqstats(false, false);
		F.stats.request.error400++;
		req.res.writeHead(400);
		req.res.end();
		return;
	}

	// For unexpected closing
	req.once('close', () =&gt; !req.$upload &amp;&amp; req.clear());

	var parser = new MultipartParser();
	var close = 0;
	var stream;
	var tmp;
	var counter = 0;
	var path = framework_utils.combine(tmpDirectory, (F.id ? 'i-' + F.id + '_' : '') + 'uploadedmixed-');

	boundary = boundary.substring(boundary.indexOf('=', 2) + 1);
	req.buffer_exceeded = false;
	req.buffer_has = true;
	req.buffer_parser = parser;

	parser.initWithBoundary(boundary);

	parser.onPartBegin = function() {
		// Temporary data
		tmp = new HttpFile();
		tmp.$step = 0;
		tmp.$is = false;
		tmp.length = 0;
	};

	parser.onHeaderValue = function(buffer, start, end) {

		if (req.buffer_exceeded)
			return;

		var header = buffer.slice(start, end).toString(ENCODING);
		if (tmp.$step === 1) {
			var index = header.indexOf(';');
			if (index === -1)
				tmp.type = header.trim();
			else
				tmp.type = header.substring(0, index).trim();
			tmp.$step = 2;
			return;
		}

		if (tmp.$step !== 0)
			return;

		header = parse_multipart_header(header);

		tmp.$step = 1;
		tmp.$is = header[1] !== null;
		tmp.name = header[0];

		if (tmp.$is) {
			tmp.filename = header[1];
			tmp.path = path + (INDEXMIXED++) + '.bin';

			stream = Fs.createWriteStream(tmp.path, WRITESTREAM);
			stream.once('close', () =&gt; close--);
			stream.once('error', () =&gt; close--);
			close++;
		} else
			destroyStream(stream);
	};

	parser.onPartData = function(buffer, start, end) {

		if (req.buffer_exceeded)
			return;

		var data = buffer.slice(start, end);
		var length = data.length;

		if (!tmp.$is)
			return;

		if (tmp.length) {
			stream.write(data);
			tmp.length += length;
			return;
		}

		stream.write(data);
		tmp.length += length;
		onFile(req, tmp, counter++);
	};

	parser.onPartEnd = function() {

		if (stream) {
			stream.end();
			stream = null;
		}

		if (req.buffer_exceeded || !tmp.$is)
			return;

		tmp.$is = undefined;
		tmp.$step = undefined;
	};

	parser.onEnd = function() {
		if (close) {
			setImmediate(parser.onEnd);
		} else {
			onFile(req, null);
			F.responseContent(req, req.res, 200, EMPTYBUFFER, 'text/plain', false);
		}
	};

	req.on('data', uploadparser);
	req.on('end', uploadparser_done);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

F.$requestcontinue_mmr = function(req, res, header) {
	var route = F.routes.mmr[req.url];
	F.stats.request.mmr++;

	if (route) {
		F.path.verify('temp');
		framework_internal.<span class="apidocCodeKeywordSpan">parseMULTIPART_MIXED</span>(req, header, F.config['directory-temp&amp;#
x27;], route.exec);
		return;
	}

	F.$events['request-end'] &amp;&amp; F.emit('request-end', req, res);
	F.reqstats(false, false);
	F.stats.request.blocked++;
	res.writeHead(403);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.parseURI" id="apidoc.element.total.js.internal.parseURI">
        function <span class="apidocSignatureSpan">total.js.internal.</span>parseURI
        <span class="apidocSignatureSpan">(req)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseURI = function (req) {

	var cache = F.temporary.other[req.host];
	var port;
	var hostname;

	if (cache) {
		port = cache.port;
		hostname = cache.hostname;
	} else {
		port = req.host.lastIndexOf(':');
		if (port === -1) {
			port = null;
			hostname = req.host;
		} else {
			hostname = req.host.substring(0, port);
			port = req.host.substring(port + 1);
		}
		F.temporary.other[req.host] = { port: port, hostname: hostname };
	}

	var search = req.url.indexOf('?', 1);
	var query = null;
	var pathname;

	if (search === -1) {
		search = null;
		pathname = req.url;
	} else {
		pathname = req.url.substring(0, search);
		search = req.url.substring(search);
		query = search.substring(1);
	}

	var index = pathname.indexOf('//');
	if (index !== -1) {
		pathname = cleanURL(pathname, index);
		req.url = pathname;
		if (search)
			req.url += search;
	}

	return { auth: null, hash: null, host: req.host, hostname: hostname, href: req.$protocol + '://' + req.host + req.url, path: req
.url, pathname: pathname, port: port, protocol: req.$protocol + ':', query: query, search: search, slashes: true };
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		return F.response503(req, res);
	else if (!req.host) // HTTP 1.0 without host
		return res.throw400();

	var headers = req.headers;
	req.$protocol = req.connection.encrypted || headers['x-forwarded-protocol'] === 'https' ? 'https' : &amp;#
x27;http';

	req.uri = framework_internal.<span class="apidocCodeKeywordSpan">parseURI</span>(req);

	F.stats.request.request++;
	F.$events.request &amp;&amp; F.emit('request', req, res);

	if (F._request_check_redirect) {
		var redirect = F.routes.redirects[req.$protocol + '://' + req.host];
		if (redirect) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.preparePath" id="apidoc.element.total.js.internal.preparePath">
        function <span class="apidocSignatureSpan">total.js.internal.</span>preparePath
        <span class="apidocSignatureSpan">(path, remove)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">preparePath = function (path, remove) {
	var root = F.config['default-root'];
	if (!root)
		return path;
	var is = path[0] === '/';
	if ((is &amp;&amp; path[1] === '/') || path[4] === ':' || path[5] === ':')
		return path;
	return remove ? path.substring(root.length - 1) : (root + (is ? path.substring(1) : path));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	route.isASTERIX = url.lastIndexOf('*') !== -1;

	if (route.isASTERIX)
		url = url.replace('*', '');

	url = framework_internal.<span class="apidocCodeKeywordSpan">preparePath</span>(framework_internal.encodeUnicodeURL(url.trim()));

	route.hash = url.hash();
	route.owner = _owner;
	route.url = framework_internal.routeSplitCreate(url);
	route.origins = origins.length ? origins : null;
	route.methods = methods.length ? methods : null;
	route.headers = headers.length ? headers : null;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.restart" id="apidoc.element.total.js.internal.restart">
        function <span class="apidocSignatureSpan">total.js.internal.</span>restart
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restart = function () {
	INDEXMIXED = 0;
	INDEXFILE = 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `@{sitemap_navigation([parent], [language])` can get list of all items according to the parent
- added: `/startup/` all scripts in this directory are executed only one (then are renamed automatically)
- added: `F.route()` supports a new flag: `cors` (creates a cors route) and `credentials` (enables cookies for cors)
- added: `ErrorBuilder.plain()` returns all errors as a simple string
- added: `Array.findItem()` alias to `Array.find()`
- added: `Number.async(fn(index, next), callback)` for asynchronous operations
- added: `UID()` for generating unique identificators (contains minimum 18 chars)
- added: `F.<span class="apidocCodeKeywordSpan">restart</span>()` for restarting app
- added: `F.on('restart')`
- added: quicksort algorithm for sorting arrays
- added: `Array.quicksort(property_name, [asc], [maxlength])` for sorting arrays
- added: `String.removeTags()` by @harry-stot
- added: F.nosql(name) + NOSQL(name) --&gt; alias for NoSQL embedded database (it can be used with e.g. SQL Agent)
- added: modificators can handle `INSTALL('view', ...)`
- added: `String.isPhone()` for phone number validation
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.routeCompare" id="apidoc.element.total.js.internal.routeCompare">
        function <span class="apidocSignatureSpan">total.js.internal.</span>routeCompare
        <span class="apidocSignatureSpan">(url, route, isSystem, isAsterix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeCompare = function (url, route, isSystem, isAsterix) {

	var length = url.length;
	var lengthRoute = route.length;

	if (lengthRoute !== length &amp;&amp; !isAsterix)
		return false;

	if (isAsterix &amp;&amp; lengthRoute === 1 &amp;&amp; route[0] === '/')
		return true;

	var skip = length === 1 &amp;&amp; url[0] === '/';

	for (var i = 0; i &lt; length; i++) {

		var value = route[i];

		if (!isSystem &amp;&amp; isAsterix &amp;&amp; value === undefined)
			return true;

		if (!isSystem &amp;&amp; (!skip &amp;&amp; value[0] === '{'))
			continue;

		if (url[i] !== value)
			return isSystem ? false : isAsterix ? i &gt;= lengthRoute : false;
	}

	return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
F.$cors = function(req, res, fn, arg) {

	var isAllowed = false;
	var cors;

	for (var i = 0; i &lt; F._length_cors; i++) {
		cors = F.routes.cors[i];
		if (framework_internal.<span class="apidocCodeKeywordSpan">routeCompare</span>(req.path, cors.url, false, cors.isASTERIX)) {
			isAllowed = true;
			break;
		}
	}

	if (!isAllowed)
		return fn(req, res, arg);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.routeCompareFlags" id="apidoc.element.total.js.internal.routeCompareFlags">
        function <span class="apidocSignatureSpan">total.js.internal.</span>routeCompareFlags
        <span class="apidocSignatureSpan">(arr1, arr2, membertype)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeCompareFlags = function (arr1, arr2, membertype) {

	var hasVerb = false;
	var a1 = arr1;
	var a2 = arr2;
	var l1 = arr1.length;
	var l2 = arr2.length;
	var select = l1 &gt; l2 ? a1 : a2;
	var compare = l1 &gt; l2 ? a2 : a1;
	var length = Math.max(l1, l2);

	var AUTHORIZE = 'authorize';
	var UNAUTHORIZE = 'unauthorize';

	for (var i = 0; i &lt; length; i++) {

		var value = select[i];
		var c = value[0];

		if (c === '!' || c === '#' || c === '$' || c === '@' || c === '+') // ignore roles
			continue;

		if (!membertype &amp;&amp; (value === AUTHORIZE || value === UNAUTHORIZE))
			continue;

		var index = compare.indexOf(value);
		if (index === -1 &amp;&amp; !HTTPVERBS[value])
			return value === AUTHORIZE || value === UNAUTHORIZE ? -1 : 0;

		hasVerb = hasVerb || (index !== -1 &amp;&amp; HTTPVERBS[value]);
	}

	return hasVerb ? 1 : 0;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

		if (noFlag) {
			selected = route;
			break;
		}

		if (route.flags &amp;&amp; route.flags.length) {
			var result = framework_internal.<span class="apidocCodeKeywordSpan">routeCompareFlags</span>(route.flags, flags, true);
			if (result === -1)
				self.req.$isAuthorized = false;
			if (result &lt; 1)
				continue;
		}

		selected = route;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.routeCompareFlags2" id="apidoc.element.total.js.internal.routeCompareFlags2">
        function <span class="apidocSignatureSpan">total.js.internal.</span>routeCompareFlags2
        <span class="apidocSignatureSpan">(req, route, membertype)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeCompareFlags2 = function (req, route, membertype) {

	// membertype 0 -&gt; not specified
	// membertype 1 -&gt; auth
	// membertype 2 -&gt; unauth

	// 1. upload --&gt; 0
	// 2. doAuth --&gt; 1 or 2

	// if (membertype &amp;&amp; ((membertype !== 1 &amp;&amp; route.MEMBER === 1) || (membertype !== 2 &amp;&amp; route.MEMBER === 2)))
	if (membertype &amp;&amp; route.MEMBER &amp;&amp; membertype !== route.MEMBER)
		return -1;

	if (!route.isWEBSOCKET) {
		if ((route.isXHR &amp;&amp; !req.xhr) || (route.isMOBILE &amp;&amp; !req.mobile) || (route.isROBOT &amp;&amp; !req.robot) || (route.isUPLOAD &amp;&amp; !req.$
upload))
			return 0;
		var method = req.method;
		if (route.method) {
			if (route.method !== method)
				return 0;
		} else if (!route.flags2[method.toLowerCase()])
			return 0;
		if ((route.isREFERER &amp;&amp; req.flags.indexOf('referer') === -1) || (!route.isMULTIPLE &amp;&amp; route.isJSON &amp;&amp; req.flags.indexOf('json') === -
1))
			return 0;
	}

	var isRole = false;
	var hasRoles = false;

	for (var i = 0, length = req.flags.length; i &lt; length; i++) {

		var flag = req.flags[i];
		switch (flag) {
			case 'json':
				continue;
			case 'xml':
				if (route.isRAW || route.isXML)
					continue;
				return 0;

			case 'proxy':
				if (!route.isPROXY)
					return 0;
				continue;

			case 'debug':
				if (!route.isDEBUG &amp;&amp; route.isRELEASE)
					return 0;
				continue;

			case 'release':
				if (!route.isRELEASE &amp;&amp; route.isDEBUG)
					return 0;
				continue;

			case 'referer':
				continue;

			case 'upload':
				if (!route.isUPLOAD)
					return 0;
				continue;

			case 'https':
				if (!route.isHTTPS &amp;&amp; route.isHTTP)
					return 0;
				continue;

			case 'http':
				if (!route.isHTTP &amp;&amp; route.isHTTPS)
					return 0;
				continue;

			case 'xhr':
			case '+xhr':
				if (!route.isBOTH &amp;&amp; !route.isXHR)
					return 0;
				continue;
		}

		var role = flag[0] === '@';

		if (membertype !== 1 &amp;&amp; route.MEMBER !== 1) {
			if ((!route.isGET &amp;&amp; !role &amp;&amp; !route.flags2[flag]) || (route.isROLE &amp;&amp; role &amp;&amp; !route.flags2[flag]) || (route.isROLE &amp;&amp; !role
))
				return 0;
			continue;
		}

		// Is some role verified?
		if (role &amp;&amp; isRole &amp;&amp; !route.isROLE)
			continue;

		if (!role &amp;&amp; !route.flags2[flag])
			return 0;

		if (role) {
			if (route.flags2[flag])
				isRole = true;
			hasRoles = true;
		}
	}

	return (route.isROLE &amp;&amp; hasRoles) ? isRole ? 1 : -1 : 1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}

			if (skip)
				continue;
		}

		if (route.flags &amp;&amp; route.flags.length) {
			var result = framework_internal.<span class="apidocCodeKeywordSpan">routeCompareFlags2</span>(req, route, membertype);
			if (result === -1)
				req.$isAuthorized = false; // request is not authorized
			if (result &lt; 1)
				continue;
		}

		if (key &amp;&amp; route.isCACHE &amp;&amp; req.$isAuthorized)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.routeCompareSubdomain" id="apidoc.element.total.js.internal.routeCompareSubdomain">
        function <span class="apidocSignatureSpan">total.js.internal.</span>routeCompareSubdomain
        <span class="apidocSignatureSpan">(subdomain, arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeCompareSubdomain = function (subdomain, arr) {
	if ((!subdomain &amp;&amp; !arr) || (subdomain &amp;&amp; !arr))
		return true;
	if (!subdomain &amp;&amp; arr)
		return false;
	for (var i = 0, length = arr.length; i &lt; length; i++) {
		if (arr[i] === '*')
			return true;
		var index = arr[i].lastIndexOf('*');
		if (index === -1) {
			if (arr[i] === subdomain)
				return true;
		} else if (subdomain.indexOf(arr[i].replace('*', '')) !== -1)
			return true;
	}
	return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	for (var i = 0; i &lt; length; i++) {

		var route = F.routes.web[i];
		if (route.CUSTOM) {
			if (!route.CUSTOM(url, req, flags))
				continue;
		} else {
			if (F._length_subdomain_web &amp;&amp; !framework_internal.<span class="apidocCodeKeywordSpan">routeCompareSubdomain</span>(
subdomain, route.subdomain))
				continue;
			if (route.isASTERIX) {
				if (!framework_internal.routeCompare(req.path, route.url, isSystem, true))
					continue;
			} else {
				if (!framework_internal.routeCompare(req.path, route.url, isSystem))
					continue;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.routeParam" id="apidoc.element.total.js.internal.routeParam">
        function <span class="apidocSignatureSpan">total.js.internal.</span>routeParam
        <span class="apidocSignatureSpan">(routeUrl, route)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeParam = function (routeUrl, route) {

	if (!route || !routeUrl || !route.param.length)
		return EMPTYARRAY;

	var arr = [];

	for (var i = 0, length = route.param.length; i &lt; length; i++) {
		var value = routeUrl[route.param[i]];
		arr.push(value === '/' ? '' : value);
	}

	return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			return;
		}

		var connection = new WebSocket(path, route.controller, id);
		connection.route = route;
		connection.options = route.options;
		F.connections[id] = connection;
		route.onInitialize.apply(connection, framework_internal.<span class="apidocCodeKeywordSpan">routeParam</span>(route.param.length
 ? req.split : req.path, route));
		process.nextTick(next_upgrade_continue, socket, connection);
	};

	if (route.middleware)
		async_middleware(0, req, req.websocket, route.middleware, next, route.options);
	else
		next();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.routeSplit" id="apidoc.element.total.js.internal.routeSplit">
        function <span class="apidocSignatureSpan">total.js.internal.</span>routeSplit
        <span class="apidocSignatureSpan">(url, noLower)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeSplit = function (url, noLower) {

	var arr;

	if (!noLower) {
		arr = F.temporary.other[url];
		if (arr)
			return arr;
	}

	if (!url || url === '/') {
		arr = ['/'];
		return arr;
	}

	var prev = false;
	var key = '';
	var count = 0;

	arr = [];

	for (var i = 0, length = url.length; i &lt; length; i++) {
		var c = url[i];

		if (c === '/') {
			if (key &amp;&amp; !prev) {
				arr.push(key);
				count++;
				key = '';
			}
			continue;
		}

		key += noLower ? c : c.toLowerCase();
		prev = c === '/';
	}

	if (key)
		arr.push(key);
	else if (!count)
		arr.push('/');

	return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			res.options.url = redirect.url + (redirect.path ? req.url : '');
			res.options.permanent = redirect.permanent;
			res.$redirect();
			return;
		}
	}

	req.path = framework_internal.<span class="apidocCodeKeywordSpan">routeSplit</span>(req.uri.pathname);
	req.processing = 0;
	req.isAuthorized = true;
	req.xhr = headers['x-requested-with'] === 'XMLHttpRequest';
	res.success = false;
	req.session = null;
	req.user = null;
	req.isStaticFile = F.config['allow-handle-static-files'] &amp;&amp; U.isStaticFile(req.uri.pathname);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.routeSplitCreate" id="apidoc.element.total.js.internal.routeSplitCreate">
        function <span class="apidocSignatureSpan">total.js.internal.</span>routeSplitCreate
        <span class="apidocSignatureSpan">(url, noLower)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">routeSplitCreate = function (url, noLower) {

	if (!noLower)
		url = url.toLowerCase();

	if (url[0] === '/')
		url = url.substring(1);

	if (url[url.length - 1] === '/')
		url = url.substring(0, url.length - 1);

	var count = 0;
	var end = 0;
	var arr = [];

	for (var i = 0, length = url.length; i &lt; length; i++) {
		switch (url[i]) {
			case '/':
				if (count !== 0)
					break;
				arr.push(url.substring(end + (arr.length ? 1 : 0), i));
				end = i;
				break;

			case '{':
				count++;
				break;

			case '}':
				count--;
				break;
		}
	}

	!count &amp;&amp; arr.push(url.substring(end + (arr.length ? 1 : 0), url.length));

	if (arr.length === 1 &amp;&amp; !arr[0])
		arr[0] = '/';

	return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if (route.isASTERIX)
		url = url.replace('*', '');

	url = framework_internal.preparePath(framework_internal.encodeUnicodeURL(url.trim()));

	route.hash = url.hash();
	route.owner = _owner;
	route.url = framework_internal.<span class="apidocCodeKeywordSpan">routeSplitCreate</span>(url);
	route.origins = origins.length ? origins : null;
	route.methods = methods.length ? methods : null;
	route.headers = headers.length ? headers : null;
	route.credentials = credentials;
	route.age = age || F.config['default-cors-maxage'];

	F.routes.cors.push(route);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.viewEngine" id="apidoc.element.total.js.internal.viewEngine">
        function <span class="apidocSignatureSpan">total.js.internal.</span>viewEngine
        <span class="apidocSignatureSpan">(name, filename, controller)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function viewengine_load(name, filename, controller) {

	var precompiled = F.routes.views[name];
	if (precompiled)
		filename = '.' + precompiled.filename;
	else
		filename += '.html';

	var key = 'view#' + filename + (controller.language || '');
	var generator = F.temporary.views[key];
	if (generator)
		return generator;

	generator = viewengine_read(filename, controller);

	if (!F.isDebug)
		F.temporary.views[key] = generator;

	return generator;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @param {String} name A component name
 * @param {Object} settings Optional, settings.
 * @return {String}
 */
Controller.prototype.component = function(name, settings) {
	var filename = F.components.views[name];
	if (filename) {
		var generator = framework_internal.<span class="apidocCodeKeywordSpan">viewEngine</span>(name, filename, this);
		if (generator)
			return generator.call(this, this, this.repository, this.$model, this.session, this.query, this.body, this.url, F.global, F.helpers
, this.user, this.config, F.functions, 0, this.outputPartial, this.req.cookie, this.req.files, this.req.mobile, settings || EMPTYOBJECT
);
	}
	return '';
};

Controller.prototype.components = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.internal.viewEngineCompile" id="apidoc.element.total.js.internal.viewEngineCompile">
        function <span class="apidocSignatureSpan">total.js.internal.</span>viewEngineCompile
        <span class="apidocSignatureSpan">(content, language, controller, cachekey)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function viewengine_dynamic(content, language, controller, cachekey) {

	var generator = cachekey ? (F.temporary.views[cachekey] || null) : null;
	if (generator)
		return generator;

	generator = view_parse(view_parse_localization(modificators(content, ''), language), F.config['allow-compile-html'], null, controller
);

	if (cachekey &amp;&amp; !F.isDebug)
		F.temporary.views[cachekey] = generator;

	return generator;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




























</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.total.js.mail" id="apidoc.module.total.js.mail">module total.js.mail</a></h1>




    <h2>
        <a href="#apidoc.element.total.js.mail.Mail" id="apidoc.element.total.js.mail.Mail">
        function <span class="apidocSignatureSpan">total.js.mail.</span>Mail
        <span class="apidocSignatureSpan">(subject, body)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Message(subject, body) {
	this.subject = subject || '';
	this.body = body || '';
	this.files;
	this.addressTo = [];
	this.addressReply;
	this.addressCC;
	this.addressBCC;
	this.addressFrom = { name: '', address: '' };
	this.closed = false;
	this.tls = false;
	this.$callback;
	// Supports (but it's hidden):
	// this.headers;
	// this.$unsubscribe;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- fixed: `Array.findIndex` - reported by [Liao San-Kai](https://github.com/liaosankai)
- fixed: `WebSocket.send()` problem with `[id]` and `[blacklist]`

- improved: performance in `Expires Header`

======= 1.9.6

- added: MailMessage.manually() and removes auto-sending mail --&gt; works only with `F.mail()` and `controller.<span class="apidocCodeKeywordSpan
">Mail</span>()`.
- added: view engine supports now `@{'route-to-static-file.jpg'}`
- added: `U.clone(obj, [skip])`
- added: `U.parseTheme(path)` --&gt; parses theme name
- added: `@{href}` or `@{href(obj)}` or `@{href(key, value)}` --&gt; query string manipulation (more in documentation)
- added: `.jsx` content-type
- added: `robot` flag into the routing (for search engines)
- added: property `req.robot`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.mail.Message" id="apidoc.element.total.js.mail.Message">
        function <span class="apidocSignatureSpan">total.js.mail.</span>Message
        <span class="apidocSignatureSpan">(subject, body)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Message(subject, body) {
	this.subject = subject || '';
	this.body = body || '';
	this.files;
	this.addressTo = [];
	this.addressReply;
	this.addressCC;
	this.addressBCC;
	this.addressFrom = { name: '', address: '' };
	this.closed = false;
	this.tls = false;
	this.$callback;
	// Supports (but it's hidden):
	// this.headers;
	// this.$unsubscribe;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.total.js.nosql" id="apidoc.module.total.js.nosql">module total.js.nosql</a></h1>


    <h2>
        <a href="#apidoc.element.total.js.nosql.inmemory" id="apidoc.element.total.js.nosql.inmemory">
        function <span class="apidocSignatureSpan">total.js.nosql.</span>inmemory
        <span class="apidocSignatureSpan">(name, view)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inmemory = function (name, view) {
	if (view)
		name += '#' + view;
	return INMEMORY[name] = true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

global.WTF = (message, name, uri) =&gt; F.problem(message, name, uri);
global.INCLUDE = global.SOURCE = (name, options) =&gt; F.source(name, options);
global.MODULE = (name) =&gt; F.module(name);
global.NOSQL = (name) =&gt; F.nosql(name);
global.NOBIN = (name) =&gt; F.nosql(name).binary;
global.NOCOUNTER = (name) =&gt; F.nosql(name).counter;
global.NOMEM = global.NOSQLMEMORY = (name, view) =&gt; global.framework_nosql.<span class="apidocCodeKeywordSpan">inmemory</span>(name, view);
global.CONFIG = (name) =&gt; F.config[name];
global.UPTODATE = (type, url, options, interval, callback) =&gt; F.uptodate(type, url, options, interval, callback);
global.INSTALL = (type, name, declaration, options, callback) =&gt; F.install(type, name, declaration, options, callback);
global.UNINSTALL = (type, name, options) =&gt; F.uninstall(type, name, options);
global.RESOURCE = (name, key) =&gt; F.resource(name, key);
global.TRANSLATE = (name, key) =&gt; F.translate(name, key);
global.TRANSLATOR = (name, text) =&gt; F.translator(name, text);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.nosql.load" id="apidoc.element.total.js.nosql.load">
        function <span class="apidocSignatureSpan">total.js.nosql.</span>load
        <span class="apidocSignatureSpan">(name, filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">load = function (name, filename) {
	return new Database(name, filename);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `req.localize()` performs localization (executes `F.onLocale`)
- added: `image.limit(type, value)` creates a memory/map/disk/etc. limitation for GM or IM
- added: `default-image-consumption` for GM/IM memory limitation (default value `30%`)
- added: `F.useSMTP(smtp, [options], [callback(err)])` rewrites current SMTP settings

- updated: `F.http('debug/release/test', { debug: true })` can start a mini debugger
- updated: `F.route()`, `F.websocket()` and `F.file()` --&gt; now returns `FrameworkRoute` instance instead of `Framework` instance
 (more in docs)
- updated: `F.<span class="apidocCodeKeywordSpan">load</span>(debug, [types], [path])` supports a new type `service` which enables
 `F.on('service')`
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
- updated: `F.schedule()` returns an identificator
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.nosql.memory" id="apidoc.element.total.js.nosql.memory">
        function <span class="apidocSignatureSpan">total.js.nosql.</span>memory
        <span class="apidocSignatureSpan">(name, view)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">memory = function (name, view) {
	if (view)
		name += '#' + view;
	return INMEMORY[name] = true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.total.js.utils" id="apidoc.module.total.js.utils">module total.js.utils</a></h1>


    <h2>
        <a href="#apidoc.element.total.js.utils.Async" id="apidoc.element.total.js.utils.Async">
        function <span class="apidocSignatureSpan">total.js.utils.</span>Async
        <span class="apidocSignatureSpan">(owner)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function Async(owner) {

	this._max = 0;
	this._count = 0;
	this._isRunning = false;
	this._isEnd = false;

	this.owner = owner;
	this.onComplete = [];

	this.tasksPending = {};
	this.tasksWaiting = {};
	this.tasksAll = [];
	this.tasksTimeout = {};
	this.isCanceled = false;

	Events.EventEmitter.call(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- fixed: Pagination.last()
- fixed: CSS auto-vendor-prefixes
- fixed: `tpm` binary (bug in creating packages on Windows)
- fixed: controller generators
- fixed: F.install() --&gt; problem with names via URL import
- fixed: F.map() on Windows (problem with paths)
- fixed: HTML compression in views
- fixed: U.<span class="apidocCodeKeywordSpan">Async</span>() object (problem with waitingFor)
- fixed: F.map(), problem in Windows
- fixed: CLEANUP(stream, [callback]);
- fixed: HTTP CACHE

- EXAMPLE (NEW): https://github.com/totaljs/examples/tree/master/blocks

======= 1.9.2 (HOTFIX)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.EventEmitter2" id="apidoc.element.total.js.utils.EventEmitter2">
        function <span class="apidocSignatureSpan">total.js.utils.</span>EventEmitter2
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function EventEmitter2() {
	this.$events = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		self.$flags = flags;
	}

	if (self.$cache_expire &amp;&amp; !self.$nocache) {
		key = '$rest_' + (self.$url + flags.join(',') + (self.$data ? Qs.stringify(self.$data) : '')).hash
();
		var data = F.cache.read2(key);
		if (data) {
			var evt = new framework_utils.<span class="apidocCodeKeywordSpan">EventEmitter2</span>();
			process.nextTick(exec_removelisteners, evt);
			callback(null, self.maketransform(this.$schema ? this.$schema.make(data.json) : data.json, data), data);
			return evt;
		}
	}

	return U.request(self.$url, flags, self.$data, function(err, response, status, headers, hostname) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.GUID" id="apidoc.element.total.js.utils.GUID">
        function <span class="apidocSignatureSpan">total.js.utils.</span>GUID
        <span class="apidocSignatureSpan">(max)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">GUID = function (max) {
	max = max || 40;
	var str = '';
	for (var i = 0; i &lt; (max / 3) + 1; i++)
		str += rnd();
	return str.substring(0, max);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `export.booting` can contain `root` attribute for `package` applications
- updated: `Array.orderBy()` added quicksort algorithm
- updated: `Date.format()` supports day names `ddd` (short) and `dddd` (full)
- updated: `String.removeDiacritics()` supports multiple languages (by @Harry-Slot)
- updated: (IMPORTANT) `U.getExtension(filename)` --&gt; returns extension without `.` dot
- updated: (IMPORTANT) `F.resize(url, action(image), [flags])` new resize routing
- updated: `F.resize()` flags can contain http/https `path` e.g. `F.resize('/img/*.*', (image) =&gt; image.minify(), [&amp;#
x27;https://www.totaljs.com/img/']);`
- updated: `U.<span class="apidocCodeKeywordSpan">GUID</span>()` supports better charset by Guy Fraser
- updated: `Date.add(number)` supports number increase/decrease in milliseconds
- updated: `U.send(name, stream, url, callback, [cookies], [headers], [method], [timeout])` supports cookies and timeout
- updated: `U.request()` supports a new flag `&lt; 200` (kB), it means that the method stores a content with maxixmum size 200
 kB.
- updated: `ErrorBuilder` instance contains a new property `instance.unexpected` when is `instance.push()` a classic Error'
s instance.
- updated: configuration files + resources support types like String, Number, Array, Date, etc. via `key (type) : value`
- updated: `F.use(name, [url], [types])` - now supports new attributes `url`, and `types`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.ObjectToArray" id="apidoc.element.total.js.utils.ObjectToArray">
        function <span class="apidocSignatureSpan">total.js.utils.</span>ObjectToArray
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ObjectToArray = function (obj) {
	if (obj == null)
		return EMPTYARRAY;
	var keys = Object.keys(obj);
	var output = [];
	for (var i = 0, length = keys.length; i &lt; length; i++)
		output.push({ key: keys[i], value: obj[keys[i]]});
	return output;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			cmd = view_prepare_keywords(cmd);
			newCommand = (cmd.substring(8, cmd.indexOf(SPACE, 8)) || '').trim();
			index = cmd.trim().indexOf(SPACE, newCommand.length + 10);

			if (index === -1)
				index = cmd.indexOf('[', newCommand.length + 10);

			builder += '+(function(){var $source=' + cmd.substring(index).trim() + ';if(!($source instanceof Array))$source
=framework_utils.<span class="apidocCodeKeywordSpan">ObjectToArray</span>($source);if(!$source.length)return $EMPTY;var $length=$
source.length;var $output=$EMPTY;var index=0;for(var $i=0;$i&lt;$length;$i++){index=$i;var ' + newCommand + '=$source
[$i];$output+=$EMPTY';
		} else if (cmd === 'end') {

			if (isFN &amp;&amp; counter &lt;= 0) {
				counter = 0;

				if (isCOMPILATION) {
					builder = builderTMP + 'unescape($EMPTY' + builder + '),model) || $EMPTY)';
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.assign" id="apidoc.element.total.js.utils.assign">
        function <span class="apidocSignatureSpan">total.js.utils.</span>assign
        <span class="apidocSignatureSpan">(obj, path, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">assign = function (obj, path, fn) {

	if (obj == null)
		return obj;

	var arr = path.split('.');
	var model = obj[arr[0]];

	for (var i = 1; i &lt; arr.length - 1; i++)
		model = model[arr[i]];

	model[arr[arr.length - 1]] = typeof (fn) === 'function' ? fn(model[arr[arr.length - 1]]) : fn;
	return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: framework.source(name), call a business logic
- added: new global methods include() and source() are linked into the config['directory-source']
- added: config['default-websocket-encodedecode'] - encodeURIComponent &amp;&amp; decodeURIComponent (IMPORTANT: default
: false)
- added: Builders.ErrorBuilder.resource(filename, prefix) - can change resource filename or prefix
- added: new global variables - Builders, Mail, Utils
- added: Builders.validate(schemaName, model) - returns ErrorBuilder from everywhere (uses framework.resource)
- added: allowed controllers in subdirectories
- added: utils.<span class="apidocCodeKeywordSpan">assign</span>(obj, path, value/function) - read more in documentation

- updated: Builders.schema(name, obj, [defaults], [validator]) - validator is new
- updated: Builders.validation(name, [arr] or [function])
- updated: controller.find(id or function)
- updated: utils.copy(source, [target]);
- updated: WebSocket.close([id], [message], [code]);
- updated: WebSocketClient.close([message], [code]);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.async" id="apidoc.element.total.js.utils.async">
        function <span class="apidocSignatureSpan">total.js.utils.</span>async
        <span class="apidocSignatureSpan">(fn, isApply)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">async = function (fn, isApply) {
	var context = this;
	return function(complete) {

		var self = this;
		var argv;

		if (arguments.length) {

			if (isApply) {
				// index.js/Subscribe.prototype.doExecute
				argv = arguments[1];
			} else {
				argv = [];
				for (var i = 1; i &lt; arguments.length; i++)
					argv.push(arguments[i]);
			}
		} else
			argv = new Array(0);

		var generator = fn.apply(context, argv);
		next(null);

		function next(err, result) {

			var g, type;

			try
			{
				var can = err ? false : true;
				switch (can) {
					case true:
						g = generator.next(result);
						break;
					case false:
						g = generator.throw(err);
						break;
				}

			} catch (e) {

				if (!complete)
					return;

				type = typeof(complete);

				if (type === 'object' &amp;&amp; complete.isController) {
					if (e instanceof ErrorBuilder)
						complete.content(e);
					else
						complete.view500(e);
					return;
				}

				type === 'function' &amp;&amp; setImmediate(() =&gt; complete(e));
				return;
			}

			if (g.done) {
				typeof(complete) === 'function' &amp;&amp; complete(null, g.value);
				return;
			}

			var promise = g.value instanceof Promise;

			if (typeof(g.value) !== 'function' &amp;&amp; !promise) {
				next.call(self, null, g.value);
				return;
			}

			try
			{
				if (promise) {
					g.value.then((value) =&gt; next.call(self, null, value));
					return;
				}

				g.value.call(self, function() {
					next.apply(self, arguments);
				});

			} catch (e) {
				setImmediate(() =&gt; next.call(self, e));
			}
		}

		return generator.value;
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `@{sitemap_name([id], [arg1], [arg2], [argN])}` returns a name/title from the sitemap
- added: `@{sitemap_change(id, property, newvalue)}` can change a current value in the sitemap
- added: `@{sitemap_navigation([parent], [language])` can get list of all items according to the parent
- added: `/startup/` all scripts in this directory are executed only one (then are renamed automatically)
- added: `F.route()` supports a new flag: `cors` (creates a cors route) and `credentials` (enables cookies for cors)
- added: `ErrorBuilder.plain()` returns all errors as a simple string
- added: `Array.findItem()` alias to `Array.find()`
- added: `Number.<span class="apidocCodeKeywordSpan">async</span>(fn(index, next), callback)` for asynchronous operations
- added: `UID()` for generating unique identificators (contains minimum 18 chars)
- added: `F.restart()` for restarting app
- added: `F.on('restart')`
- added: quicksort algorithm for sorting arrays
- added: `Array.quicksort(property_name, [asc], [maxlength])` for sorting arrays
- added: `String.removeTags()` by @harry-stot
- added: F.nosql(name) + NOSQL(name) --&gt; alias for NoSQL embedded database (it can be used with e.g. SQL Agent)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.atob" id="apidoc.element.total.js.utils.atob">
        function <span class="apidocSignatureSpan">total.js.utils.</span>atob
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">atob = function (str) {
	return exports.createBuffer(str, 'base64').toString('binary');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: email supports calendar (.ics) request sending
- added: SchemaBuilderEntity.make(function(schema))
- added: F.install() supports packages mapping
- added: Support for unicode routing
- added: Packages can be loaded in framework structure (/controllers/, /modules/) `exports.booting = true`
- added: route flags can contains object --&gt; the object is an additional options for middleware
- added: Utils.btoa(str) --&gt; returns base64
- added: Utils.<span class="apidocCodeKeywordSpan">atob</span>(str) --&gt; returns binary
- added: global.TRY(fnScope, [fnError]) --&gt; creates safe scope (more in documentation)
- added: Utils.getExtension(filename)
- added: @{head} can be imported as @{import('head')}
- added: @{meta} can be imported as @{import('meta')}
- added: controller.cookie('KEY') --&gt; for reading
- added: controller.cookie('KEY', 'VALUE', expire, [options]) --&gt; for writting
- added: framework.onParseQuery(function(value)) --&gt; for parsing values from the requests
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.btoa" id="apidoc.element.total.js.utils.btoa">
        function <span class="apidocSignatureSpan">total.js.utils.</span>btoa
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">btoa = function (str) {
	return (str instanceof Buffer) ? str.toString('base64') : exports.createBuffer(str.toString(), 'binary').toString('base64');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: F.localize(name, url, [middleware], [options], [minify]) --&gt; minify argument
- added: email supports calendar (.ics) request sending
- added: SchemaBuilderEntity.make(function(schema))
- added: F.install() supports packages mapping
- added: Support for unicode routing
- added: Packages can be loaded in framework structure (/controllers/, /modules/) `exports.booting = true`
- added: route flags can contains object --&gt; the object is an additional options for middleware
- added: Utils.<span class="apidocCodeKeywordSpan">btoa</span>(str) --&gt; returns base64
- added: Utils.atob(str) --&gt; returns binary
- added: global.TRY(fnScope, [fnError]) --&gt; creates safe scope (more in documentation)
- added: Utils.getExtension(filename)
- added: @{head} can be imported as @{import('head')}
- added: @{meta} can be imported as @{import('meta')}
- added: controller.cookie('KEY') --&gt; for reading
- added: controller.cookie('KEY', 'VALUE', expire, [options]) --&gt; for writting
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.chunker" id="apidoc.element.total.js.utils.chunker">
        function <span class="apidocSignatureSpan">total.js.utils.</span>chunker
        <span class="apidocSignatureSpan">(name, max)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">chunker = function (name, max) {
	return new Chunker(name, max);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `TRACE(message, [name], [url], [ip])` is an alias for `F.trace()`
- added: `F.config['trace-console']` (default: `true`) shows tracing on the console
- added: `F.convert(name, type/function(val))` registers a new convertor (convertors uses QueryParser (GET/POST))
- added: `F.convert(obj)` performs convertor for an object
- added: `F.download(url, filename, [callback])` a new alias for `F.snapshot()`
- added: `$$$([group], name)` for `GETSCHEMA([group], name)`
- added: configuration files supports options for all dependencies `module#mymodulename    (Object)   : { name: 'A custom options
 for dependency' }`
- added: `U.<span class="apidocCodeKeywordSpan">chunker</span>()` added a new property `chunker.pages` with count of all stored
pages
- added: `U.chunker()` added a new property `chunker.count` with count of all stored items
- added: `NEWOPERATION(name, fn(error, callback(response), value))` - registers a new operation (same as schemas)
- added: `OPERATION('name', function(err, response))` - executes an operation (same as schemas)
- added: `.flac` file extensions
- added: a new method for `MailMessage` object `message.unsubscribe('your URL or email address')`

- updated: new error message `The field "@" is invalid.`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.clearDNS" id="apidoc.element.total.js.utils.clearDNS">
        function <span class="apidocSignatureSpan">total.js.utils.</span>clearDNS
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clearDNS = function () {
	dnscache = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: Array.prototype.compare(propName, arr, comparer)
- added: Image.geometry(w, h, options)
- added: Image.thumbnail(w, h, options)
- added: Image.filter(type)
- added: `config['default-maximum-file-descriptors'] = 0` (0 = the watcher is disabled)
- added: `config['default-interval-clear-dnscache'] = 2880` for clearing DNS cache of Utils.request(), Utils.download()
- added: Utils.resolve(url, callback(err, uri)) DNS cache
- added: Utils.<span class="apidocCodeKeywordSpan">clearDNS</span>() clears DNS cache
- added: Utils.isObject()
- added: String.prototype.parseJSON()
- added: Date.prototype.diff([date], type)
- added: framework.onCompileView(name, content, model)
- added: framework.on('cache-set', function(name, value, expire))
- added: `@{compile handlerbars}CONTENT TO COMPILE@{end}`
- added: `@{compile}CONTENT TO COMPILE@{end}`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.clone" id="apidoc.element.total.js.utils.clone">
        function <span class="apidocSignatureSpan">total.js.utils.</span>clone
        <span class="apidocSignatureSpan">(obj, skip, skipFunctions)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clone = function (obj, skip, skipFunctions) {

	if (!obj)
		return obj;

	var type = typeof(obj);
	if (type !== 'object' || obj instanceof Date)
		return obj;

	var length;
	var o;

	if (obj instanceof Array) {

		length = obj.length;
		o = new Array(length);

		for (var i = 0; i &lt; length; i++) {
			type = typeof(obj[i]);
			if (type !== 'object' || obj[i] instanceof Date) {
				if (skipFunctions &amp;&amp; type === 'function')
					continue;
				o[i] = obj[i];
				continue;
			}
			o[i] = exports.clone(obj[i], skip, skipFunctions);
		}

		return o;
	}

	o = {};

	for (var m in obj) {

		if (skip &amp;&amp; skip[m])
			continue;

		var val = obj[m];

		if (val instanceof Buffer) {
			var copy = exports.createBufferSize(val.length);
			val.copy(copy);
			o[m] = copy;
			continue;
		}

		var type = typeof(val);
		if (type !== 'object' || val instanceof Date) {
			if (skipFunctions &amp;&amp; type === 'function')
				continue;
			o[m] = val;
			continue;
		}

		o[m] = exports.clone(obj[m], skip, skipFunctions);
	}

	return o;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: Components (now doesn't have to has `html` body)
- updated: A component implementation can contain `exports.group = 'name';`
- updated: framework loads all dependencies in order
- updated: routes (web/websockets/files) can have an identificator in this form `F.route('/', ['id:custom_dentificator
']);
- updated: `UNINSTALL(type, url/id/fn)` supports new types `web`, `websocket` and `file`, e.g. `UNINSTALL('web', '
;id:custom_identificator')`
- updated: `U.request()`, added a new flag: `raw` (sends raw data)
- updated: `F.schedule()` returns an identificator
- updated: `U.<span class="apidocCodeKeywordSpan">clone</span>()` supports `buffer` properties
- updated: `setTimeout2(name, fn(param), timeout, [limit], [param])` added a new argument `limit` and `param`
- updated: `F.script()` --&gt; `now` argument (in the script body) is function `now()` which it still returns `new Date()`
- updated: `F.script(body, value, callback(err, response, param), [param])` --&gt; `param` argument is a helper
- updated: middleware `next(false)` cancels calling of next middleware and controller
- updated: `OPERATION(name, value, [callback(err, response, param)], [param])` added a new (helper) argument `param`
- updated: Mail error handling (added Message instance)
- updated: `U.request()` add a new flag `noredirect`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.combine" id="apidoc.element.total.js.utils.combine">
        function <span class="apidocSignatureSpan">total.js.utils.</span>combine
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">combine = function () {

	var p = F.directory;

	for (var i = 0, length = arguments.length; i &lt; length; i++) {
		var v = arguments[i];
		if (!v)
			continue;
		if (v[0] === '/')
			v = v.substring(1);

		if (v[0] === '~')
			p = v.substring(1);
		else
			p += (p[p.length - 1] !== '/' ? '/' : '') + v;
	}
	return exports.$normalize(p);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	// package
	if (c === '@') {
		filename = F.path.package(filename.substring(1));
		isPackage = true;
	} else if (c === '=') {
		if (F.isWindows)
			filename = U.<span class="apidocCodeKeywordSpan">combine</span>(F.config['directory-themes'], filename.substring(1));
		else
			filename = F.path.themes(filename.substring(1));
		isPackage = true;
	}

	var isFile = U.getExtension(filename).length &gt; 0;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.copy" id="apidoc.element.total.js.utils.copy">
        function <span class="apidocSignatureSpan">total.js.utils.</span>copy
        <span class="apidocSignatureSpan">(source, target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copy = function (source, target) {

	if (target === undefined)
		return exports.extend({}, source, true);

	if (!target || !source || typeof(target) !== 'object' || typeof(source) !== 'object')
		return target;

	var keys = Object.keys(source);
	var i = keys.length;

	while (i--) {
		var key = keys[i];
		target[key] !== undefined &amp;&amp; (target[key] = exports.clone(source[key]));
	}

	return target;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: Builders.validate(schemaName, model) - returns ErrorBuilder from everywhere (uses framework.resource)
- added: allowed controllers in subdirectories
- added: utils.assign(obj, path, value/function) - read more in documentation

- updated: Builders.schema(name, obj, [defaults], [validator]) - validator is new
- updated: Builders.validation(name, [arr] or [function])
- updated: controller.find(id or function)
- updated: utils.<span class="apidocCodeKeywordSpan">copy</span>(source, [target]);
- updated: WebSocket.close([id], [message], [code]);
- updated: WebSocketClient.close([message], [code]);

- fixed: Controller properties on the WebSocket connections
- fixed: binary
- fixed: utils.validation()
- fixed: multipart upload (problem with multiple values)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.createBuffer" id="apidoc.element.total.js.utils.createBuffer">
        function <span class="apidocSignatureSpan">total.js.utils.</span>createBuffer
        <span class="apidocSignatureSpan">(val, type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(val, type) =&gt; Buffer.from(val || '', type)</pre></li>
    <li>example usage<pre class="apidocCodePre">...
RESTBuilder.prototype.maxlength = function(number) {
	this.$length = number;
	this.$flags = null;
	return this;
};

RESTBuilder.prototype.auth = function(user, password) {
	this.$headers['authorization'] = 'Basic ' + framework_utils.<span class="apidocCodeKeywordSpan">createBuffer
</span>(user + ':' + password).toString('base64');
	return this;
};

RESTBuilder.prototype.schema = function(group, name) {
	this.$schema = exports.getschema(group, name);
	return this;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.createBufferSize" id="apidoc.element.total.js.utils.createBufferSize">
        function <span class="apidocSignatureSpan">total.js.utils.</span>createBufferSize
        <span class="apidocSignatureSpan">(size)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">(size) =&gt; Buffer.alloc(size || 0)</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var directory = U.$normalize(require.main ? Path.dirname(require.main.filename) : process.cwd());

// F.service() changes the values below:
var DATE_EXPIRES = new Date().add('y', 1).toUTCString();

const WEBSOCKET_COMPRESS = U.createBuffer([0x00, 0x00, 0xFF, 0xFF]);
const UIDGENERATOR = { date: new Date().format('yyMMddHHmm'), instance: 'abcdefghijklmnoprstuwxy'.split('
;').random().join('').substring(0, 3), index: 1 };
const EMPTYBUFFER = U.<span class="apidocCodeKeywordSpan">createBufferSize</span>(0);
global.EMPTYBUFFER = EMPTYBUFFER;

const controller_error_status = function(controller, status, problem) {

	if (status !== 500 &amp;&amp; problem)
		controller.problem(problem);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.decode" id="apidoc.element.total.js.utils.decode">
        function <span class="apidocSignatureSpan">total.js.utils.</span>decode
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">decode = function (str) {

	if (str == null)
		return '';

	var type = typeof(str);
	if (type !== 'string')
		str = str.toString();

	return str.decode();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `controller.autodestroy([callback])` only for websocket

- updated: `framework.view()`, `controller.view()` and `@{view()}` supports `=theme/viewname`
- updated: sitemap routing supports localization
- updated: `F.cache.fn(name, fnCache, fnCallback(value, isFromCache))` - added argument `isFromCache`
- updated: `F.use(name, url, types, [first])` - `first` (default: `false`) argument adds a new middleware to the beginning of a
route middleware
- updated: `String.toSearch()` - removes duplicates characters + better performance
- updated: `String.<span class="apidocCodeKeywordSpan">decode</span>()` - improves decoding by Tom Spaccialbelli &lt;https://github
.com/harry-stot&gt;

- fixed: (critical) NoSQL views
- fixed: (critical) view compilation in release mode (problem with just-in-time rendering)
- fixed: (critical) `F.eval()`
- fixed: (critical) parsing Date instance as Date instance in SchemaBuilder
- fixed: `F.resize()` additional path `~`
- fixed: `controller.memorize()` threw a timeout when the action contains some error in the memorize scope
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.distance" id="apidoc.element.total.js.utils.distance">
        function <span class="apidocSignatureSpan">total.js.utils.</span>distance
        <span class="apidocSignatureSpan">(lat1, lon1, lat2, lon2)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">distance = function (lat1, lon1, lat2, lon2) {
	var R = 6371;
	var dLat = (lat2 - lat1).toRad();
	var dLon = (lon2 - lon1).toRad();
	var a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(lat1.toRad()) * Math.cos(lat2.toRad()) * Math.sin(dLon / 2) * Math.sin
(dLon / 2);
	var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
	return (R * c).floor(3);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.download" id="apidoc.element.total.js.utils.download">
        function <span class="apidocSignatureSpan">total.js.utils.</span>download
        <span class="apidocSignatureSpan">(url, flags, data, callback, cookies, headers, encoding, timeout)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">download = function (url, flags, data, callback, cookies, headers, encoding, timeout) {

	// No data (data is optional argument)
	if (typeof(data) === 'function') {
		timeout = encoding;
		encoding = headers;
		headers = cookies;
		cookies = callback;
		callback = data;
		data = '';
	}

	if (typeof(cookies) === 'number') {
		cookies = null;
		timeout = cookies;
	}

	if (typeof(headers) === 'number') {
		headers = null;
		timeout = headers;
	}

	if (typeof(encoding) === 'number') {
		encoding = null;
		timeout = encoding;
	}

	if (typeof(encoding) !== 'string')
		encoding = ENCODING;

	var method = 'GET';
	var type = 0;
	var options = { callback: callback, resolve: false, length: 0, evt: new EventEmitter2(), timeout: timeout || 60000, post: false
, encoding: encoding };

	if (headers)
		headers = exports.extend({}, headers);
	else
		headers = {};

	if (data === null)
		data = '';

	if (flags instanceof Array) {
		for (var i = 0, length = flags.length; i &lt; length; i++) {

			// timeout
			if (flags[i] &gt; 0) {
				options.timeout = flags[i];
				continue;
			}

			if (flags[i][0] === '&lt;') {
				// max length is not supported
				continue;
			}

			switch (flags[i].toLowerCase()) {

				case 'utf8':
				case 'ascii':
				case 'base64':
				case 'binary':
				case 'hex':
					options.encoding = flags[i];
					break;

				case 'xhr':
					headers['X-Requested-With'] = 'XMLHttpRequest';
					break;

				case 'plain':
					headers['Content-Type'] = 'text/plain';
					break;
				case 'html':
					headers['Content-Type'] = 'text/html';
					break;

				case 'json':
					headers['Content-Type'] = 'application/json';
					type = 1;
					break;

				case 'xml':
					headers['Content-Type'] = 'text/xml';
					type = 2;
					break;

				case 'get':
				case 'head':
				case 'options':
					method = flags[i].toUpperCase();
					break;

				case 'upload':
					headers['Content-Type'] = 'multipart/form-data';
					break;

				case 'post':
				case 'patch':
				case 'delete':
				case 'put':
					method = flags[i].toUpperCase();
					if (!headers['Content-Type'])
						headers['Content-Type'] = 'application/x-www-form-urlencoded';
					break;

				case 'dnscache':
					options.resolve = true;
					break;

			}
		}
	}

	options.post = method === 'POST' || method === 'PUT' || method === 'DELETE' || method === 'PATCH';

	if (typeof(data) !== 'string')
		data = type === 1 ? JSON.stringify(data) : Qs.stringify(data);
	else if (data[0] === '?')
		data = data.substring(1);

	if (!options.post) {
		if (data.length &amp;&amp; url.indexOf('?') === -1)
			url += '?' + data;
		data = '';
	}

	if (cookies) {
		var builder = '';
		for (var m in cookies)
			builder += (builder ? '; ' : '') + m + '=' + cookies[m];
		if (builder)
			headers['Cookie'] = builder;
	}

	var uri = Url.parse(url);
	uri.method = method;
	uri.agent = false;
	uri.headers = headers;

	if (data.length) {
		options.data = exports.createBuffer(data, ENCODING);
		headers['Content-Length'] = options.data.length;
	}

	if (options.resolve) {
		exports.resolve(url, function(err, u) {
			if (!err)
				uri.host = u.host;
			download_call(uri, options);
		});
	} else
		download_call(uri, options);

	return options.evt;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			case 3:
				flags.push('xml');
				break;
		}
		self.$flags = flags;
	}

	return U.<span class="apidocCodeKeywordSpan">download</span>(self.$url, flags, self.$data, callback, self.$cookies, self.$headers
, undefined, self.$timeout);
};

RESTBuilder.prototype.exec = function(callback) {

	if (!callback)
		callback = NOOP;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.encode" id="apidoc.element.total.js.utils.encode">
        function <span class="apidocSignatureSpan">total.js.utils.</span>encode
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">encode = function (str) {

	if (str == null)
		return '';

	var type = typeof(str);
	if (type !== 'string')
		str = str.toString();

	return str.encode();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: Array.where(), Array.find(), Array.remove() - added a new functionality
- updated: @{view(name, [model], [expire], [expire-key])}
- updated: @{cookie(name)} --&gt; read cookie
- updated: framework.mail(address, subject, view, model, callback, replyTo) - added: replyTo
- updated: controller.view(name) can execute without name (controller.viewname contains name according to URL)
- updated: @{post} is deprecated
- updated: @{get} is deprecated
- updated: String.<span class="apidocCodeKeywordSpan">encode</span>(), String.decode()
- updated: (IMPORTANT) changed the arguments in callback for workflow, compose, transform
- updated: BINARY total --translate SOME TEXT create translate identificator

- renamed: config['directory-angular'] to config['directory-public-virtual']
- renamed: config['allow-compress-html'] to config['allow-compile-html']
- renamed: (IMPORTANT) default view layout from `_layout` to `layout`
- renamed: Utils.parseDateExpire() -&gt; Utils.parseDateExpiration()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.extend" id="apidoc.element.total.js.utils.extend">
        function <span class="apidocSignatureSpan">total.js.utils.</span>extend
        <span class="apidocSignatureSpan">(target, source, rewrite)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend = function (target, source, rewrite) {

	if (!target || !source)
		return target;

	if (typeof(target) !== 'object' || typeof(source) !== 'object')
		return target;

	if (rewrite === undefined)
		rewrite = true;

	var keys = Object.keys(source);
	var i = keys.length;

	while (i--) {
		var key = keys[i];
		if (rewrite || target[key] === undefined)
			target[key] = exports.clone(source[key]);
	}

	return target;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

SchemaInstance.prototype.$clean = SchemaInstance.prototype.$plain = function() {
	return this.$$schema.clean(this);
};

SchemaInstance.prototype.$clone = function() {
	return framework_utils.<span class="apidocCodeKeywordSpan">extend</span>(new this.$$schema.CurrentSchemaInstance(), this, true);
};

SchemaInstance.prototype.$prepare = function() {
	return this.$$schema.prepare(this);
};

SchemaInstance.prototype.$schema = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.extend_headers" id="apidoc.element.total.js.utils.extend_headers">
        function <span class="apidocSignatureSpan">total.js.utils.</span>extend_headers
        <span class="apidocSignatureSpan">(first, second)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend_headers = function (first, second) {
	var keys = Object.keys(first);
	var headers = {};

	var i = keys.length;
	while (i--)
		headers[keys[i]] = first[keys[i]];

	keys = Object.keys(second);
	i = keys.length;

	while (i--)
		headers[keys[i]] = second[keys[i]];

	return headers;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.extend_headers2" id="apidoc.element.total.js.utils.extend_headers2">
        function <span class="apidocSignatureSpan">total.js.utils.</span>extend_headers2
        <span class="apidocSignatureSpan">(first, second)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">extend_headers2 = function (first, second) {
	var keys = Object.keys(second);
	var i = keys.length;
	while (i--)
		first[keys[i]] = second[keys[i]];
	return first;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

exports.upload = function(files, url, callback, cookies, headers, method, timeout) {

	var BOUNDARY = '----totaljs' + Math.random().toString(16).substring(2);
	var h = {};

	headers &amp;&amp; exports.<span class="apidocCodeKeywordSpan">extend_headers2</span>(h, headers);

	if (cookies) {
		var builder = '';
		for (var m in cookies)
			builder += (builder ? '; ' : '') + m + '=' + cookies[m];
		builder &amp;&amp; (h['Cookie'] = builder);
	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.get" id="apidoc.element.total.js.utils.get">
        function <span class="apidocSignatureSpan">total.js.utils.</span>get
        <span class="apidocSignatureSpan">(obj, path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (obj, path) {

	var cachekey = 'G=' + path;

	if (F.temporary.other[cachekey])
		return F.temporary.other[cachekey](obj);

	var arr = path.split('.');
	var builder = [];
	var p = '';

	for (var i = 0, length = arr.length - 1; i &lt; length; i++) {
		var tmp = arr[i];
		var index = tmp.lastIndexOf('[');
		if (index !== -1)
			builder.push('if(!w.' + (p ? p + '.' : '') + tmp.substring(0, index) + ')return');
		p += (p !== '' ? '.' : '') + arr[i];
		builder.push('if(!w.' + p + ')return');
	}

	var fn = (new Function('w', builder.join(';') + ';return w.' + path.replace(/\'/, '\'')));
	F.temporary.other[cachekey] = fn;
	return fn(obj);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (typeof(type) !== 'string')
			continue;

		var isArray = type[0] === ']';
		if (isArray)
			type = type.substring(1, type.length - 1);

		var m = this.parent.<span class="apidocCodeKeywordSpan">get</span>(type);
		m &amp;&amp; dependencies.push({ name: name, isArray: isArray, schema: m });
	}

	return dependencies;
};

/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.getContentType" id="apidoc.element.total.js.utils.getContentType">
        function <span class="apidocSignatureSpan">total.js.utils.</span>getContentType
        <span class="apidocSignatureSpan">(ext)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getContentType = function (ext) {
	if (ext[0] === '.')
		ext = ext.substring(1);
	return CONTENTTYPES[ext] || 'application/octet-stream';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	this.$type = 2;
	data &amp;&amp; this.raw(data);
	return this;
};

RESTBuilder.prototype.accept = function(ext) {
	var type = framework_utils.<span class="apidocCodeKeywordSpan">getContentType</span>(ext);
	if (this.$headers['Accept'] !== type)
		this.$flags = null;
	this.$headers['Accept'] = type;
	return this;
};

RESTBuilder.prototype.xml = function(data) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.getExtension" id="apidoc.element.total.js.utils.getExtension">
        function <span class="apidocSignatureSpan">total.js.utils.</span>getExtension
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getExtension = function (filename) {
	var end = filename.length;
	for (var i = filename.length; i &gt; 1; i--) {
		var c = filename[i];
		if (c === ' ' || c === '?')
			end = i;
		else if (c === '.')
			return filename.substring(i + 1, end);
		else if (c === '/')
			return '';
	}
	return '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `F.problem()`, `F.change()`, `controller.problem()` and `controller.change()` write logs to the file
- updated: `F.mail()` and `controller.mail()` subject is translated according to the language
- updated: `F.file(fnValidation/relative_path, fnExecute, [flags])` the file routing is completely changed
- updated: `export.booting` can contain `root` attribute for `package` applications
- updated: `Array.orderBy()` added quicksort algorithm
- updated: `Date.format()` supports day names `ddd` (short) and `dddd` (full)
- updated: `String.removeDiacritics()` supports multiple languages (by @Harry-Slot)
- updated: (IMPORTANT) `U.<span class="apidocCodeKeywordSpan">getExtension</span>(filename)` --&gt; returns extension without `.`
dot
- updated: (IMPORTANT) `F.resize(url, action(image), [flags])` new resize routing
- updated: `F.resize()` flags can contain http/https `path` e.g. `F.resize('/img/*.*', (image) =&gt; image.minify(), [&amp;#
x27;https://www.totaljs.com/img/']);`
- updated: `U.GUID()` supports better charset by Guy Fraser
- updated: `Date.add(number)` supports number increase/decrease in milliseconds
- updated: `U.send(name, stream, url, callback, [cookies], [headers], [method], [timeout])` supports cookies and timeout
- updated: `U.request()` supports a new flag `&lt; 200` (kB), it means that the method stores a content with maxixmum size 200
 kB.
- updated: `ErrorBuilder` instance contains a new property `instance.unexpected` when is `instance.push()` a classic Error'
s instance.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.getMessageLength" id="apidoc.element.total.js.utils.getMessageLength">
        function <span class="apidocSignatureSpan">total.js.utils.</span>getMessageLength
        <span class="apidocSignatureSpan">(data, isLE)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getMessageLength = function (data, isLE) {

	var length = data[1] &amp; 0x7f;

	if (length === 126)
		return data.length &lt; 4 ? -1 : converBytesToInt64([data[3], data[2], 0x00, 0x00, 0x00, 0x00, 0x00, 0x00], 0, isLE);

	if (length === 127)
		return data.Length &lt; 10 ? -1 : converBytesToInt64([data[9], data[8], data[7], data[6], data[5], data[4], data[3], data[2]], 0,
isLE);

	return length;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.getName" id="apidoc.element.total.js.utils.getName">
        function <span class="apidocSignatureSpan">total.js.utils.</span>getName
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getName = function (path) {
	var l = path.length - 1;
	var c = path[l];
	if (c === '/' || c === '\\')
		path = path.substring(0, l);
	var index = path.lastIndexOf('/');
	if (index !== -1)
		return path.substring(index + 1);
	index = path.lastIndexOf('\\');
	return index === -1 ? path : path.substring(index + 1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `config['default-theme']`
- added: `U.keywords(content, [forSearch], [alternative(true|false|soundex)], [max_count(200)], [max_length(20)], [min_length(2)]);`
- added: `String.prototype.keywords([forSearch], [alternative(true|false|soundex)], [max_count(200)], [max_length(20)], [min_length
(2)])`
- added: `String.prototype.soundex()`
- added: `F.wait(name, [enable])` the server waits for pending task and it responds via 503 status code
- added: `U.parseQuery()` and `String.parseQuery()`
- added: `U.join(path1, path2, path3)`
- added: `U.<span class="apidocCodeKeywordSpan">getName</span>(path)`
- added: `F.on('error400')`
- added: `F.on('error401')`
- added: `F.on('error403')`
- added: `F.on('error404')`
- added: `F.on('error408')`
- added: `F.on('error431')`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.getWebSocketFrame" id="apidoc.element.total.js.utils.getWebSocketFrame">
        function <span class="apidocSignatureSpan">total.js.utils.</span>getWebSocketFrame
        <span class="apidocSignatureSpan">(code, message, type, compress)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getWebSocketFrame = function (code, message, type, compress) {
	var messageBuffer = getWebSocketFrameMessageBytes(code, message);
	var lengthBuffer = getWebSocketFrameLengthBytes(messageBuffer.length);
	var frameBuffer = exports.createBufferSize(1 + lengthBuffer.length + messageBuffer.length);
	frameBuffer[0] = 0x80 | type;
	compress &amp;&amp; (frameBuffer[0] |= 0x40);
	lengthBuffer.copy(frameBuffer, 1, 0, lengthBuffer.length);
	messageBuffer.copy(frameBuffer, lengthBuffer.length + 1, 0, messageBuffer.length);
	return frameBuffer;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.httpStatus" id="apidoc.element.total.js.utils.httpStatus">
        function <span class="apidocSignatureSpan">total.js.utils.</span>httpStatus
        <span class="apidocSignatureSpan">(code, addCode)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">httpStatus = function (code, addCode) {
	if (addCode === undefined)
		addCode = true;
	return (addCode ? code + ': ' : '') + Http.STATUS_CODES[code];
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		if (status === 400 &amp;&amp; self.exception instanceof framework_builders.ErrorBuilder) {
			F.stats.response.errorBuilder++;
			req.$language &amp;&amp; self.exception.setResource(req.$language);
			res.options.body = self.exception.output();
			res.options.type = self.exception.contentType;
			res.$text();
		} else {
			res.options.body = U.<span class="apidocCodeKeywordSpan">httpStatus</span>(status) + prepare_error(self.exception);
			res.options.type = CT_TEXT;
			res.options.code = status || 404;
			res.$text();
		}
		return self;
	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isArray" id="apidoc.element.total.js.utils.isArray">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isArray
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isArray = function (obj) {
	return obj instanceof Array;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isDate" id="apidoc.element.total.js.utils.isDate">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isDate
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDate = function (obj) {
	return obj instanceof Date &amp;&amp; !isNaN(obj.getTime()) ? true : false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						if (val)
							tmp = val.trim().parseDate();
					} else if (typeval === 'number')
						tmp = new Date(val);
					else
						tmp = val;

					if (framework_utils.<span class="apidocCodeKeywordSpan">isDate</span>(tmp))
						tmp = self.$onprepare(property, tmp, undefined, model);
					else
						tmp = (defaults ? isUndefined(defaults(property, false, self.name), null) : null);

					item[property] = tmp;
					break;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isEmpty" id="apidoc.element.total.js.utils.isEmpty">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isEmpty
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isEmpty = function (obj) {

	if (!obj)
		return true;

	if (obj.length)
		return false;

	for (var key in obj) {
		if (hasOwnProperty.call(obj, key))
			return false;
	}

	return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isEqual" id="apidoc.element.total.js.utils.isEqual">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isEqual
        <span class="apidocSignatureSpan">(obj1, obj2, properties)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isEqual = function (obj1, obj2, properties) {

	var keys = properties ? properties : Object.keys(obj1);

	for (var i = 0, length = keys.length; i &lt; length; i++) {
		var key = keys[i];
		var a = obj1[key];
		var b = obj2[key];
		var ta = typeof(a);
		var tb = typeof(b);

		if (ta !== tb)
			return false;

		if (a === b)
			continue;

		if (a instanceof Date &amp;&amp; b instanceof Date) {
			if (a.getTime() === b.getTime())
				continue;
			return false;
		} else if (a instanceof Array &amp;&amp; b instanceof Array) {
			if (JSON.stringify(a) === JSON.stringify(b))
				continue;
			return false;
		}

		if (ta === 'object' &amp;&amp; tb === 'object') {
			if (exports.isEqual(a, b))
				continue;
		}

		return false;
	}

	return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- fixed: ErrorBuilder default transformation to JSON
- fixed: Error handling
- fixed: SchemaBuilder request auto-validation
- fixed: String.isJSON()
- fixed: F.responsePipe() --&gt; problem with transmitted headers
- fixed: evaluating of @{helpers.helper_name()}
- fixed: HTML minification of UTF8 characters
- fixed: U.<span class="apidocCodeKeywordSpan">isEqual</span>()
- fixed: FrameworkImage.save() in Windows by LiaoTzukai
- fixed: SchemaBuilder prefix by Duan Dragula

- improved performance of the response
- improved total performance
- improved view engine performance
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isError" id="apidoc.element.total.js.utils.isError">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isError
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isError = function (obj) {
	return (obj &amp;&amp; obj.stack) ? true : false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isObject" id="apidoc.element.total.js.utils.isObject">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isObject
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isObject = function (value) {
	try {
		return (value &amp;&amp; Object.getPrototypeOf(value) === Object.prototype) ? true : false;
	} catch (e) {
		return false;
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: Image.geometry(w, h, options)
- added: Image.thumbnail(w, h, options)
- added: Image.filter(type)
- added: `config['default-maximum-file-descriptors'] = 0` (0 = the watcher is disabled)
- added: `config['default-interval-clear-dnscache'] = 2880` for clearing DNS cache of Utils.request(), Utils.download()
- added: Utils.resolve(url, callback(err, uri)) DNS cache
- added: Utils.clearDNS() clears DNS cache
- added: Utils.<span class="apidocCodeKeywordSpan">isObject</span>()
- added: String.prototype.parseJSON()
- added: Date.prototype.diff([date], type)
- added: framework.onCompileView(name, content, model)
- added: framework.on('cache-set', function(name, value, expire))
- added: `@{compile handlerbars}CONTENT TO COMPILE@{end}`
- added: `@{compile}CONTENT TO COMPILE@{end}`
- added: Utils.streamer(delimiter, function(value, index)) returns function
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isRegExp" id="apidoc.element.total.js.utils.isRegExp">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isRegExp
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isRegExp = function (obj) {
	return obj &amp;&amp; typeof(obj.test) === 'function' ? true : false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var type = typeof(custom);
	var isSearch = type === 'string' ? custom[0] === '*' || custom[0] === '%' : false;
	var isReg = false;

	if (isSearch)
		custom = custom.substring(1);
	else if (type === 'object')
		isReg = framework_utils.<span class="apidocCodeKeywordSpan">isRegExp</span>(custom);

	for (var prop in this.schema) {

		var schema = this.schema[prop];
		if (!schema)
			continue;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isRelative" id="apidoc.element.total.js.utils.isRelative">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isRelative
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isRelative = function (url) {
	return !(url.substring(0, 2) === '//' || url.indexOf('http://') !== -1 || url.indexOf('https://') !== -1);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.isStaticFile" id="apidoc.element.total.js.utils.isStaticFile">
        function <span class="apidocSignatureSpan">total.js.utils.</span>isStaticFile
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isStaticFile = function (url) {
	return regexpSTATIC.test(url);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		flags = permanent;
		withPath = withPath === true;
	} else
		withPath = withPath === true;

	permanent = withPath;

	if (U.<span class="apidocCodeKeywordSpan">isStaticFile</span>(host)) {
		F.file(host, function(req, res) {
			if (newHost.startsWith('http://') || newHost.startsWith('https://'))
				res.redirect(newHost, permanent);
			else
				res.redirect(newHost[0] !== '/' ? '/' + newHost : newHost, permanent);
		});
		return F;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.join" id="apidoc.element.total.js.utils.join">
        function <span class="apidocSignatureSpan">total.js.utils.</span>join
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">join = function () {
	var path = [''];

	for (var i = 0; i &lt; arguments.length; i++) {
		var current = arguments[i];
		if (!current)
			continue;
		if (current[0] === '/')
			current = current.substring(1);
		var l = current.length - 1;
		if (current[l] === '/')
			current = current.substring(0, l);
		path.push(current);
	}

	path = path.join('/');
	return !isWindows ? path : path.indexOf(':') &gt; -1 ? path.substring(1) : path;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	var errors = this.items;
	var length = errors.length;
	var builder = [];

	for (var i = 0; i &lt; length; i++)
		builder.push(errors[i].error || errors[i].name);

	return builder.<span class="apidocCodeKeywordSpan">join</span>('\n');

};

/**
* Set transformation for current ErrorBuilder
* @param {String} name
* @return {ErrorBuilder}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.keywords" id="apidoc.element.total.js.utils.keywords">
        function <span class="apidocSignatureSpan">total.js.utils.</span>keywords
        <span class="apidocSignatureSpan">(content, forSearch, alternative, max_count, max_length, min_length)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">keywords = function (content, forSearch, alternative, max_count, max_length, min_length) {

	if (forSearch === undefined)
		forSearch = true;

	min_length = min_length || 2;
	max_count = max_count || 200;
	max_length = max_length || 20;

	var words = [];
	var isSoundex = alternative === 'soundex';

	if (content instanceof Array) {
		for (var i = 0, length = content.length; i &lt; length; i++) {
			if (!content[i])
				continue;
			var tmp = (forSearch ? content[i].removeDiacritics().toLowerCase().replace(/y/g, 'i') : content[i].toLowerCase()).replace(/\n
/g, ' ').split(' ');
			if (!tmp || !tmp.length)
				continue;
			for (var j = 0, jl = tmp.length; j &lt; jl; j++)
				words.push(tmp[j]);
		}
	} else
		words = (forSearch ? content.removeDiacritics().toLowerCase().replace(/y/g, 'i') : content.toLowerCase()).replace(/\n/g, ' ').
split(' ');

	if (!words)
		words = [];

	var dic = {};
	var counter = 0;

	for (var i = 0, length = words.length; i &lt; length; i++) {
		var word = words[i].trim();

		if (word.length &lt; min_length)
			continue;

		if (counter &gt;= max_count)
			break;

		if (forSearch)
			word = word.replace(/\W|_/g, '');

		// Gets 80% length of word
		if (alternative) {
			if (isSoundex)
				word = word.soundex();
			else {
				var size = (word.length / 100) * 80;
				if (size &gt; min_length + 1)
					word = word.substring(0, size);
			}
		}

		if (word.length &lt; min_length || word.length &gt; max_length)
			continue;

		if (dic[word])
			dic[word]++;
		else
			dic[word] = 1;

		counter++;
	}

	var keys = Object.keys(dic);

	keys.sort(function(a, b) {
		var countA = dic[a];
		var countB = dic[b];
		return countA &gt; countB ? -1 : countA &lt; countB ? 1 : 0;
	});

	return keys;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated:&nbsp;`@{section name}` can be used in the view more times
- updated: `U.request()` flags supports `number` for timeout and encoding `utf8`, `ascii`, etc.
- updated: `F.restfull()` each action support SchemaBuilder

- fixed: (IMPORTANT) Expires headers - problem with Russian timezone, reported by [ ](https://github.com/anddesigner
)
- fixed: (IMPORTANT) SchemaBuilder validation
- fixed: (IMPORTANT) view caching
- fixed: (IMPORTANT) U.<span class="apidocCodeKeywordSpan">keywords</span>()
- fixed: @{checkbox} value binding
- fixed: dynamic views translator caching
- fixed: URL search string in `F.redirect()` (doesn't work on local relative address)
- fixed: binary / executable for Windows
- fixed: SUCCESS()
- fixed: Schema Validation is performed after F.onAuthorize().
- fixed: checking of maximum request length
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.ls" id="apidoc.element.total.js.utils.ls">
        function <span class="apidocSignatureSpan">total.js.utils.</span>ls
        <span class="apidocSignatureSpan">(path, callback, filter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ls = function (path, callback, filter) {
	var filelist = new FileList();
	filelist.onComplete = callback;

	if (typeof(filter) === 'string') {
		filter = filter.toLowerCase();
		filter.onFilter = function(filename, is) {
			return is ? true : filename.toLowerCase().indexOf(filter);
		};
	} else if (exports.isRegExp(filter)) {
		filter.onFilter = function(filename, is) {
			return is ? true : filter.test(filename);
		};
	} else
		filelist.onFilter = filter || null;

	filelist.walk(path);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: (IMPORTANT) Array.async([NEW: threadCount (Number)], [callback]) supports `threads`
- updated: (IMPORTANT) Array.wait(onItem(item, index), [callback], [threadCount]) supports `threads`
- updated: (IMPORTANT) U.streamer(beg, [end], callback) --&gt; supports "end" delimiter
- updated: Date.format(format, [resource_name]) supports name of months via `MMM` (short) and `MMMM` (full)
- updated: Resources support months e.g. `January     : Janur`
- updated: `F.merge()` supports directories, e.g. `F.merge('app.js', '/js/*.js')`
- updated: NoSQL embeddded version
- updated: `U.<span class="apidocCodeKeywordSpan">ls</span>()` --&gt; [filter] can be `string` or `RegExp`
- updated: `@{meta(title, [description], [keywords], [image])}` and `@{keywords(value)}` keywords can be String Array
- updated:&nbsp;`@{section name}` can be used in the view more times
- updated: `U.request()` flags supports `number` for timeout and encoding `utf8`, `ascii`, etc.
- updated: `F.restfull()` each action support SchemaBuilder

- fixed: (IMPORTANT) Expires headers - problem with Russian timezone, reported by [ ](https://github.com/anddesigner
)
- fixed: (IMPORTANT) SchemaBuilder validation
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.ls2" id="apidoc.element.total.js.utils.ls2">
        function <span class="apidocSignatureSpan">total.js.utils.</span>ls2
        <span class="apidocSignatureSpan">(path, callback, filter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">ls2 = function (path, callback, filter) {
	var filelist = new FileList();
	filelist.advanced = true;
	filelist.onComplete = callback;

	if (typeof(filter) === 'string') {
		filter = filter.toLowerCase();
		filter.onFilter = function(filename, is) {
			return is ? true : filename.toLowerCase().indexOf(filter);
		};
	} else if (exports.isRegExp(filter)) {
		filter.onFilter = function(filename, is) {
			return is ? true : filter.test(filename);
		};
	} else
		filelist.onFilter = filter || null;

	filelist.walk(path);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `controller.$save([helper], callback)` - schema must be defined in the route
- added: `controller.$query([helper], callback)` - schema must be defined in the route
- added: `controller.$transform(name, [helper], callback)` - schema must be defined in the route
- added: `controller.$workflow([name, [helper], callback)` - schema must be defined in the route
- added: `controller.$operation(name, [helper], callback)` - schema must be defined in the route
- added: `controller.$async(callback, [index])` - schema must be defined in the route
- added: new `F.route()` flag `binary` (works only with `raw` flag)
- added: `U.<span class="apidocCodeKeywordSpan">ls2</span>()` --&gt; returns additional information about files (stat Object);
- added: `Pagination` is a global variable
- added: `SchemaBuilder.workflow2(name, options, callback)` skips preparing and validation
- added: `SchemaBuilder.transform2(name, options, callback)` skips preparing and validation
- added: `SchemaBuilder.operation2(name, options, callback)` skips preparing and validation
- added: `ErrorBuilder.exception(message)` - adds a new exception message
- added: `F.findConnection()` finds a websocket connection
- added: `F.findConnections()` finds websocket connections
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.minifyHTML" id="apidoc.element.total.js.utils.minifyHTML">
        function <span class="apidocSignatureSpan">total.js.utils.</span>minifyHTML
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">minifyHTML = function (value) {
	return require('./internal').compile_html(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: U.request() --&gt; response always returns string
- updated: debug.js --&gt; now watchs packages

- fixed: framework starting path (fixed problem with PM2 module)
- fixed: controller.memorize() - prevention for multiple requests
- fixed: routing (POST request without content-type is considered as `application/x-www-form-urlencoded`)
- fixed: sync2()
- fixed: U.<span class="apidocCodeKeywordSpan">minifyHTML</span>() - now compresses JS and CSS in HTML
- fixed: Async.cancel()
- fixed: email attachments
- fixed: throwing error in global middleware
- fixed: Pagination.last()
- fixed: CSS auto-vendor-prefixes
- fixed: `tpm` binary (bug in creating packages on Windows)
- fixed: controller generators
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.minifyScript" id="apidoc.element.total.js.utils.minifyScript">
        function <span class="apidocSignatureSpan">total.js.utils.</span>minifyScript
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">minifyScript = function (value) {
	return require('./internal').compile_javascript(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: HttpFile.$$md5()

======= 1.7.2

- added: Array.prototype.extend(obj, [rewrite])
- added: SchemaBuilderEntity-&gt;constant(name, [value])
- added: Utils.minifyHTML(value);
- added: Utils.<span class="apidocCodeKeywordSpan">minifyScript</span>(value);
- added: Utils.minifyStyle(value);
- added: FrameworkImage.measureSVG(buffer);
- added: auto-parsing SVG width/height
- added: framework.translator([language], text);
- added: TRANSLATOR
- added: SUCCESS(boolean, [value]) returns { success: boolean, value: [value] }
- added: framework.onLocate(req, res) --&gt; this method sets the current localization
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.minifyStyle" id="apidoc.element.total.js.utils.minifyStyle">
        function <span class="apidocSignatureSpan">total.js.utils.</span>minifyStyle
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">minifyStyle = function (value) {
	return require('./internal').compile_css(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

======= 1.7.2

- added: Array.prototype.extend(obj, [rewrite])
- added: SchemaBuilderEntity-&gt;constant(name, [value])
- added: Utils.minifyHTML(value);
- added: Utils.minifyScript(value);
- added: Utils.<span class="apidocCodeKeywordSpan">minifyStyle</span>(value);
- added: FrameworkImage.measureSVG(buffer);
- added: auto-parsing SVG width/height
- added: framework.translator([language], text);
- added: TRANSLATOR
- added: SUCCESS(boolean, [value]) returns { success: boolean, value: [value] }
- added: framework.onLocate(req, res) --&gt; this method sets the current localization
- added: new installation event framework.on('module#name');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.noop" id="apidoc.element.total.js.utils.noop">
        function <span class="apidocSignatureSpan">total.js.utils.</span>noop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">noop = function () {}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: (IMPORTANT) PACKAGES (same as modules but package can contain many files in one file)
- added: framework.stats.request.request (requests count)
- added: FrameworkImage.miniature(w, h, bgColor)
- added: Array.first([def])
- added: Array.last([def])
- added: framework.routing(name)
- added: global --&gt; ROUTING(name)
- added: global --&gt; NOOP() empty function (exists: noop(), Utils.<span class="apidocCodeKeywordSpan">noop</span>())
- added: global --&gt; DEBUG boolean property (is the framework in debug mode?)
- added: global --&gt; RELEASE boolean property (is the framework in release mode?)
- added: global --&gt; TEST boolean property (is the framework in test mode?)
- added: global --&gt; F object property (is alias for "framework")
- added: routing supports schemas `*custom-schema/User` and we can define it in flags
- added: String.prototype.parseBool()
- added: String.prototype.parseJSON()
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.parseBool" id="apidoc.element.total.js.utils.parseBool">
        function <span class="apidocSignatureSpan">total.js.utils.</span>parseBool
        <span class="apidocSignatureSpan">(obj, def)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseBool = function (obj, def) {
	if (obj == null)
		return def === undefined ? false : def;
	var type = typeof(obj);
	return type === 'boolean' ? obj : type === 'number' ? obj &gt; 0 : (type !== 'string' ? obj.toString() : obj).parseBool(def);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: global --&gt; ROUTING(name)
- added: global --&gt; NOOP() empty function (exists: noop(), Utils.noop())
- added: global --&gt; DEBUG boolean property (is the framework in debug mode?)
- added: global --&gt; RELEASE boolean property (is the framework in release mode?)
- added: global --&gt; TEST boolean property (is the framework in test mode?)
- added: global --&gt; F object property (is alias for "framework")
- added: routing supports schemas `*custom-schema/User` and we can define it in flags
- added: String.prototype.<span class="apidocCodeKeywordSpan">parseBool</span>()
- added: String.prototype.parseJSON()
- added: framework.responseImagePrepare(req, res, fnPrepare, fnProcess, [headers])
- added: response.throw400([problem])
- added: response.throw401([problem])
- added: response.throw403([problem])
- added: response.throw404([problem])
- added: response.throw408([problem])
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.parseBoolean" id="apidoc.element.total.js.utils.parseBoolean">
        function <span class="apidocSignatureSpan">total.js.utils.</span>parseBoolean
        <span class="apidocSignatureSpan">(obj, def)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseBoolean = function (obj, def) {
	if (obj == null)
		return def === undefined ? false : def;
	var type = typeof(obj);
	return type === 'boolean' ? obj : type === 'number' ? obj &gt; 0 : (type !== 'string' ? obj.toString() : obj).parseBool(def);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

======= 1.9.1 (HOTFIX)

- added: new sitemap system
- added: a default schema validator is F.onValidation()
- added: ErrorBuilder.setContentType() --&gt; default application/json
- added: View engine supports `else if`
- added: U.<span class="apidocCodeKeywordSpan">parseBoolean</span>(val, [def])
- added: F.backup(filename, path, [callback], [filter]) --&gt; backup some path to one file
- added: F.restore(filename, target, [callback], [filter]) --&gt; restore backup file (but not evaluating)
- added: MailMessage supports custom headers `message.headers = { key: 'value' }`
- added: @{notranslate} --&gt; disables view translation
- added: F.mode('debug') or F.mode('release') --&gt; changes a mode of the framework
- added: EACHSCHEMA([group], prepare(group, name, schema))
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.parseFloat" id="apidoc.element.total.js.utils.parseFloat">
        function <span class="apidocSignatureSpan">total.js.utils.</span>parseFloat
        <span class="apidocSignatureSpan">(obj, def)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseFloat = function (obj, def) {
	if (obj == null)
		return def || 0;
	var type = typeof(obj);
	return type === 'number' ? obj : (type !== 'string' ? obj.toString() : obj).parseFloat(def);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					break;
				// number: integer
				case 1:
					item[property] = self.$onprepare(property, framework_utils.parseInt(val), undefined, model);
					break;
				// number: float
				case 2:
					item[property] = self.$onprepare(property, framework_utils.<span class="apidocCodeKeywordSpan">parseFloat</span>(val), undefined
, model);
					break;

				// string
				case 3:
					tmp = val == null ? '' : autotrim(self, val.toString());
					if (type.length &amp;&amp; type.length &lt; tmp.length)
						tmp = tmp.substring(0, type.length);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.parseInt" id="apidoc.element.total.js.utils.parseInt">
        function <span class="apidocSignatureSpan">total.js.utils.</span>parseInt
        <span class="apidocSignatureSpan">(obj, def)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseInt = function (obj, def) {
	if (obj == null)
		return def || 0;
	var type = typeof(obj);
	return type === 'number' ? obj : (type !== 'string' ? obj.toString() : obj).parseInt(def);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

function parseLength(lower, result) {
	result.raw = 'string';
	var beg = lower.indexOf('(');
	if (beg === -1)
		return result;
	result.length = lower.substring(beg + 1, lower.length - 1).<span class="apidocCodeKeywordSpan">parseInt</span>();
	result.raw = lower.substring(0, beg);
	return result;
}

SchemaBuilderEntity.prototype.$parse = function(name, value, required, custom) {

	var type = typeof(value);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.parseJSON" id="apidoc.element.total.js.utils.parseJSON">
        function <span class="apidocSignatureSpan">total.js.utils.</span>parseJSON
        <span class="apidocSignatureSpan">(value, date)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseJSON = function (value, date) {
	try {
		return JSON.parse(value, date ? jsonparser : undefined);
	} catch(e) {
		return null;
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `quicksort` algorithm has been replaced for `shellsort` (increased performance of sorting about 10-15%)
- updated: `NOSQL().counter.monthly(true, ...)` shows all stats by ID
- updated: `NOSQL().counter.yearly(true, ...)` shows all stats by ID
- updated: `dependencies` supports up-to-date features e.g. `module (1 day)   : https://......js`
- updated: `F.findConnections([path])` a `path` argument is optional
- updated: `U.streamer(beg, [end], function, [skip])` add a new argument `skip`
- updated: deprecated methods in Node.js v7
- updated: `String.<span class="apidocCodeKeywordSpan">parseJSON</span>([date])` added `date` argument (date fields will be converted
 to `datetime`)
- updated: `F.script()` can compile code to function e.g.: `F.script('next(a + b)')` returns a compiled function
- updated: `String.captialize([onlyFirst])` add a new argument `onlyFirst`
- updated: `F.onParseQuery(value, req)` add a new argument `req`
- updated: `F.onParseXML(value, req)` add a new argument `req`
- updated: `F.onParseJSON(value, req)` add a new argument `req`
- updated: `RESTBuilder.url()` without argument returns a current URL
- updated: `RESTBuilder.exec(function(err, value, response))` when the `error` exists the `value` is still `EMPTYOBJECT`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.parseQuery" id="apidoc.element.total.js.utils.parseQuery">
        function <span class="apidocSignatureSpan">total.js.utils.</span>parseQuery
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseQuery = function (value) {
	return F.onParseQuery(value);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.onTheme` delegate
- added: `controller.theme(theme_name)` --&gt; select theme;
- added: `config['default-theme']`
- added: `U.keywords(content, [forSearch], [alternative(true|false|soundex)], [max_count(200)], [max_length(20)], [min_length(2)]);`
- added: `String.prototype.keywords([forSearch], [alternative(true|false|soundex)], [max_count(200)], [max_length(20)], [min_length
(2)])`
- added: `String.prototype.soundex()`
- added: `F.wait(name, [enable])` the server waits for pending task and it responds via 503 status code
- added: `U.<span class="apidocCodeKeywordSpan">parseQuery</span>()` and `String.parseQuery()`
- added: `U.join(path1, path2, path3)`
- added: `U.getName(path)`
- added: `F.on('error400')`
- added: `F.on('error401')`
- added: `F.on('error403')`
- added: `F.on('error404')`
- added: `F.on('error408')`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.parseTheme" id="apidoc.element.total.js.utils.parseTheme">
        function <span class="apidocSignatureSpan">total.js.utils.</span>parseTheme
        <span class="apidocSignatureSpan">(value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseTheme = function (value) {
	if (value[0] !== '=')
		return '';
	var index = value.indexOf('/', 2);
	if (index === -1)
		return '';
	value = value.substring(1, index);
	return value === '?' ? F.config['default-theme'] : value;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- improved: performance in `Expires Header`

======= 1.9.6

- added: MailMessage.manually() and removes auto-sending mail --&gt; works only with `F.mail()` and `controller.Mail()`.
- added: view engine supports now `@{'route-to-static-file.jpg'}`
- added: `U.clone(obj, [skip])`
- added: `U.<span class="apidocCodeKeywordSpan">parseTheme</span>(path)` --&gt; parses theme name
- added: `@{href}` or `@{href(obj)}` or `@{href(key, value)}` --&gt; query string manipulation (more in documentation)
- added: `.jsx` content-type
- added: `robot` flag into the routing (for search engines)
- added: property `req.robot`
- added: property `controller.robot`
- added: property `controller.mobile`
- added: support for default theme name, e.g. `=?/index` (the framework replaces `?` for `default-theme`)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.parseXML" id="apidoc.element.total.js.utils.parseXML">
        function <span class="apidocSignatureSpan">total.js.utils.</span>parseXML
        <span class="apidocSignatureSpan">(xml)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parseXML = function (xml) {

	var beg = -1;
	var end = 0;
	var tmp = 0;
	var current = [];
	var obj = {};
	var from = -1;

	while (true) {
		beg = xml.indexOf('&lt;![CDATA[', beg);
		if (beg === -1)
			break;
		end = xml.indexOf(']]&gt;', beg + 9);
		xml = xml.substring(0, beg) + xml.substring(beg + 9, end).trim().encode() + xml.substring(end + 3);
		beg += 9;
	}

	beg = -1;
	end = 0;

	while (true) {

		beg = xml.indexOf('&lt;', beg + 1);
		if (beg === -1)
			break;

		end = xml.indexOf('&gt;', beg + 1);
		if (end === -1)
			break;

		var el = xml.substring(beg, end + 1);
		var c = el[1];

		if (c === '?' || c === '/') {

			var o = current.pop();

			if (from === -1 || o !== el.substring(2, el.length - 1))
				continue;

			var path = (current.length ? current.join('.') + '.' : '') + o;
			var value = xml.substring(from, beg).decode();

			if (obj[path] === undefined)
				obj[path] = value;
			else if (obj[path] instanceof Array)
				obj[path].push(value);
			else
				obj[path] = [obj[path], value];

			from = -1;
			continue;
		}

		tmp = el.indexOf(' ');
		var hasAttributes = true;

		if (tmp === -1) {
			tmp = el.length - 1;
			hasAttributes = false;
		}

		from = beg + el.length;

		var isSingle = el[el.length - 2] === '/';
		var name = el.substring(1, tmp);

		if (!isSingle)
			current.push(name);

		if (!hasAttributes)
			continue;

		var match = el.match(regexpXML);
		if (!match)
			continue;

		var attr = {};
		var length = match.length;

		for (var i = 0; i &lt; length; i++) {
			var index = match[i].indexOf('"');
			attr[match[i].substring(0, index - 1)] = match[i].substring(index + 1, match[i].length - 1).decode();
		}

		obj[current.join('.') + (isSingle ? '.' + name : '') + '[]'] = attr;
	}

	return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	return U.request(self.$url, flags, self.$data, function(err, response, status, headers, hostname) {

		var type = err ? '' : headers['content-type'] || '';
		var output = new RESTBuilderResponse();

		output.value = type.indexOf('/xml') === -1 ? response.isJSON() ? F.onParseJSON(response) : F.onParseQuery(response) :
response.<span class="apidocCodeKeywordSpan">parseXML</span>();

		if (output.value == null)
			output.value = EMPTYOBJECT;

		output.response = response;
		output.status = status;
		output.headers = headers;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.path" id="apidoc.element.total.js.utils.path">
        function <span class="apidocSignatureSpan">total.js.utils.</span>path
        <span class="apidocSignatureSpan">(path, delimiter)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">path = function (path, delimiter) {
	if (!path)
		path = '';
	delimiter = delimiter || '/';
	return path[path.length - 1] === delimiter ? path : path + delimiter;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}

	if (extensions['jpg'] &amp;&amp; !extensions['jpeg'])
		extensions['jpeg'] = true;
	else if (extensions['jpeg'] &amp;&amp; !extensions['jpg'])
		extensions['jpg'] = true;

	F.routes.resize[url] = { fn: fn, path: U.<span class="apidocCodeKeywordSpan">path</span>(path || url), ishttp: path.match(/http\:|https\:/gi) ? true : false, extension: extensions, cache: cache };
	F.owners.push({ type: 'resize', owner: _owner, id: url });
	return F;
};

/**
* RESTful routing
* @param {String} url A relative url.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.queue" id="apidoc.element.total.js.utils.queue">
        function <span class="apidocSignatureSpan">total.js.utils.</span>queue
        <span class="apidocSignatureSpan">(name, max, fn)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">queue = function (name, max, fn) {

	if (!fn)
		return false;

	if (!max) {
		fn(NOOP);
		return true;
	}

	if (!exports.queuecache[name])
		exports.queuecache[name] = { limit: max, running: 0, pending: [] };

	var item = exports.queuecache[name];
	if (item.running &gt;= item.limit) {
		item.pending.push(fn);
		return false;
	}

	item.running++;
	setImmediate(queue_next_callback, fn, name);
	return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- replaced: (IMPORTANT) `uri` to `url` in F.problems, F.changes, F.errors (saves memory)

- improved: U.removeDiacritics() -&gt; increase about 30%
- improved: handling files
- improved: auto-image-resizer (routes)
- improved: Image.miniature() -&gt; increase about 50%
- improved: U.<span class="apidocCodeKeywordSpan">queue</span>()
- improved: (IMPORTANT) SchemaBuilder validation and preparation

__GENERATORS__:

- added: Image.$$save(filename, [writer])
- added: Image.$$measure();
- added: Image.$$identify();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.random" id="apidoc.element.total.js.utils.random">
        function <span class="apidocSignatureSpan">total.js.utils.</span>random
        <span class="apidocSignatureSpan">(max, min)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">random = function (max, min) {
	max = (max || 100000);
	min = (min || 0);
	return Math.floor(Math.random() * (max - min + 1)) + min;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `URLBuilder.make(fn)`
- added: `NOSQLMEMORY(dbName, [viewName])` enables in-memory database collection
- added: NoSQL `nosql.upsert(doc)` inserts a new document where document doesn't exist in DB
- added: NoSQL `nosql.release()` for releasing of in-memory DB (framework clears unused in-memory databases automatically)
- added: NoSQL `nosql.scalar(type, dbName, [view])` performs scalar operation by type: `sum`, `min`, `max`, `avg`, `count` or `group
`
- added: NoSQL `nosql.binary.all(callback)` browses all stored files
- added: NoSQL `nosql.binary.clear(callback)`removes all stored files
- added: NoSQL `DatabaseBuilder.<span class="apidocCodeKeywordSpan">random</span>()`
- added: NoSQL `DatabaseBuilder.join(field, dbName, [view])` returns `DatabaseBuilder` with updated `.where(field_JoinedDB, field_currentdb
)` method (it supports `.fields()` too)
- added: NoSQL `DatabaseBuilder.join()` supports scalar operation too, e.g. `nosql.join(...).scalar('count')`
- added: NoSQL `DatabaseBuilder.scalar(type, [field])` - types: `sum`, `min`, `max`, `avg`, `count` or `group`
- added: NoSQL `DatabaseBuilder.month(field, [operator], value)` filters `Date` fields according its month number
- added: NoSQL `DatabaseBuilder.year(field, [operator], value)` filters `Date` fields according its year number
- added: NoSQL `DatabaseBuilder.day(field, [operator], value)` filters `Date` fields according its day number
- added: NoSQL events (documents): `insert`, `update`, `modify` and `remove`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.reduce" id="apidoc.element.total.js.utils.reduce">
        function <span class="apidocSignatureSpan">total.js.utils.</span>reduce
        <span class="apidocSignatureSpan">(source, prop, reverse)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reduce = function (source, prop, reverse) {

	if (!(prop instanceof Array)) {
		if (typeof(prop) === 'object')
			return exports.reduce(source, Object.keys(prop), reverse);
	}

	if (source instanceof Array) {
		var arr = [];
		for (var i = 0, length = source.length; i &lt; length; i++)
			arr.push(exports.reduce(source[i], prop, reverse));
		return arr;
	}

	var output = {};

	Object.keys(source).forEach(function(o) {
		if (reverse) {
			if (prop.indexOf(o) === -1)
				output[o] = source[o];
		} else {
			if (prop.indexOf(o) !== -1)
				output[o] = source[o];
		}
	});

	return output;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `SchemaBuilderEntity.$index(index)` can changed `obj.$async()` index (the index can be string e.g. `+1` or `-1`)
- added: `SchemaBuilderEntity.$callback(fn)` can changed `obj.$async()` callback
- added: `SchemaBuilderEntity.$repository(name, [value])` can get / set temporary value

- added: `SchemaBuilderEntity.$output()` sets the current `callback(value)` as output/result for `obj.$async(function(err, output
))`

- updated: when the config contains `directory-temp` with empty value then the framework uses system temporary directory
- updated: `U.<span class="apidocCodeKeywordSpan">reduce</span>()` supports array

- fixed: binary `totaljs`, fixed problem with creating localized texts
- fixed: `F.responseFile()` problem with cached filename, extension was broken when the framework reads the file from cache
- fixed: preparing values with subtype for array in SchemaBuilder
- fixed: generation UID
- fixed: problem with uninstalling middleware
- fixed: email validation, a problem with e.g. `blabla@somedomain.business` by @VarunBatraIT
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.removeDiacritics" id="apidoc.element.total.js.utils.removeDiacritics">
        function <span class="apidocSignatureSpan">total.js.utils.</span>removeDiacritics
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">removeDiacritics = function (str) {
	return str.replace(regexpDiacritics, c =&gt; DIACRITICSMAP[c] || c);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `F.sitemap()` returns object with a new field: `wildcard: {Boolean}`
- updated: `F.problem()`, `F.change()`, `controller.problem()` and `controller.change()` write logs to the file
- updated: `F.mail()` and `controller.mail()` subject is translated according to the language
- updated: `F.file(fnValidation/relative_path, fnExecute, [flags])` the file routing is completely changed
- updated: `export.booting` can contain `root` attribute for `package` applications
- updated: `Array.orderBy()` added quicksort algorithm
- updated: `Date.format()` supports day names `ddd` (short) and `dddd` (full)
- updated: `String.<span class="apidocCodeKeywordSpan">removeDiacritics</span>()` supports multiple languages (by @Harry-Slot)
- updated: (IMPORTANT) `U.getExtension(filename)` --&gt; returns extension without `.` dot
- updated: (IMPORTANT) `F.resize(url, action(image), [flags])` new resize routing
- updated: `F.resize()` flags can contain http/https `path` e.g. `F.resize('/img/*.*', (image) =&gt; image.minify(), [&amp;#
x27;https://www.totaljs.com/img/']);`
- updated: `U.GUID()` supports better charset by Guy Fraser
- updated: `Date.add(number)` supports number increase/decrease in milliseconds
- updated: `U.send(name, stream, url, callback, [cookies], [headers], [method], [timeout])` supports cookies and timeout
- updated: `U.request()` supports a new flag `&lt; 200` (kB), it means that the method stores a content with maxixmum size 200
 kB.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.request" id="apidoc.element.total.js.utils.request">
        function <span class="apidocSignatureSpan">total.js.utils.</span>request
        <span class="apidocSignatureSpan">(url, flags, data, callback, cookies, headers, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">request = function (url, flags, data, callback, cookies, headers, encoding) {

	// No data (data is optional argument)
	if (typeof(data) === 'function') {
		encoding = headers;
		headers = cookies;
		cookies = callback;
		callback = data;
		data = '';
	} else if (!data)
		data = '';

	if (callback === NOOP)
		callback = null;

	var options = { length: 0, timeout: 10000, evt: new EventEmitter2(), encoding: typeof(encoding) !== 'string' ? ENCODING : encoding
, callback: callback, post: false, redirect: 0 };
	var method;
	var type = 0;

	if (headers)
		headers = exports.extend({}, headers);
	else
		headers = {};

	if (flags instanceof Array) {
		for (var i = 0, length = flags.length; i &lt; length; i++) {

			// timeout
			if (flags[i] &gt; 0) {
				options.timeout = flags[i];
				continue;
			}

			if (flags[i][0] === '&lt;') {
				options.max = flags[i].substring(1).trim().parseInt() * 1024; // kB
				continue;
			}

			switch (flags[i].toLowerCase()) {
				case 'utf8':
				case 'ascii':
				case 'base64':
				case 'binary':
				case 'hex':
					options.encoding = flags[i];
					break;
				case 'xhr':
					headers['X-Requested-With'] = 'XMLHttpRequest';
					break;
				case 'plain':
					headers['Content-Type'] = 'text/plain';
					break;
				case 'html':
					headers['Content-Type'] = 'text/html';
					break;
				case 'raw':
					type = 3;
					headers['Content-Type'] = 'application/octet-stream';
					break;
				case 'json':
					headers['Content-Type'] = 'application/json';
					!method &amp;&amp; (method = 'POST');
					type = 1;
					break;
				case 'xml':
					headers['Content-Type'] = 'text/xml';
					!method &amp;&amp; (method = 'POST');
					type = 2;
					break;

				case 'get':
				case 'options':
				case 'head':
					method = flags[i].toUpperCase();
					break;

				case 'noredirect':
					options.noredirect = true;
					break;

				case 'upload':
					headers['Content-Type'] = 'multipart/form-data';
					break;

				case 'post':
				case 'put':
				case 'delete':
				case 'patch':
					method = flags[i].toUpperCase();
					!headers['Content-Type'] &amp;&amp; (headers['Content-Type'] = 'application/x-www-form-urlencoded');
					break;
				case 'dnscache':
					options.resolve = true;
					break;
			}
		}
	}

	if (method)
		options.post = method === 'POST' || method === 'PUT' || method === 'DELETE' || method === 'PATCH';
	else
		method = 'GET';

	if (type !== 3) {
		if (typeof(data) !== 'string')
			data = type === 1 ? JSON.stringify(data) : Qs.stringify(data);
		else if (data[0] === '?')
			data = data.substring(1);

		if (!options.post) {
			data.length &amp;&amp; url.indexOf('?') === -1 &amp;&amp; (url += '?' + data);
			data = '';
		}
	}

	if (data) {
		options.data = data instanceof Buffer ? data : exports.createBuffer(data, ENCODING);
		headers['Content-Length'] = options.data.length;
	}

	if (cookies) {
		var builder = '';
		for (var m in cookies)
			builder += (builder ? '; ' : '') + m + '=' + cookies[m];
		if (builder)
			headers['Cookie'] = builder;
	}

	var uri = Url.parse(url);
	uri.method = method;
	uri.agent = false;
	uri.headers = headers;

	if (options.resolve) {
		exports.resolve(url, function(err, u) {
			!err &amp;&amp; (uri.host = u.host);
			request_call(uri, options);
		});
	} else
		request_call(uri, options);

	return options.evt;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			var evt = new framework_utils.EventEmitter2();
			process.nextTick(exec_removelisteners, evt);
			callback(null, self.maketransform(this.$schema ? this.$schema.make(data.json) : data.json, data), data);
			return evt;
		}
	}

	return U.<span class="apidocCodeKeywordSpan">request</span>(self.$url, flags, self.$data, function(err, response, status, headers
, hostname) {

		var type = err ? '' : headers['content-type'] || '';
		var output = new RESTBuilderResponse();

		output.value = type.indexOf('/xml') === -1 ? response.isJSON() ? F.onParseJSON(response) : F.onParseQuery(response) :
response.parseXML();

		if (output.value == null)
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.resolve" id="apidoc.element.total.js.utils.resolve">
        function <span class="apidocSignatureSpan">total.js.utils.</span>resolve
        <span class="apidocSignatureSpan">(url, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">resolve = function (url, callback) {

	var uri = Url.parse(url);

	if (!callback)
		return dnscache[uri.host];

	if (dnscache[uri.host]) {
		uri.host = dnscache[uri.host];
		callback(null, uri);
		return;
	}

	Dns.resolve4(uri.hostname, function(e, addresses) {
		if (e)
			setImmediate(dnsresolve_callback, uri, callback);
		else {
			dnscache[uri.host] = addresses[0];
			uri.host = addresses[0];
			callback(null, uri);
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `Date.format()` supports `w` and `ww` for week number
- updated: `Date.add()` supports `w`, `ww`, `week`, `weeks`
- updated: MailMessage supports display name `mail.from('Name &lt;vali@demail&gt;');`
- updated: MailMessage supports display name `mail.to('Name &lt;vali@demail&gt;');`
- updated: MailMessage supports display name `mail.to(email, [name], [clear]);`
- updated: MailMessage supports display name `mail.cc('Name &lt;vali@demail&gt;');`
- updated: MailMessage supports display name `mail.cc(email, [name], [clear]);`
- updated: U.<span class="apidocCodeKeywordSpan">resolve</span>(url, [callback]) --&gt; `callback` is optional

- fixed: HTTP cache for HTML 5 offline manifest files
- fixed: async() error handling
- fixed: NoSQL embedded paths
- fixed: problem with empty SMTP options
- fixed: ErrorBuilder default transformation to JSON
- fixed: Error handling
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.restart" id="apidoc.element.total.js.utils.restart">
        function <span class="apidocSignatureSpan">total.js.utils.</span>restart
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">restart = function () {
	exports.queuecache = {};
	dnscache = {};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `@{sitemap_navigation([parent], [language])` can get list of all items according to the parent
- added: `/startup/` all scripts in this directory are executed only one (then are renamed automatically)
- added: `F.route()` supports a new flag: `cors` (creates a cors route) and `credentials` (enables cookies for cors)
- added: `ErrorBuilder.plain()` returns all errors as a simple string
- added: `Array.findItem()` alias to `Array.find()`
- added: `Number.async(fn(index, next), callback)` for asynchronous operations
- added: `UID()` for generating unique identificators (contains minimum 18 chars)
- added: `F.<span class="apidocCodeKeywordSpan">restart</span>()` for restarting app
- added: `F.on('restart')`
- added: quicksort algorithm for sorting arrays
- added: `Array.quicksort(property_name, [asc], [maxlength])` for sorting arrays
- added: `String.removeTags()` by @harry-stot
- added: F.nosql(name) + NOSQL(name) --&gt; alias for NoSQL embedded database (it can be used with e.g. SQL Agent)
- added: modificators can handle `INSTALL('view', ...)`
- added: `String.isPhone()` for phone number validation
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.send" id="apidoc.element.total.js.utils.send">
        function <span class="apidocSignatureSpan">total.js.utils.</span>send
        <span class="apidocSignatureSpan">(name, stream, url, callback, cookies, headers, method, timeout)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">send = function (name, stream, url, callback, cookies, headers, method, timeout) {

	OBSOLETE('U.send()', 'Use U.upload() instead of U.send().');

	if (typeof(stream) === 'string')
		stream = Fs.createReadStream(stream, STREAM_READONLY);

	var BOUNDARY = '----totaljs' + Math.random().toString(16).substring(2);
	var h = {};

	if (headers)
		exports.extend(h, headers);

	if (cookies) {
		var builder = '';
		for (var m in cookies)
			builder += (builder ? '; ' : '') + m + '=' + cookies[m];
		if (builder)
			h['Cookie'] = builder;
	}

	name = exports.getName(name);

	h['Cache-Control'] = 'max-age=0';
	h['Content-Type'] = 'multipart/form-data; boundary=' + BOUNDARY;

	var e = new EventEmitter2();
	var uri = Url.parse(url);
	var options = { protocol: uri.protocol, auth: uri.auth, method: method || 'POST', hostname: uri.hostname, port: uri.port, path:
uri.path, agent: false, headers: h };
	var responseLength = 0;

	var response = function(res) {

		res.body = exports.createBufferSize();
		res._bufferlength = 0;

		res.on('data', function(chunk) {
			CONCAT[0] = res.body;
			CONCAT[1] = chunk;
			res.body = Buffer.concat(CONCAT);
			res._bufferlength += chunk.length;
			e.$events.data &amp;&amp; e.emit('data', chunk, responseLength ? (res._bufferlength / responseLength) * 100 : 0);
		});

		res.on('end', function() {
			var self = this;
			e.$events.end &amp;&amp; e.emit('end', self.statusCode, self.headers);
			e.removeAllListeners();
			e = null;
			callback &amp;&amp; callback(null, self.body.toString('utf8'), self.statusCode, self.headers, uri.host);
			self.body = null;
		});
	};

	var connection = options.protocol === 'https:' ? Https : Http;
	var req = connection.request(options, response);

	req.on('response', function(response) {
		responseLength = +response.headers['content-length'] || 0;
		e.$events.begin &amp;&amp; e.emit('begin', responseLength);
	});

	req.setTimeout(timeout || 60000, function() {
		req.removeAllListeners();
		req = null;
		e.removeAllListeners();
		e = null;
		callback &amp;&amp; callback(new Error(exports.httpStatus(408)), '', 408, undefined, uri.host);
	});

	req.on('error', function(err) {
		req.removeAllListeners();
		req = null;
		e.removeAllListeners();
		e = null;
		callback &amp;&amp; callback(err, '', 0, undefined, uri.host);
	});

	req.on('close', function() {
		req.removeAllListeners();
		req = null;
	});

	var header = NEWLINE + NEWLINE + '--' + BOUNDARY + NEWLINE + 'Content-Disposition: form-data; name="File"; filename="' + name + '"' +
NEWLINE + 'Content-Type: ' + exports.getContentType(exports.getExtension(name)) + NEWLINE + NEWLINE;
	req.write(header);

	// Is Buffer
	if (stream.length) {
		req.write(stream);
		req.end(NEWLINE + NEWLINE + '--' + BOUNDARY + '--');
		return e;
	}

	stream.on('end', () =&gt; req.end(NEWLINE + NEWLINE + '--' + BOUNDARY + '--'));
	stream.pipe(req, STREAM_END);
	return e;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: `F.script()` can compile code to function e.g.: `F.script('next(a + b)')` returns a compiled function
- updated: `String.captialize([onlyFirst])` add a new argument `onlyFirst`
- updated: `F.onParseQuery(value, req)` add a new argument `req`
- updated: `F.onParseXML(value, req)` add a new argument `req`
- updated: `F.onParseJSON(value, req)` add a new argument `req`
- updated: `RESTBuilder.url()` without argument returns a current URL
- updated: `RESTBuilder.exec(function(err, value, response))` when the `error` exists the `value` is still `EMPTYOBJECT`
- updated: addded a new argument `replacer` to `controller.<span class="apidocCodeKeywordSpan">send</span>(message, [id], [blacklist
], [replacer])` and `client.send(message, [raw], [replacer])`

- removed: behaviours
- removed: restrictions
- removed: `TransformBuilder`
- removed: `F.config['allow-compatibility']` (not used)
- removed: `controller.date()` method has been useless
- removed: dynamic view compilation through `.view()` method
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.set" id="apidoc.element.total.js.utils.set">
        function <span class="apidocSignatureSpan">total.js.utils.</span>set
        <span class="apidocSignatureSpan">(obj, path, value)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">set = function (obj, path, value) {
	var cachekey = 'S+' + path;

	if (F.temporary.other[cachekey])
		return F.temporary.other[cachekey](obj, value);

	var arr = path.split('.');
	var builder = [];
	var p = '';

	for (var i = 0, length = arr.length; i &lt; length; i++) {
		p += (p !== '' ? '.' : '') + arr[i];
		var type = arr[i] instanceof Array ? '[]' : '{}';

		if (i !== length - 1) {
			builder.push('if(typeof(w.' + p + ')!=="object"||w.' + p + '===null)w.' + p + '=' + type);
			continue;
		}

		if (type === '{}')
			break;

		p = p.substring(0, p.lastIndexOf('['));
		builder.push('if(!(w.' + p + ' instanceof Array))w.' + p + '=' + type);
		break;
	}

	var fn = (new Function('w', 'a', 'b', builder.join(';') + ';w.' + path.replace(/\'/, '\'') + '=a;return a'));
	F.temporary.other[cachekey] = fn;
	fn(obj, value, path);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

======= 1.9.7

- added: `F.web()` --&gt; alias to F.route()
- added: `F.cors(url, flags, credentials)`
- added: `config['default-response-maxage']`, default value `11111111`
- added: `U.get(obj, path)` reads a value from `obj` by path
- added: `U.<span class="apidocCodeKeywordSpan">set</span>(obj, path, value)` sets a value into `obj` by path
- added: (IMPORTANT) `config['default-root']` can replace root relative path
- added: `FrameworkImage` --&gt; `instance.make(function(image) {})`
- added: `FrameworkImage` supports middleware `FrameworkImage.middleware(extension, fn)`
- added: `controller.$get([helper], callback)` or alias `controller.$read([helper], callback)` - schema must be defined in the route
- added: `controller.$remove([helper], callback)` - schema must be defined in the route
- added: `controller.$save([helper], callback)` - schema must be defined in the route
- added: `controller.$query([helper], callback)` - schema must be defined in the route
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.setContentType" id="apidoc.element.total.js.utils.setContentType">
        function <span class="apidocSignatureSpan">total.js.utils.</span>setContentType
        <span class="apidocSignatureSpan">(ext, type)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setContentType = function (ext, type) {
	if (ext[0] === '.')
		ext = ext.substring(1);

	if (ext.length &gt; 8) {
		var tmp = regexpSTATIC.toString().replace(/\,\d+\}/, ',' + ext.length + '}').substring(1);
		regexpSTATIC = new RegExp(tmp.substring(0, tmp.length - 1));
	}

	CONTENTTYPES[ext] = type;
	return true;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

- improve: routing performance with F.onAuthorization()

======= 1.9.1 (HOTFIX)

- added: new sitemap system
- added: a default schema validator is F.onValidation()
- added: ErrorBuilder.<span class="apidocCodeKeywordSpan">setContentType</span>() --&gt; default application/json
- added: View engine supports `else if`
- added: U.parseBoolean(val, [def])
- added: F.backup(filename, path, [callback], [filter]) --&gt; backup some path to one file
- added: F.restore(filename, target, [callback], [filter]) --&gt; restore backup file (but not evaluating)
- added: MailMessage supports custom headers `message.headers = { key: 'value' }`
- added: @{notranslate} --&gt; disables view translation
- added: F.mode('debug') or F.mode('release') --&gt; changes a mode of the framework
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.streamer" id="apidoc.element.total.js.utils.streamer">
        function <span class="apidocSignatureSpan">total.js.utils.</span>streamer
        <span class="apidocSignatureSpan">(beg, end, callback, skip)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">streamer = function (beg, end, callback, skip) {

	if (typeof(end) === 'function') {
		skip = callback;
		callback = end;
		end = undefined;
	}

	var indexer = 0;
	var buffer = exports.createBufferSize();

	if (skip === undefined)
		skip = 0;

	beg = exports.createBuffer(beg, 'utf8');
	if (end)
		end = exports.createBuffer(end, 'utf8');

	if (!end) {
		var length = beg.length;
		return function(chunk) {

			if (!chunk)
				return;

			CONCAT[0] = buffer;
			CONCAT[1] = chunk;
			buffer = Buffer.concat(CONCAT);

			var index = buffer.indexOf(beg);
			if (index === -1)
				return;

			while (index !== -1) {

				if (skip)
					skip--;
				else
					callback(buffer.toString('utf8', 0, index + length), indexer++);

				buffer = buffer.slice(index + length);
				index = buffer.indexOf(beg);
				if (index === -1)
					return;
			}
		};
	}

	var blength = beg.length;
	var elength = end.length;
	var bi = -1;
	var ei = -1;
	var is = false;

	return function(chunk) {

		if (!chunk)
			return;

		CONCAT[0] = buffer;
		CONCAT[1] = chunk;
		buffer = Buffer.concat(CONCAT);

		if (!is) {
			bi = buffer.indexOf(beg);
			if (bi === -1)
				return;
			is = true;
		}

		if (is) {
			ei = buffer.indexOf(end, bi + blength);
			if (ei === -1)
				return;
		}

		while (bi !== -1) {

			if (skip)
				skip--;
			else
				callback(buffer.toString('utf8', bi, ei + elength), indexer++);

			buffer = buffer.slice(ei + elength);
			is = false;
			bi = buffer.indexOf(beg);
			if (bi === -1)
				return;
			is = true;
			ei = buffer.indexOf(end, bi + blength);
			if (ei === -1)
				return;
		}
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- updated: new error message `The field "@" is invalid.`
- updated: `NOSQL().insert(doc, [unique])`
- updated: `quicksort` algorithm has been replaced for `shellsort` (increased performance of sorting about 10-15%)
- updated: `NOSQL().counter.monthly(true, ...)` shows all stats by ID
- updated: `NOSQL().counter.yearly(true, ...)` shows all stats by ID
- updated: `dependencies` supports up-to-date features e.g. `module (1 day)   : https://......js`
- updated: `F.findConnections([path])` a `path` argument is optional
- updated: `U.<span class="apidocCodeKeywordSpan">streamer</span>(beg, [end], function, [skip])` add a new argument `skip`
- updated: deprecated methods in Node.js v7
- updated: `String.parseJSON([date])` added `date` argument (date fields will be converted to `datetime`)
- updated: `F.script()` can compile code to function e.g.: `F.script('next(a + b)')` returns a compiled function
- updated: `String.captialize([onlyFirst])` add a new argument `onlyFirst`
- updated: `F.onParseQuery(value, req)` add a new argument `req`
- updated: `F.onParseXML(value, req)` add a new argument `req`
- updated: `F.onParseJSON(value, req)` add a new argument `req`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.sync" id="apidoc.element.total.js.utils.sync">
        function <span class="apidocSignatureSpan">total.js.utils.</span>sync
        <span class="apidocSignatureSpan">(fn, owner)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sync = function (fn, owner) {
	return function() {

		var args = [].slice.call(arguments);
		var params;
		var callback;
		var executed = false;
		var self = owner || this;

		args.push(function() {
			params = arguments;
			if (!executed &amp;&amp; callback) {
				executed = true;
				callback.apply(self, params);
			}
		});

		fn.apply(self, args);

		return function(cb) {
			callback = cb;
			if (!executed &amp;&amp; params) {
				executed = true;
				callback.apply(self, params);
			}
		};
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.sync2" id="apidoc.element.total.js.utils.sync2">
        function <span class="apidocSignatureSpan">total.js.utils.</span>sync2
        <span class="apidocSignatureSpan">(fn, owner)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">sync2 = function (fn, owner) {
	return (function() {

		var params;
		var callback;
		var executed = false;
		var self = owner || this;
		var args = [].slice.call(arguments);

		args.push(function() {
			params = arguments;
			if (!executed &amp;&amp; callback) {
				executed = true;
				callback.apply(self, params);
			}
		});

		fn.apply(self, args);

		return function(cb) {
			callback = cb;
			if (!executed &amp;&amp; params) {
				executed = true;
				callback.apply(self, params);
			}
		};
	})();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.trim" id="apidoc.element.total.js.utils.trim">
        function <span class="apidocSignatureSpan">total.js.utils.</span>trim
        <span class="apidocSignatureSpan">(obj, clean)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trim = function (obj, clean) {

	if (!obj)
		return obj;

	var type = typeof(obj);
	if (type === 'string') {
		obj = obj.trim();
		return clean &amp;&amp; !obj ? undefined : obj;
	}

	if (obj instanceof Array) {
		for (var i = 0, length = obj.length; i &lt; length; i++) {

			var item = obj[i];
			type = typeof(item);

			if (type === 'object') {
				exports.trim(item, clean);
				continue;
			}

			if (type !== 'string')
				continue;

			obj[i] = item.trim();
			if (clean &amp;&amp; !obj[i])
				obj[i] = undefined;
		}

		return obj;
	}

	if (type !== 'object')
		return obj;

	var keys = Object.keys(obj);
	for (var i = 0, length = keys.length; i &lt; length; i++) {
		var val = obj[keys[i]];
		var type = typeof(val);
		if (type === 'object') {
			exports.trim(val, clean);
			continue;
		} else if (type !== 'string')
			continue;
		obj[keys[i]] = val.trim();
		if (clean &amp;&amp; !obj[keys[i]])
			obj[keys[i]] = undefined;
	}

	return obj;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	callback &amp;&amp; callback(null, output, argument);
	return output;
};

SchemaBuilderEntity.prototype.load = SchemaBuilderEntity.prototype.make; // Because JSDoc doesn't work with double asserting

function autotrim(context, value) {
	return context.trim ? value.<span class="apidocCodeKeywordSpan">trim</span>() : value;
}

SchemaBuilderEntity.prototype.$onprepare = function(name, value, index, model) {
	if (this.onPrepare) {
		var val = this.onPrepare(name, value, index, model);
		return val === undefined ? value : val;
	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.upload" id="apidoc.element.total.js.utils.upload">
        function <span class="apidocSignatureSpan">total.js.utils.</span>upload
        <span class="apidocSignatureSpan">(files, url, callback, cookies, headers, method, timeout)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">upload = function (files, url, callback, cookies, headers, method, timeout) {

	var BOUNDARY = '----totaljs' + Math.random().toString(16).substring(2);
	var h = {};

	headers &amp;&amp; exports.extend_headers2(h, headers);

	if (cookies) {
		var builder = '';
		for (var m in cookies)
			builder += (builder ? '; ' : '') + m + '=' + cookies[m];
		builder &amp;&amp; (h['Cookie'] = builder);
	}

	h['Cache-Control'] = 'max-age=0';
	h['Content-Type'] = 'multipart/form-data; boundary=' + BOUNDARY;

	var e = new EventEmitter2();
	var uri = Url.parse(url);
	var options = { protocol: uri.protocol, auth: uri.auth, method: method || 'POST', hostname: uri.hostname, port: uri.port, path:
uri.path, agent: false, headers: h };
	var responseLength = 0;

	var response = function(res) {

		res.body = exports.createBufferSize();
		res._bufferlength = 0;

		res.on('data', function(chunk) {
			CONCAT[0] = res.body;
			CONCAT[1] = chunk;
			res.body = Buffer.concat(CONCAT);
			res._bufferlength += chunk.length;
			e.$events.data &amp;&amp; e.emit('data', chunk, responseLength ? (res._bufferlength / responseLength) * 100 : 0);
		});

		res.on('end', function() {
			var self = this;
			e.$events.end &amp;&amp; e.emit('end', self.statusCode, self.headers);
			e.removeAllListeners();
			e = null;
			callback &amp;&amp; callback(null, self.body.toString('utf8'), self.statusCode, self.headers, uri.host);
			self.body = null;
		});
	};

	var connection = options.protocol === 'https:' ? Https : Http;
	var req = connection.request(options, response);

	req.on('response', function(response) {
		responseLength = +response.headers['content-length'] || 0;
		e.$events.begin &amp;&amp; e.emit('begin', responseLength);
	});

	req.setTimeout(timeout || 60000, function() {
		req.removeAllListeners();
		req = null;
		e.removeAllListeners();
		e = null;
		callback &amp;&amp; callback(new Error(exports.httpStatus(408)), '', 408, undefined, uri.host);
	});

	req.on('error', function(err) {
		req.removeAllListeners();
		req = null;
		e.removeAllListeners();
		e = null;
		callback &amp;&amp; callback(err, '', 0, undefined, uri.host);
	});

	req.on('close', function() {
		req.removeAllListeners();
		req = null;
	});

	var header = NEWLINE + NEWLINE + '--' + BOUNDARY + NEWLINE + 'Content-Disposition: form-data; name="{0}"; filename="{1}"' + NEWLINE
 + 'Content-Type: {2}' + NEWLINE + NEWLINE;

	files.waitFor(function(item, next) {

		// item.name;
		// item.filename;
		// item.stream (optional) or item.buffer (optional)

		req.write(header.format(item.name, U.getName(item.filename), exports.getContentType(exports.getExtension(item.filename))));

		if (item.buffer) {
			req.write(item.buffer);
			return next();
		}

		!item.stream &amp;&amp; (item.stream = Fs.createReadStream(item.filename));
		item.stream.pipe(req, STREAM_END);
		item.stream.on('error', next);
		item.stream.on('end', next);

	}, () =&gt; req.end(NEWLINE + NEWLINE + '--' + BOUNDARY + '--'));
	return e;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
- added: `F.clearSchedule(id)` for removing existing schedules
- added: a support for WebSocket compression
- added: removing `.package` files from `tmp` directory
- added: a new schema implementation (more in docs)
- added: `F.restful2()` has simplified route mechanism (it doesn't use "{id}" param for insert(POST)/update(POST)/
delete(DELETE) method with except "GET" method)
- added: `res.binary(buffer, contentType, [type], [download], [headers])`
- added: a new route flag `novalidate` (a prevention for Schema validation)
- added: `U.<span class="apidocCodeKeywordSpan">upload</span>(files, url, [callback], [cookies], [headers], [method], [timeout])`
for multiple uploading files
- added: `RESTBuilder.redirect(true/false)` enables/disables auto-redirect (default: enabled)
- added: new schema aliases (`$QUERY()`, `$GET()`, `$WORKFLOW()`, '$TRANSFORM()' and `$OPERATION()`)
- added: `allow-head` (default: false) adds `head` method into the each route automatically
- added: `F.config['allow-defer']` enables deferring functions with `DEFER` keyword (default: false)
- added: `DEFER` feature
- added: `F.config['allow-debug']` starts a mini debugger
- added: `res.image_nocache()` alternative to `F.responseImageWithoutCache`
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.validate_builder" id="apidoc.element.total.js.utils.validate_builder">
        function <span class="apidocSignatureSpan">total.js.utils.</span>validate_builder
        <span class="apidocSignatureSpan">(model, error, schema, collection, path, index, fields, pluspath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">validate_builder = function (model, error, schema, collection, path, index, fields, pluspath) {

	var entity = collection[schema];
	var prepare = entity.onValidate || F.onValidate || NOOP;
	var current = path === undefined ? '' : path + '.';
	var properties = entity.properties;

	if (!pluspath)
		pluspath = '';

	if (model == null)
		model = {};

	for (var i = 0; i &lt; properties.length; i++) {

		var name = properties[i].toString();
		if (fields &amp;&amp; fields.indexOf(name) === -1)
			continue;

		var value = model[name];
		var type = typeof(value);
		var TYPE = collection[schema].schema[name];

		if (value === undefined) {
			error.add(pluspath + name, '@', current + name);
			continue;
		} else if (type === 'function')
			value = model[name]();

		if (type !== 'object') {
			if (Builders.isJoin(collection, name))
				type = 'object';
		}

		if (type === 'object' &amp;&amp; !exports.isDate(value)) {
			entity = collection[schema];

			if (entity) {
				entity = entity.schema[name] || null;

				if (entity === Date || entity === String || entity === Number || entity === Boolean) {
					// Empty
				} else if (entity &amp;&amp; typeof(entity) === 'string') {

					var isArray = entity[0] === '[';

					if (!isArray) {
						exports.validate_builder(value, error, schema, collection, current + name, index, undefined, pluspath);
						continue;
					}

					entity = entity.substring(1, entity.length - 1).trim();

					if (!(value instanceof Array)) {
						error.add(pluspath + name, (pluspath ? '@' + name : '@'), current + name, index);
						continue;
					}

					// The schema not exists
					if (collection[entity] === undefined) {

						var result2 = prepare(name, value, current + name, model, schema, TYPE);
						if (result2 === undefined) {
							result2 = validate_builder_default(name, value, TYPE);
							if (result2)
								continue;
						}

						type = typeof(result2);

						if (type === 'string') {
							error.add(pluspath + name, result2, current + name, index);
							continue;
						}

						if (type === 'boolean' &amp;&amp; !result2) {
							error.add(pluspath + name, (pluspath ? '@' + name : '@'), current + name, index);
							continue;
						}

						if (result2.isValid === false)
							error.add(pluspath + name, result2.error, current + name, index);

						continue;
					}

					var result3 = prepare(name, value, current + name, model, schema, TYPE);
					if (result3 === undefined) {
						result3 = validate_builder_default(name, value, TYPE);
						if (result3)
							continue;
					}

					if (result3 !== undefined) {

						type = typeof(result3);

						if (type === 'string') {
							error.add(pluspath + name, result3, current + name, index);
							continue;
						}

						if (type === 'boolean' &amp;&amp; !result3) {
							error.add(pluspath + name, (pluspath ? '@' + name : '@'), current + name, index);
							continue;
						}

						if (result3.isValid === false) {
							error.add(pluspath + name, result3.error, current + name, index);
							continue;
						}
					}

					var sublength = value.length;
					for (var j = 0; j &lt; sublength; j++)
						exports.validate_builder(value[j], error, entity, collection, current + name, j, undefined, pluspath);
					continue;
				}
			}
		}

		var result = prepare(name, value, current + name, model, schema, TYPE);
		if (result === undefined) {
			result = validate_builder_default(name, value, TYPE);
			if (result)
				continue;
		}

		type = typeof(result);

		if (type === 'string') {
			error.add(pluspath + name, result, current + name, index);
			continue;
		}

		if (type === 'boolean') {
			if (!result)
				error.add(pluspath + name, (pluspath ? '@' + name : '@'), current + name, index);
			continue;
		}

		if (result.isValid === false)
			error.add(pluspath + name, result.error, current + name, index);
	}

	return error;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				if (entity === Date || entity === String || entity === Number || entity === Boolean) {
					// Empty
				} else if (entity &amp;&amp; typeof(entity) === 'string') {

					var isArray = entity[0] === '[';

					if (!isArray) {
						exports.<span class="apidocCodeKeywordSpan">validate_builder</span>(value, error, schema, collection, current + name, index
, undefined, pluspath);
						continue;
					}

					entity = entity.substring(1, entity.length - 1).trim();

					if (!(value instanceof Array)) {
						error.add(pluspath + name, (pluspath ? '@' + name : '@'), current + name, index);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.total.js.utils.wait" id="apidoc.element.total.js.utils.wait">
        function <span class="apidocSignatureSpan">total.js.utils.</span>wait
        <span class="apidocSignatureSpan">(fnValid, fnCallback, timeout, interval)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">wait = function (fnValid, fnCallback, timeout, interval) {

	if (fnValid() === true)
		return fnCallback(null, true);

	var id_timeout = null;
	var id_interval = setInterval(function() {

		if (fnValid() === true) {
			clearInterval(id_interval);
			clearTimeout(id_timeout);
			fnCallback &amp;&amp; fnCallback(null, true);
			return;
		}

	}, interval || 500);

	id_timeout = setTimeout(function() {
		clearInterval(id_interval);
		fnCallback &amp;&amp; fnCallback(new Error('Timeout.'), false);
	}, timeout || 5000);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if (!name || typeof(name) === 'function') {
		fn = name;
		name = group;
		group = DEFAULT_SCHEMA;
	}

	if (fn)
		return framework_utils.<span class="apidocCodeKeywordSpan">wait</span>(() =&gt; schemas[group], err =&gt; fn(err, schemas[
group]), timeout || 20000);

	var g = schemas[group];
	return g ? g.get(name) : undefined;
};

exports.newschema = function(group, name) {
...</pre></li>
    </ul>




</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>